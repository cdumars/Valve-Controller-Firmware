ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"valve.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "../../../mod/valve/valve.c"
  19              		.section	.text.inc_lox_encoder,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	inc_lox_encoder:
  26              	.LFB171:
   1:../../../mod/valve/valve.c **** /*******************************************************************************
   2:../../../mod/valve/valve.c **** *
   3:../../../mod/valve/valve.c **** * FILE:
   4:../../../mod/valve/valve.c **** * 		valve.c
   5:../../../mod/valve/valve.c **** *
   6:../../../mod/valve/valve.c **** * DESCRIPTION:
   7:../../../mod/valve/valve.c **** * 		Servo valve actuation API	
   8:../../../mod/valve/valve.c **** *
   9:../../../mod/valve/valve.c **** *******************************************************************************/
  10:../../../mod/valve/valve.c **** 
  11:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
  12:../../../mod/valve/valve.c ****  Standard Includes                                                              
  13:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
  14:../../../mod/valve/valve.c **** #include <stdbool.h>
  15:../../../mod/valve/valve.c **** 
  16:../../../mod/valve/valve.c **** 
  17:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
  18:../../../mod/valve/valve.c ****  Project Includes                                                               
  19:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
  20:../../../mod/valve/valve.c **** #if   defined( VALVE_CONTROLLER  )
  21:../../../mod/valve/valve.c **** 	#include "sdr_pin_defines_L0005.h"
  22:../../../mod/valve/valve.c **** #elif defined( ENGINE_CONTROLLER )
  23:../../../mod/valve/valve.c **** 	#include "sdr_pin_defines_L0002.h"
  24:../../../mod/valve/valve.c **** #endif
  25:../../../mod/valve/valve.c **** #include "stm32h7xx_hal.h"
  26:../../../mod/valve/valve.c **** #include "main.h"
  27:../../../mod/valve/valve.c **** #include "valve.h"
  28:../../../mod/valve/valve.c **** #include "usb.h"
  29:../../../mod/valve/valve.c **** 
  30:../../../mod/valve/valve.c **** 
  31:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
  32:../../../mod/valve/valve.c ****  Global Variables 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 2


  33:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
  34:../../../mod/valve/valve.c **** 
  35:../../../mod/valve/valve.c **** #ifdef VALVE_CONTROLLER
  36:../../../mod/valve/valve.c **** /* Encoder variables */
  37:../../../mod/valve/valve.c **** volatile static int32_t  lox_valve_pos       = 0;  /* LOX Valve Encoder count  */
  38:../../../mod/valve/valve.c **** volatile static bool     lox_channelA_state  = ENCODER_LOW; /* Voltage on channel 
  39:../../../mod/valve/valve.c ****                                                              A pin */
  40:../../../mod/valve/valve.c **** volatile static bool     lox_channelB_state  = ENCODER_LOW; /* Voltage on Channel 
  41:../../../mod/valve/valve.c ****                                                              B pin */
  42:../../../mod/valve/valve.c **** volatile static int32_t  fuel_valve_pos      = 0;  /* Fuel Valve Encoder count */
  43:../../../mod/valve/valve.c **** volatile static bool     fuel_channelA_state = ENCODER_LOW; /* Voltage on channel 
  44:../../../mod/valve/valve.c ****                                                              A pin */
  45:../../../mod/valve/valve.c **** volatile static bool     fuel_channelB_state = ENCODER_LOW; /* Voltage on Channel 
  46:../../../mod/valve/valve.c ****                                                              B pin */
  47:../../../mod/valve/valve.c **** 
  48:../../../mod/valve/valve.c **** /* Stepper Driver States */
  49:../../../mod/valve/valve.c **** static STEPPER_DRIVER_STATE lox_driver_state;
  50:../../../mod/valve/valve.c **** static STEPPER_DRIVER_STATE fuel_driver_state;
  51:../../../mod/valve/valve.c **** 
  52:../../../mod/valve/valve.c **** /* Valve openining/closing states */
  53:../../../mod/valve/valve.c **** volatile static bool ox_valve_closing    = false; /* LOX valve is closing   */
  54:../../../mod/valve/valve.c **** volatile static bool ox_valve_opening    = false; /* LOX valve is opening   */
  55:../../../mod/valve/valve.c **** volatile static bool fuel_valve_closing  = false; /* Fuel valve is closing  */
  56:../../../mod/valve/valve.c **** volatile static bool fuel_valve_opening  = false; /* Fuel valve is opening  */
  57:../../../mod/valve/valve.c **** volatile static bool ox_valve_cracking   = false; /* LOX valve is cracking  */
  58:../../../mod/valve/valve.c **** volatile static bool fuel_valve_cracking = false; /* Fuel valve is cracking */
  59:../../../mod/valve/valve.c **** #endif /* #ifdef VALVE_CONTROLLER */
  60:../../../mod/valve/valve.c **** 
  61:../../../mod/valve/valve.c **** 
  62:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
  63:../../../mod/valve/valve.c ****  Internal Function Prototypes 
  64:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
  65:../../../mod/valve/valve.c **** 
  66:../../../mod/valve/valve.c **** #ifdef VALVE_CONTROLLER
  67:../../../mod/valve/valve.c **** /* Enable the lox stepper motor driver */
  68:../../../mod/valve/valve.c **** static void lox_driver_enable
  69:../../../mod/valve/valve.c **** 	(
  70:../../../mod/valve/valve.c **** 	void
  71:../../../mod/valve/valve.c **** 	);
  72:../../../mod/valve/valve.c **** 
  73:../../../mod/valve/valve.c **** /* Enable the fuel stepper motor driver */
  74:../../../mod/valve/valve.c **** static void fuel_driver_enable
  75:../../../mod/valve/valve.c **** 	(
  76:../../../mod/valve/valve.c **** 	void
  77:../../../mod/valve/valve.c **** 	);
  78:../../../mod/valve/valve.c **** 
  79:../../../mod/valve/valve.c **** /* Disable the lox stepper motor driver */
  80:../../../mod/valve/valve.c **** static void lox_driver_disable
  81:../../../mod/valve/valve.c **** 	(
  82:../../../mod/valve/valve.c **** 	void
  83:../../../mod/valve/valve.c **** 	);
  84:../../../mod/valve/valve.c **** 
  85:../../../mod/valve/valve.c **** /* Disable the fuel stepper motor driver */
  86:../../../mod/valve/valve.c **** static void fuel_driver_disable
  87:../../../mod/valve/valve.c **** 	(
  88:../../../mod/valve/valve.c **** 	void
  89:../../../mod/valve/valve.c **** 	);
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 3


  90:../../../mod/valve/valve.c **** 
  91:../../../mod/valve/valve.c **** /* Set the lox stepper motor direction */
  92:../../../mod/valve/valve.c **** static VALVE_STATUS lox_driver_set_direction
  93:../../../mod/valve/valve.c **** 	(
  94:../../../mod/valve/valve.c **** 	STEPPER_DRIVER_DIR_STATE direction
  95:../../../mod/valve/valve.c **** 	);
  96:../../../mod/valve/valve.c **** 
  97:../../../mod/valve/valve.c **** /* Set the fuel stepper motor direction */
  98:../../../mod/valve/valve.c **** static VALVE_STATUS fuel_driver_set_direction
  99:../../../mod/valve/valve.c **** 	(
 100:../../../mod/valve/valve.c **** 	STEPPER_DRIVER_DIR_STATE direction
 101:../../../mod/valve/valve.c **** 	);
 102:../../../mod/valve/valve.c **** 
 103:../../../mod/valve/valve.c **** /* Increase the lox encoder count by one */
 104:../../../mod/valve/valve.c **** static void inc_lox_encoder
 105:../../../mod/valve/valve.c **** 	(
 106:../../../mod/valve/valve.c **** 	void
 107:../../../mod/valve/valve.c **** 	);
 108:../../../mod/valve/valve.c **** 
 109:../../../mod/valve/valve.c **** 
 110:../../../mod/valve/valve.c **** /* Increase the fuel encoder count by one */
 111:../../../mod/valve/valve.c **** static void inc_fuel_encoder
 112:../../../mod/valve/valve.c **** 	(
 113:../../../mod/valve/valve.c **** 	void
 114:../../../mod/valve/valve.c **** 	);
 115:../../../mod/valve/valve.c **** 
 116:../../../mod/valve/valve.c **** 
 117:../../../mod/valve/valve.c **** /* Decrease the lox encoder count by one */
 118:../../../mod/valve/valve.c **** static void dec_lox_encoder
 119:../../../mod/valve/valve.c **** 	(
 120:../../../mod/valve/valve.c **** 	void
 121:../../../mod/valve/valve.c **** 	);
 122:../../../mod/valve/valve.c **** 
 123:../../../mod/valve/valve.c **** 
 124:../../../mod/valve/valve.c **** /* Decrease the fuel encoder count by one */
 125:../../../mod/valve/valve.c **** static void dec_fuel_encoder
 126:../../../mod/valve/valve.c **** 	(
 127:../../../mod/valve/valve.c **** 	void
 128:../../../mod/valve/valve.c **** 	);
 129:../../../mod/valve/valve.c **** 
 130:../../../mod/valve/valve.c **** #endif
 131:../../../mod/valve/valve.c **** 
 132:../../../mod/valve/valve.c **** 
 133:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 134:../../../mod/valve/valve.c ****  API Functions 
 135:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 136:../../../mod/valve/valve.c **** 
 137:../../../mod/valve/valve.c **** #ifdef VALVE_CONTROLLER
 138:../../../mod/valve/valve.c **** /*******************************************************************************
 139:../../../mod/valve/valve.c **** *                                                                              *
 140:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 141:../../../mod/valve/valve.c **** * 		valve_cmd_execute                                                      *
 142:../../../mod/valve/valve.c **** *                                                                              *
 143:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 144:../../../mod/valve/valve.c **** *       Execute a valve subcommand                                             *
 145:../../../mod/valve/valve.c **** *                                                                              *
 146:../../../mod/valve/valve.c **** *******************************************************************************/
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 4


 147:../../../mod/valve/valve.c **** VALVE_STATUS valve_cmd_execute
 148:../../../mod/valve/valve.c **** 	(
 149:../../../mod/valve/valve.c **** 	uint8_t subcommand
 150:../../../mod/valve/valve.c **** 	)
 151:../../../mod/valve/valve.c **** {
 152:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 153:../../../mod/valve/valve.c ****  Local Variables
 154:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 155:../../../mod/valve/valve.c **** uint8_t           valve_num;         /* Valve number, 0 -> ox, 1 -> fuel   */
 156:../../../mod/valve/valve.c **** VALVE_STATUS      valve_status[2];   /* Valve return codes                 */
 157:../../../mod/valve/valve.c **** MAIN_VALVE_STATES main_valve_states; /* Main valve open/close states       */
 158:../../../mod/valve/valve.c **** 
 159:../../../mod/valve/valve.c **** 
 160:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 161:../../../mod/valve/valve.c ****  Initializations 
 162:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 163:../../../mod/valve/valve.c **** valve_num         = subcommand & 0x01;
 164:../../../mod/valve/valve.c **** subcommand       -= valve_num;
 165:../../../mod/valve/valve.c **** main_valve_states = 0;
 166:../../../mod/valve/valve.c **** 
 167:../../../mod/valve/valve.c **** 
 168:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 169:../../../mod/valve/valve.c ****  Implementation 
 170:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 171:../../../mod/valve/valve.c **** switch( subcommand )
 172:../../../mod/valve/valve.c **** 	{
 173:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 174:../../../mod/valve/valve.c **** 	 VALVE ENABLE	
 175:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 176:../../../mod/valve/valve.c **** 	case VALVE_ENABLE_CODE:
 177:../../../mod/valve/valve.c **** 		{
 178:../../../mod/valve/valve.c **** 		valve_enable_valves();
 179:../../../mod/valve/valve.c **** 		return VALVE_OK;
 180:../../../mod/valve/valve.c **** 		} /* VALVE_ENABLE_CODE*/
 181:../../../mod/valve/valve.c **** 
 182:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 183:../../../mod/valve/valve.c **** 	 VALVE DISABLE 
 184:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 185:../../../mod/valve/valve.c **** 	case VALVE_DISABLE_CODE:
 186:../../../mod/valve/valve.c **** 		{
 187:../../../mod/valve/valve.c **** 		valve_disable_valves();
 188:../../../mod/valve/valve.c **** 		return VALVE_OK;
 189:../../../mod/valve/valve.c **** 		} /* VALVE_DISABLE_CODE */
 190:../../../mod/valve/valve.c **** 
 191:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 192:../../../mod/valve/valve.c **** 	 VALVE OPEN 
 193:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 194:../../../mod/valve/valve.c **** 	case VALVE_OPEN_CODE:
 195:../../../mod/valve/valve.c **** 		{
 196:../../../mod/valve/valve.c **** 		if ( valve_num )
 197:../../../mod/valve/valve.c **** 			{
 198:../../../mod/valve/valve.c **** 			return valve_open_fuel_valve();
 199:../../../mod/valve/valve.c **** 			}
 200:../../../mod/valve/valve.c **** 		else
 201:../../../mod/valve/valve.c **** 			{
 202:../../../mod/valve/valve.c **** 			return valve_open_ox_valve();
 203:../../../mod/valve/valve.c **** 			}
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 5


 204:../../../mod/valve/valve.c **** 		} /* VALVE_OPEN_CODE */
 205:../../../mod/valve/valve.c **** 
 206:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 207:../../../mod/valve/valve.c **** 	 VALVE CLOSE 
 208:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 209:../../../mod/valve/valve.c **** 	case VALVE_CLOSE_CODE:
 210:../../../mod/valve/valve.c **** 		{
 211:../../../mod/valve/valve.c **** 		if ( valve_num )
 212:../../../mod/valve/valve.c **** 			{
 213:../../../mod/valve/valve.c **** 			return valve_close_fuel_valve();
 214:../../../mod/valve/valve.c **** 			}
 215:../../../mod/valve/valve.c **** 		else
 216:../../../mod/valve/valve.c **** 			{
 217:../../../mod/valve/valve.c **** 			return valve_close_ox_valve();
 218:../../../mod/valve/valve.c **** 			}
 219:../../../mod/valve/valve.c **** 		} /* VALVE_CLOSE_CODE */
 220:../../../mod/valve/valve.c **** 
 221:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 222:../../../mod/valve/valve.c **** 	 VALVE CALIBRATE 
 223:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 224:../../../mod/valve/valve.c **** 	case VALVE_CALIBRATE_CODE:
 225:../../../mod/valve/valve.c **** 		{
 226:../../../mod/valve/valve.c **** 		return valve_calibrate_valves();
 227:../../../mod/valve/valve.c **** 		} /* VALVE_CALIBRATE_CODE */
 228:../../../mod/valve/valve.c **** 
 229:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 230:../../../mod/valve/valve.c **** 	 VALVE CRACK 
 231:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 232:../../../mod/valve/valve.c **** 	case VALVE_CRACK_CODE:
 233:../../../mod/valve/valve.c **** 		{
 234:../../../mod/valve/valve.c **** 		if ( valve_num )
 235:../../../mod/valve/valve.c **** 			{
 236:../../../mod/valve/valve.c **** 			return valve_crack_fuel_valve();
 237:../../../mod/valve/valve.c **** 			}
 238:../../../mod/valve/valve.c **** 		else
 239:../../../mod/valve/valve.c **** 			{
 240:../../../mod/valve/valve.c **** 			return valve_crack_ox_valve();
 241:../../../mod/valve/valve.c **** 			}
 242:../../../mod/valve/valve.c **** 		} /* VALVE_CRACK_CODE */
 243:../../../mod/valve/valve.c **** 
 244:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 245:../../../mod/valve/valve.c **** 	 VALVE RESET 
 246:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 247:../../../mod/valve/valve.c **** 	case VALVE_RESET_CODE:
 248:../../../mod/valve/valve.c **** 		{
 249:../../../mod/valve/valve.c **** 		valve_status[0] = valve_close_ox_valve  ();
 250:../../../mod/valve/valve.c **** 		valve_status[1] = valve_close_fuel_valve();
 251:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 252:../../../mod/valve/valve.c **** 			{
 253:../../../mod/valve/valve.c **** 			return VALVE_ERROR;
 254:../../../mod/valve/valve.c **** 			}
 255:../../../mod/valve/valve.c **** 		else
 256:../../../mod/valve/valve.c **** 			{
 257:../../../mod/valve/valve.c **** 			return VALVE_OK;
 258:../../../mod/valve/valve.c **** 			}
 259:../../../mod/valve/valve.c **** 		} /* VALVE_RESET_CODE */
 260:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 6


 261:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 262:../../../mod/valve/valve.c **** 	 VALVE OPENALL 
 263:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 264:../../../mod/valve/valve.c **** 	case VALVE_OPENALL_CODE:
 265:../../../mod/valve/valve.c **** 		{
 266:../../../mod/valve/valve.c **** 		valve_status[0] = valve_open_ox_valve  ();
 267:../../../mod/valve/valve.c **** 		valve_status[1] = valve_open_fuel_valve();
 268:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 269:../../../mod/valve/valve.c **** 			{
 270:../../../mod/valve/valve.c **** 			return VALVE_ERROR;
 271:../../../mod/valve/valve.c **** 			}
 272:../../../mod/valve/valve.c **** 		else
 273:../../../mod/valve/valve.c **** 			{
 274:../../../mod/valve/valve.c **** 			return VALVE_OK;
 275:../../../mod/valve/valve.c **** 			}
 276:../../../mod/valve/valve.c **** 		} /* VALVE_OPENALL_CODE */
 277:../../../mod/valve/valve.c **** 	
 278:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 279:../../../mod/valve/valve.c **** 	 VALVE GETSTATE 
 280:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 281:../../../mod/valve/valve.c **** 	case VALVE_GETSTATE_CODE:
 282:../../../mod/valve/valve.c **** 		{
 283:../../../mod/valve/valve.c **** 		main_valve_states = valve_get_valve_states();
 284:../../../mod/valve/valve.c **** 		#if defined( HOTFIRE )
 285:../../../mod/valve/valve.c **** 			valve_transmit( &main_valve_states         , 
 286:../../../mod/valve/valve.c **** 			                sizeof( main_valve_states ), 
 287:../../../mod/valve/valve.c **** 							HAL_DEFAULT_TIMEOUT );
 288:../../../mod/valve/valve.c **** 		#elif defined( TERMINAL )
 289:../../../mod/valve/valve.c **** 			usb_transmit( &main_valve_states, 
 290:../../../mod/valve/valve.c **** 			              sizeof( main_valve_states ),
 291:../../../mod/valve/valve.c **** 						  HAL_DEFAULT_TIMEOUT );
 292:../../../mod/valve/valve.c **** 		#endif
 293:../../../mod/valve/valve.c **** 		}
 294:../../../mod/valve/valve.c **** 
 295:../../../mod/valve/valve.c **** 	/*--------------------------------------------------------------------------
 296:../../../mod/valve/valve.c **** 	 UNRECOGNIZED SUBCOMMAND 
 297:../../../mod/valve/valve.c **** 	--------------------------------------------------------------------------*/
 298:../../../mod/valve/valve.c **** 	default:
 299:../../../mod/valve/valve.c **** 		{
 300:../../../mod/valve/valve.c **** 		return VALVE_UNRECOGNIZED_SUBCOMMAND;
 301:../../../mod/valve/valve.c **** 		}
 302:../../../mod/valve/valve.c **** 	
 303:../../../mod/valve/valve.c **** 	} /* switch( subcommand ) */
 304:../../../mod/valve/valve.c **** 
 305:../../../mod/valve/valve.c **** } /* valve_cmd_execute */
 306:../../../mod/valve/valve.c **** #endif
 307:../../../mod/valve/valve.c **** 
 308:../../../mod/valve/valve.c **** 
 309:../../../mod/valve/valve.c **** /*******************************************************************************
 310:../../../mod/valve/valve.c **** *                                                                              *
 311:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 312:../../../mod/valve/valve.c **** * 		valve_transmit                                                         *
 313:../../../mod/valve/valve.c **** *                                                                              *
 314:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 315:../../../mod/valve/valve.c **** *       Transmits a specified number of bytes over the valve control           *
 316:../../../mod/valve/valve.c **** *       serial port                                                            *
 317:../../../mod/valve/valve.c **** *                                                                              *
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 7


 318:../../../mod/valve/valve.c **** *******************************************************************************/
 319:../../../mod/valve/valve.c **** VALVE_STATUS valve_transmit
 320:../../../mod/valve/valve.c **** 	(
 321:../../../mod/valve/valve.c **** 	void*    tx_data_ptr , /* Data to send          */
 322:../../../mod/valve/valve.c **** 	size_t   tx_data_size, /* Size of transmit data */
 323:../../../mod/valve/valve.c **** 	uint32_t timeout
 324:../../../mod/valve/valve.c **** 	)
 325:../../../mod/valve/valve.c **** {
 326:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 327:../../../mod/valve/valve.c ****  Local Variables
 328:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 329:../../../mod/valve/valve.c **** HAL_StatusTypeDef hal_status; /* Return code from HAL CMSIS API */
 330:../../../mod/valve/valve.c **** 
 331:../../../mod/valve/valve.c **** 
 332:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 333:../../../mod/valve/valve.c ****  Initializations 
 334:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 335:../../../mod/valve/valve.c **** hal_status = HAL_OK;
 336:../../../mod/valve/valve.c **** 
 337:../../../mod/valve/valve.c **** 
 338:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 339:../../../mod/valve/valve.c ****  Implementation 
 340:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 341:../../../mod/valve/valve.c **** 
 342:../../../mod/valve/valve.c **** /* Transmit buffer */
 343:../../../mod/valve/valve.c **** hal_status = HAL_UART_Transmit( &( VALVE_HUART ), 
 344:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 345:../../../mod/valve/valve.c **** 								tx_data_size    , 
 346:../../../mod/valve/valve.c **** 								timeout );
 347:../../../mod/valve/valve.c **** 
 348:../../../mod/valve/valve.c **** /* Return status */
 349:../../../mod/valve/valve.c **** switch ( hal_status )
 350:../../../mod/valve/valve.c **** 	{
 351:../../../mod/valve/valve.c **** 	case HAL_TIMEOUT:
 352:../../../mod/valve/valve.c **** 		{
 353:../../../mod/valve/valve.c **** 		return VALVE_UART_TIMEOUT;
 354:../../../mod/valve/valve.c **** 		}
 355:../../../mod/valve/valve.c **** 	case HAL_OK:
 356:../../../mod/valve/valve.c **** 		{
 357:../../../mod/valve/valve.c **** 		return VALVE_OK;
 358:../../../mod/valve/valve.c **** 		}
 359:../../../mod/valve/valve.c **** 	default:
 360:../../../mod/valve/valve.c **** 		{
 361:../../../mod/valve/valve.c **** 		return VALVE_UART_ERROR;
 362:../../../mod/valve/valve.c **** 		}
 363:../../../mod/valve/valve.c **** 	} /* switch ( hal_status ) */
 364:../../../mod/valve/valve.c **** 
 365:../../../mod/valve/valve.c **** } /* valve_transmit */
 366:../../../mod/valve/valve.c **** 
 367:../../../mod/valve/valve.c **** 
 368:../../../mod/valve/valve.c **** /*******************************************************************************
 369:../../../mod/valve/valve.c **** *                                                                              *
 370:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 371:../../../mod/valve/valve.c **** * 		valve_receive                                                          *
 372:../../../mod/valve/valve.c **** *                                                                              *
 373:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 374:../../../mod/valve/valve.c **** *       Receive bytes from the valve control serial port                       *
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 8


 375:../../../mod/valve/valve.c **** *                                                                              *
 376:../../../mod/valve/valve.c **** *******************************************************************************/
 377:../../../mod/valve/valve.c **** VALVE_STATUS valve_receive
 378:../../../mod/valve/valve.c **** 	(
 379:../../../mod/valve/valve.c **** 	void*    rx_data_ptr , /* Buffer to export data to        */
 380:../../../mod/valve/valve.c **** 	size_t   rx_data_size, /* Size of the data to be received */
 381:../../../mod/valve/valve.c **** 	uint32_t timeout       /* UART timeout                    */
 382:../../../mod/valve/valve.c **** 	)
 383:../../../mod/valve/valve.c **** {
 384:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 385:../../../mod/valve/valve.c ****  Local Variables
 386:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 387:../../../mod/valve/valve.c **** HAL_StatusTypeDef hal_status; /* Return code from HAL CMSIS API */
 388:../../../mod/valve/valve.c **** 
 389:../../../mod/valve/valve.c **** 
 390:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 391:../../../mod/valve/valve.c ****  Initializations 
 392:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 393:../../../mod/valve/valve.c **** hal_status = HAL_OK;
 394:../../../mod/valve/valve.c **** 
 395:../../../mod/valve/valve.c **** 
 396:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 397:../../../mod/valve/valve.c ****  Implementation 
 398:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 399:../../../mod/valve/valve.c **** 
 400:../../../mod/valve/valve.c **** /* Transmit buffer */
 401:../../../mod/valve/valve.c **** hal_status = HAL_UART_Receive( &( VALVE_HUART ), 
 402:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 403:../../../mod/valve/valve.c **** 							   rx_data_size    , 
 404:../../../mod/valve/valve.c **** 							   timeout );
 405:../../../mod/valve/valve.c **** 
 406:../../../mod/valve/valve.c **** /* Return status */
 407:../../../mod/valve/valve.c **** switch ( hal_status )
 408:../../../mod/valve/valve.c **** 	{
 409:../../../mod/valve/valve.c **** 	case HAL_TIMEOUT:
 410:../../../mod/valve/valve.c **** 		{
 411:../../../mod/valve/valve.c **** 		return VALVE_UART_TIMEOUT;
 412:../../../mod/valve/valve.c **** 		}
 413:../../../mod/valve/valve.c **** 	case HAL_OK:
 414:../../../mod/valve/valve.c **** 		{
 415:../../../mod/valve/valve.c **** 		return VALVE_OK;
 416:../../../mod/valve/valve.c **** 		}
 417:../../../mod/valve/valve.c **** 	default:
 418:../../../mod/valve/valve.c **** 		{
 419:../../../mod/valve/valve.c **** 		return VALVE_UART_ERROR;
 420:../../../mod/valve/valve.c **** 		}
 421:../../../mod/valve/valve.c **** 	} /* switch ( hal_status ) */
 422:../../../mod/valve/valve.c **** 
 423:../../../mod/valve/valve.c **** } /* valve_receive */
 424:../../../mod/valve/valve.c **** 
 425:../../../mod/valve/valve.c **** #ifdef VALVE_CONTROLLER
 426:../../../mod/valve/valve.c **** /*******************************************************************************
 427:../../../mod/valve/valve.c **** *                                                                              *
 428:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 429:../../../mod/valve/valve.c **** * 		valve_enable_valves                                                    *
 430:../../../mod/valve/valve.c **** *                                                                              *
 431:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 9


 432:../../../mod/valve/valve.c **** *       Enable valve drivers to actuate valves                                 *
 433:../../../mod/valve/valve.c **** *                                                                              *
 434:../../../mod/valve/valve.c **** *******************************************************************************/
 435:../../../mod/valve/valve.c **** void valve_enable_valves
 436:../../../mod/valve/valve.c **** 	(
 437:../../../mod/valve/valve.c **** 	void
 438:../../../mod/valve/valve.c **** 	)
 439:../../../mod/valve/valve.c **** {
 440:../../../mod/valve/valve.c **** /* Enable the oxidizer valve */
 441:../../../mod/valve/valve.c **** lox_driver_enable();
 442:../../../mod/valve/valve.c **** 
 443:../../../mod/valve/valve.c **** /* Enable the fuel valve     */
 444:../../../mod/valve/valve.c **** fuel_driver_enable();
 445:../../../mod/valve/valve.c **** 
 446:../../../mod/valve/valve.c **** } /* valve_enable_valves */
 447:../../../mod/valve/valve.c **** 
 448:../../../mod/valve/valve.c **** 
 449:../../../mod/valve/valve.c **** /*******************************************************************************
 450:../../../mod/valve/valve.c **** *                                                                              *
 451:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 452:../../../mod/valve/valve.c **** * 		valve_disable_valves                                                   *
 453:../../../mod/valve/valve.c **** *                                                                              *
 454:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 455:../../../mod/valve/valve.c **** *       Disable valve drivers to actuate valves                                *
 456:../../../mod/valve/valve.c **** *                                                                              *
 457:../../../mod/valve/valve.c **** *******************************************************************************/
 458:../../../mod/valve/valve.c **** void valve_disable_valves
 459:../../../mod/valve/valve.c **** 	(
 460:../../../mod/valve/valve.c **** 	void
 461:../../../mod/valve/valve.c **** 	)
 462:../../../mod/valve/valve.c **** {
 463:../../../mod/valve/valve.c **** /* Disable the oxidizer valve */
 464:../../../mod/valve/valve.c **** lox_driver_disable();
 465:../../../mod/valve/valve.c **** 
 466:../../../mod/valve/valve.c **** /* Disable the fuel valve     */
 467:../../../mod/valve/valve.c **** fuel_driver_disable();
 468:../../../mod/valve/valve.c **** 
 469:../../../mod/valve/valve.c **** } /* valve_disable_valves */
 470:../../../mod/valve/valve.c **** 
 471:../../../mod/valve/valve.c **** 
 472:../../../mod/valve/valve.c **** /*******************************************************************************
 473:../../../mod/valve/valve.c **** *                                                                              *
 474:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 475:../../../mod/valve/valve.c **** * 		valve_open_ox_valve                                                    *
 476:../../../mod/valve/valve.c **** *                                                                              *
 477:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 478:../../../mod/valve/valve.c **** * 		Open the main oxidizer valve                                           *
 479:../../../mod/valve/valve.c **** *                                                                              *
 480:../../../mod/valve/valve.c **** *******************************************************************************/
 481:../../../mod/valve/valve.c **** VALVE_STATUS valve_open_ox_valve
 482:../../../mod/valve/valve.c **** 	(
 483:../../../mod/valve/valve.c **** 	void
 484:../../../mod/valve/valve.c **** 	)
 485:../../../mod/valve/valve.c **** {
 486:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 487:../../../mod/valve/valve.c ****  Local Variables
 488:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 10


 489:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 490:../../../mod/valve/valve.c **** 
 491:../../../mod/valve/valve.c **** 
 492:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 493:../../../mod/valve/valve.c ****  Initializations 
 494:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 495:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
 496:../../../mod/valve/valve.c **** 
 497:../../../mod/valve/valve.c **** 
 498:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 499:../../../mod/valve/valve.c ****  Implementation 
 500:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 501:../../../mod/valve/valve.c **** 
 502:../../../mod/valve/valve.c **** /* Check if valve is already open */
 503:../../../mod/valve/valve.c **** if ( lox_valve_pos == VALVE_OPEN_POS )
 504:../../../mod/valve/valve.c **** 	{
 505:../../../mod/valve/valve.c **** 	return VALVE_OK;
 506:../../../mod/valve/valve.c **** 	}
 507:../../../mod/valve/valve.c **** 
 508:../../../mod/valve/valve.c **** /* Set the direction   */
 509:../../../mod/valve/valve.c **** valve_status = lox_driver_set_direction( STEPPER_DRIVER_CW );
 510:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 511:../../../mod/valve/valve.c **** 	{
 512:../../../mod/valve/valve.c **** 	return valve_status;
 513:../../../mod/valve/valve.c **** 	}
 514:../../../mod/valve/valve.c **** 
 515:../../../mod/valve/valve.c **** /* Actuate the valve   */
 516:../../../mod/valve/valve.c **** ox_valve_opening = true;
 517:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 518:../../../mod/valve/valve.c **** return VALVE_OK;
 519:../../../mod/valve/valve.c **** } /* valve_open_ox_valve */
 520:../../../mod/valve/valve.c **** 
 521:../../../mod/valve/valve.c **** 
 522:../../../mod/valve/valve.c **** /*******************************************************************************
 523:../../../mod/valve/valve.c **** *                                                                              *
 524:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 525:../../../mod/valve/valve.c **** * 		valve_open_fuel_valve                                                  *
 526:../../../mod/valve/valve.c **** *                                                                              *
 527:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 528:../../../mod/valve/valve.c **** * 		Open the main fuel valve                                               *
 529:../../../mod/valve/valve.c **** *                                                                              *
 530:../../../mod/valve/valve.c **** *******************************************************************************/
 531:../../../mod/valve/valve.c **** VALVE_STATUS valve_open_fuel_valve
 532:../../../mod/valve/valve.c **** 	(
 533:../../../mod/valve/valve.c **** 	void
 534:../../../mod/valve/valve.c **** 	)
 535:../../../mod/valve/valve.c **** {
 536:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 537:../../../mod/valve/valve.c ****  Local Variables
 538:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 539:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 540:../../../mod/valve/valve.c **** 
 541:../../../mod/valve/valve.c **** 
 542:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 543:../../../mod/valve/valve.c ****  Initializations 
 544:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 545:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 11


 546:../../../mod/valve/valve.c **** 
 547:../../../mod/valve/valve.c **** 
 548:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 549:../../../mod/valve/valve.c ****  Implementation 
 550:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 551:../../../mod/valve/valve.c **** 
 552:../../../mod/valve/valve.c **** /* Check if valve is already open */
 553:../../../mod/valve/valve.c **** if ( fuel_valve_pos == VALVE_OPEN_POS )
 554:../../../mod/valve/valve.c **** 	{
 555:../../../mod/valve/valve.c **** 	return VALVE_OK;
 556:../../../mod/valve/valve.c **** 	}
 557:../../../mod/valve/valve.c **** 
 558:../../../mod/valve/valve.c **** /* Set the direction   */
 559:../../../mod/valve/valve.c **** valve_status = fuel_driver_set_direction( STEPPER_DRIVER_CW );
 560:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 561:../../../mod/valve/valve.c **** 	{
 562:../../../mod/valve/valve.c **** 	return valve_status;
 563:../../../mod/valve/valve.c **** 	}
 564:../../../mod/valve/valve.c **** 
 565:../../../mod/valve/valve.c **** /* Actuate the valve   */
 566:../../../mod/valve/valve.c **** fuel_valve_opening = true;
 567:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 568:../../../mod/valve/valve.c **** return VALVE_OK;
 569:../../../mod/valve/valve.c **** } /* valve_open_fuel_valve */
 570:../../../mod/valve/valve.c **** 
 571:../../../mod/valve/valve.c **** 
 572:../../../mod/valve/valve.c **** /*******************************************************************************
 573:../../../mod/valve/valve.c **** *                                                                              *
 574:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 575:../../../mod/valve/valve.c **** * 		valve_close_ox_valve                                                   *
 576:../../../mod/valve/valve.c **** *                                                                              *
 577:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 578:../../../mod/valve/valve.c **** *       Close the main oxidizer valve                                          *
 579:../../../mod/valve/valve.c **** *                                                                              *
 580:../../../mod/valve/valve.c **** *******************************************************************************/
 581:../../../mod/valve/valve.c **** VALVE_STATUS valve_close_ox_valve
 582:../../../mod/valve/valve.c **** 	(
 583:../../../mod/valve/valve.c **** 	void
 584:../../../mod/valve/valve.c **** 	)
 585:../../../mod/valve/valve.c **** {
 586:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 587:../../../mod/valve/valve.c ****  Local Variables
 588:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 589:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 590:../../../mod/valve/valve.c **** 
 591:../../../mod/valve/valve.c **** 
 592:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 593:../../../mod/valve/valve.c ****  Initializations 
 594:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 595:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
 596:../../../mod/valve/valve.c **** 
 597:../../../mod/valve/valve.c **** 
 598:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 599:../../../mod/valve/valve.c ****  Implementation 
 600:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 601:../../../mod/valve/valve.c **** 
 602:../../../mod/valve/valve.c **** /* Check if valve is already closed */
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 12


 603:../../../mod/valve/valve.c **** if ( lox_valve_pos == VALVE_CLOSED_POS )
 604:../../../mod/valve/valve.c **** 	{
 605:../../../mod/valve/valve.c **** 	return VALVE_OK;
 606:../../../mod/valve/valve.c **** 	}
 607:../../../mod/valve/valve.c **** 
 608:../../../mod/valve/valve.c **** /* Set the direction   */
 609:../../../mod/valve/valve.c **** valve_status = lox_driver_set_direction( STEPPER_DRIVER_CCW );
 610:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 611:../../../mod/valve/valve.c **** 	{
 612:../../../mod/valve/valve.c **** 	return valve_status;
 613:../../../mod/valve/valve.c **** 	}
 614:../../../mod/valve/valve.c **** 
 615:../../../mod/valve/valve.c **** /* Actuate the valve   */
 616:../../../mod/valve/valve.c **** ox_valve_closing = true;
 617:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 618:../../../mod/valve/valve.c **** return VALVE_OK;
 619:../../../mod/valve/valve.c **** } /* valve_close_ox_valve */
 620:../../../mod/valve/valve.c **** 
 621:../../../mod/valve/valve.c **** 
 622:../../../mod/valve/valve.c **** /*******************************************************************************
 623:../../../mod/valve/valve.c **** *                                                                              *
 624:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 625:../../../mod/valve/valve.c **** * 		valve_close_fuel_valve                                                 *
 626:../../../mod/valve/valve.c **** *                                                                              *
 627:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 628:../../../mod/valve/valve.c **** *       Close the main fuel valve                                              *
 629:../../../mod/valve/valve.c **** *                                                                              *
 630:../../../mod/valve/valve.c **** *******************************************************************************/
 631:../../../mod/valve/valve.c **** VALVE_STATUS valve_close_fuel_valve
 632:../../../mod/valve/valve.c **** 	(
 633:../../../mod/valve/valve.c **** 	void
 634:../../../mod/valve/valve.c **** 	)
 635:../../../mod/valve/valve.c **** {
 636:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 637:../../../mod/valve/valve.c ****  Local Variables
 638:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 639:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 640:../../../mod/valve/valve.c **** 
 641:../../../mod/valve/valve.c **** 
 642:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 643:../../../mod/valve/valve.c ****  Initializations 
 644:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 645:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
 646:../../../mod/valve/valve.c **** 
 647:../../../mod/valve/valve.c **** 
 648:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 649:../../../mod/valve/valve.c ****  Implementation 
 650:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 651:../../../mod/valve/valve.c **** 
 652:../../../mod/valve/valve.c **** /* check if valve is already closed */
 653:../../../mod/valve/valve.c **** if ( fuel_valve_pos == VALVE_CLOSED_POS )
 654:../../../mod/valve/valve.c **** 	{
 655:../../../mod/valve/valve.c **** 	return VALVE_OK;
 656:../../../mod/valve/valve.c **** 	}
 657:../../../mod/valve/valve.c **** 
 658:../../../mod/valve/valve.c **** /* Set the direction   */
 659:../../../mod/valve/valve.c **** valve_status = fuel_driver_set_direction( STEPPER_DRIVER_CCW );
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 13


 660:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 661:../../../mod/valve/valve.c **** 	{
 662:../../../mod/valve/valve.c **** 	return valve_status;
 663:../../../mod/valve/valve.c **** 	}
 664:../../../mod/valve/valve.c **** 
 665:../../../mod/valve/valve.c **** /* Actuate the valve */
 666:../../../mod/valve/valve.c **** fuel_valve_closing = true;
 667:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 668:../../../mod/valve/valve.c **** return VALVE_OK;
 669:../../../mod/valve/valve.c **** } /* valve_close_fuel_valve */
 670:../../../mod/valve/valve.c **** 
 671:../../../mod/valve/valve.c **** 
 672:../../../mod/valve/valve.c **** /*******************************************************************************
 673:../../../mod/valve/valve.c **** *                                                                              *
 674:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 675:../../../mod/valve/valve.c **** * 		valve_crack_ox_valve                                                   *
 676:../../../mod/valve/valve.c **** *                                                                              *
 677:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 678:../../../mod/valve/valve.c **** * 		Slightly open the main oxidizer valve                                  *
 679:../../../mod/valve/valve.c **** *                                                                              *
 680:../../../mod/valve/valve.c **** *******************************************************************************/
 681:../../../mod/valve/valve.c **** VALVE_STATUS valve_crack_ox_valve
 682:../../../mod/valve/valve.c **** 	(
 683:../../../mod/valve/valve.c **** 	void
 684:../../../mod/valve/valve.c **** 	)
 685:../../../mod/valve/valve.c **** {
 686:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 687:../../../mod/valve/valve.c ****  Local Variables
 688:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 689:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 690:../../../mod/valve/valve.c **** 
 691:../../../mod/valve/valve.c **** 
 692:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 693:../../../mod/valve/valve.c ****  Initializations 
 694:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 695:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
 696:../../../mod/valve/valve.c **** 
 697:../../../mod/valve/valve.c **** 
 698:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 699:../../../mod/valve/valve.c ****  Implementation 
 700:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 701:../../../mod/valve/valve.c **** 
 702:../../../mod/valve/valve.c **** /* Check if valve is already open */
 703:../../../mod/valve/valve.c **** if ( lox_valve_pos == VALVE_OPEN_POS )
 704:../../../mod/valve/valve.c **** 	{
 705:../../../mod/valve/valve.c **** 	return VALVE_OK;
 706:../../../mod/valve/valve.c **** 	}
 707:../../../mod/valve/valve.c **** 
 708:../../../mod/valve/valve.c **** /* Set the direction   */
 709:../../../mod/valve/valve.c **** valve_status = lox_driver_set_direction( STEPPER_DRIVER_CW );
 710:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 711:../../../mod/valve/valve.c **** 	{
 712:../../../mod/valve/valve.c **** 	return valve_status;
 713:../../../mod/valve/valve.c **** 	}
 714:../../../mod/valve/valve.c **** 
 715:../../../mod/valve/valve.c **** /* Actuate the valve   */
 716:../../../mod/valve/valve.c **** ox_valve_cracking = true;
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 14


 717:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 718:../../../mod/valve/valve.c **** return VALVE_OK;
 719:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 720:../../../mod/valve/valve.c **** 
 721:../../../mod/valve/valve.c **** 
 722:../../../mod/valve/valve.c **** /*******************************************************************************
 723:../../../mod/valve/valve.c **** *                                                                              *
 724:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 725:../../../mod/valve/valve.c **** * 		valve_crack_fuel_valve                                                 *
 726:../../../mod/valve/valve.c **** *                                                                              *
 727:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 728:../../../mod/valve/valve.c **** * 		Slightly open the main fuel valve                                      *
 729:../../../mod/valve/valve.c **** *                                                                              *
 730:../../../mod/valve/valve.c **** *******************************************************************************/
 731:../../../mod/valve/valve.c **** VALVE_STATUS valve_crack_fuel_valve
 732:../../../mod/valve/valve.c **** 	(
 733:../../../mod/valve/valve.c **** 	void
 734:../../../mod/valve/valve.c **** 	)
 735:../../../mod/valve/valve.c **** {
 736:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 737:../../../mod/valve/valve.c ****  Local Variables
 738:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 739:../../../mod/valve/valve.c **** VALVE_STATUS valve_status; /* Status return codes from valve API */
 740:../../../mod/valve/valve.c **** 
 741:../../../mod/valve/valve.c **** 
 742:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 743:../../../mod/valve/valve.c ****  Initializations 
 744:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 745:../../../mod/valve/valve.c **** valve_status = VALVE_OK;
 746:../../../mod/valve/valve.c **** 
 747:../../../mod/valve/valve.c **** 
 748:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 749:../../../mod/valve/valve.c ****  Implementation 
 750:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 751:../../../mod/valve/valve.c **** 
 752:../../../mod/valve/valve.c **** /* Check if valve is already open */
 753:../../../mod/valve/valve.c **** if ( fuel_valve_pos == VALVE_OPEN_POS )
 754:../../../mod/valve/valve.c **** 	{
 755:../../../mod/valve/valve.c **** 	return VALVE_OK;
 756:../../../mod/valve/valve.c **** 	}
 757:../../../mod/valve/valve.c **** 
 758:../../../mod/valve/valve.c **** /* Set the direction   */
 759:../../../mod/valve/valve.c **** valve_status = fuel_driver_set_direction( STEPPER_DRIVER_CW );
 760:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 761:../../../mod/valve/valve.c **** 	{
 762:../../../mod/valve/valve.c **** 	return valve_status;
 763:../../../mod/valve/valve.c **** 	}
 764:../../../mod/valve/valve.c **** 
 765:../../../mod/valve/valve.c **** /* Actuate the valve   */
 766:../../../mod/valve/valve.c **** fuel_valve_cracking = true;
 767:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 768:../../../mod/valve/valve.c **** return VALVE_OK;
 769:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 770:../../../mod/valve/valve.c **** 
 771:../../../mod/valve/valve.c **** 
 772:../../../mod/valve/valve.c **** /*******************************************************************************
 773:../../../mod/valve/valve.c **** *                                                                              *
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 15


 774:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 775:../../../mod/valve/valve.c **** * 		valve_get_ox_valve_pos                                                 *
 776:../../../mod/valve/valve.c **** *                                                                              *
 777:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 778:../../../mod/valve/valve.c **** *       Get the position of the main oxidizer valve                            *
 779:../../../mod/valve/valve.c **** *                                                                              *
 780:../../../mod/valve/valve.c **** *******************************************************************************/
 781:../../../mod/valve/valve.c **** int32_t valve_get_ox_valve_pos
 782:../../../mod/valve/valve.c **** 	(
 783:../../../mod/valve/valve.c **** 	void
 784:../../../mod/valve/valve.c **** 	)
 785:../../../mod/valve/valve.c **** {
 786:../../../mod/valve/valve.c **** return lox_valve_pos*360/1000;
 787:../../../mod/valve/valve.c **** } /* valve_get_ox_valve_pos */
 788:../../../mod/valve/valve.c **** 
 789:../../../mod/valve/valve.c **** 
 790:../../../mod/valve/valve.c **** /*******************************************************************************
 791:../../../mod/valve/valve.c **** *                                                                              *
 792:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 793:../../../mod/valve/valve.c **** * 		valve_get_fuel_valve_pos                                               *
 794:../../../mod/valve/valve.c **** *                                                                              *
 795:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 796:../../../mod/valve/valve.c **** *       Get the position of the main fuel valve                                *
 797:../../../mod/valve/valve.c **** *                                                                              *
 798:../../../mod/valve/valve.c **** *******************************************************************************/
 799:../../../mod/valve/valve.c **** int32_t valve_get_fuel_valve_pos
 800:../../../mod/valve/valve.c **** 	(
 801:../../../mod/valve/valve.c **** 	void
 802:../../../mod/valve/valve.c **** 	)
 803:../../../mod/valve/valve.c **** {
 804:../../../mod/valve/valve.c **** return fuel_valve_pos*360/1000;
 805:../../../mod/valve/valve.c **** } /* valve_get_fuel_valve_pos */
 806:../../../mod/valve/valve.c **** 
 807:../../../mod/valve/valve.c **** 
 808:../../../mod/valve/valve.c **** /*******************************************************************************
 809:../../../mod/valve/valve.c **** *                                                                              *
 810:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 811:../../../mod/valve/valve.c **** * 		valve_get_ox_valve_state                                               *
 812:../../../mod/valve/valve.c **** *                                                                              *
 813:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 814:../../../mod/valve/valve.c **** *       Get the state of the main oxidizer valve                               *
 815:../../../mod/valve/valve.c **** *                                                                              *
 816:../../../mod/valve/valve.c **** *******************************************************************************/
 817:../../../mod/valve/valve.c **** VALVE_STATE valve_get_ox_valve_state
 818:../../../mod/valve/valve.c **** 	(
 819:../../../mod/valve/valve.c **** 	void
 820:../../../mod/valve/valve.c **** 	)
 821:../../../mod/valve/valve.c **** {
 822:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( PHOTOGATE_GPIO_PORT, LOX_PHOTOGATE_PIN ) == PHOTOGATE_STATE_LOW )
 823:../../../mod/valve/valve.c **** 	{
 824:../../../mod/valve/valve.c **** 	return VALVE_OPEN;
 825:../../../mod/valve/valve.c **** 	}
 826:../../../mod/valve/valve.c **** else
 827:../../../mod/valve/valve.c **** 	{
 828:../../../mod/valve/valve.c **** 	return VALVE_CLOSED;
 829:../../../mod/valve/valve.c **** 	}
 830:../../../mod/valve/valve.c **** } /* valve_get_ox_valve_state */
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 16


 831:../../../mod/valve/valve.c **** 
 832:../../../mod/valve/valve.c **** 
 833:../../../mod/valve/valve.c **** /*******************************************************************************
 834:../../../mod/valve/valve.c **** *                                                                              *
 835:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 836:../../../mod/valve/valve.c **** * 		valve_get_fuel_valve_state                                             *
 837:../../../mod/valve/valve.c **** *                                                                              *
 838:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 839:../../../mod/valve/valve.c **** *       Get the status of the main fuel valve                                  *
 840:../../../mod/valve/valve.c **** *                                                                              *
 841:../../../mod/valve/valve.c **** *******************************************************************************/
 842:../../../mod/valve/valve.c **** VALVE_STATE valve_get_fuel_valve_state
 843:../../../mod/valve/valve.c **** 	(
 844:../../../mod/valve/valve.c **** 	void
 845:../../../mod/valve/valve.c **** 	)
 846:../../../mod/valve/valve.c **** {
 847:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( PHOTOGATE_GPIO_PORT, FUEL_PHOTOGATE_PIN ) == PHOTOGATE_STATE_LOW )
 848:../../../mod/valve/valve.c **** 	{
 849:../../../mod/valve/valve.c **** 	return VALVE_OPEN;
 850:../../../mod/valve/valve.c **** 	}
 851:../../../mod/valve/valve.c **** else
 852:../../../mod/valve/valve.c **** 	{
 853:../../../mod/valve/valve.c **** 	return VALVE_CLOSED;
 854:../../../mod/valve/valve.c **** 	}
 855:../../../mod/valve/valve.c **** } /* valve_get_main_valve_state */
 856:../../../mod/valve/valve.c **** 
 857:../../../mod/valve/valve.c **** 
 858:../../../mod/valve/valve.c **** /*******************************************************************************
 859:../../../mod/valve/valve.c **** *                                                                              *
 860:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 861:../../../mod/valve/valve.c **** * 		valve_calibrate_valves                                                 *
 862:../../../mod/valve/valve.c **** *                                                                              *
 863:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 864:../../../mod/valve/valve.c **** *       Calibrate initial valve positions                                      *
 865:../../../mod/valve/valve.c **** *                                                                              *
 866:../../../mod/valve/valve.c **** *******************************************************************************/
 867:../../../mod/valve/valve.c **** VALVE_STATUS valve_calibrate_valves
 868:../../../mod/valve/valve.c **** 	(
 869:../../../mod/valve/valve.c **** 	void
 870:../../../mod/valve/valve.c **** 	)
 871:../../../mod/valve/valve.c **** {
 872:../../../mod/valve/valve.c **** /* Calibrate the oxidizer valve  */
 873:../../../mod/valve/valve.c **** lox_driver_enable();
 874:../../../mod/valve/valve.c **** lox_driver_set_direction( STEPPER_DRIVER_CW );
 875:../../../mod/valve/valve.c **** while ( valve_get_ox_valve_state() == VALVE_OPEN )
 876:../../../mod/valve/valve.c **** 	{
 877:../../../mod/valve/valve.c **** 	HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 878:../../../mod/valve/valve.c **** 	}
 879:../../../mod/valve/valve.c **** 
 880:../../../mod/valve/valve.c **** HAL_Delay( 5 );
 881:../../../mod/valve/valve.c **** HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 882:../../../mod/valve/valve.c **** lox_valve_pos = 0;
 883:../../../mod/valve/valve.c **** 
 884:../../../mod/valve/valve.c **** /* Calibrate the fuel valve      */
 885:../../../mod/valve/valve.c **** fuel_driver_enable();
 886:../../../mod/valve/valve.c **** fuel_driver_set_direction( STEPPER_DRIVER_CCW );
 887:../../../mod/valve/valve.c **** while ( valve_get_fuel_valve_state() == VALVE_OPEN )
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 17


 888:../../../mod/valve/valve.c **** 	{
 889:../../../mod/valve/valve.c **** 	HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 890:../../../mod/valve/valve.c **** 	}
 891:../../../mod/valve/valve.c **** HAL_Delay( 5 );
 892:../../../mod/valve/valve.c **** HAL_TIM_PWM_Stop( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 893:../../../mod/valve/valve.c **** fuel_valve_pos = 0;
 894:../../../mod/valve/valve.c **** 
 895:../../../mod/valve/valve.c **** return VALVE_OK;
 896:../../../mod/valve/valve.c **** } /* valve_calibrate_valves */
 897:../../../mod/valve/valve.c **** #endif /* #ifdef VALVE_CONTROLLER */
 898:../../../mod/valve/valve.c **** 
 899:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 900:../../../mod/valve/valve.c ****  Interrupt Service Routines 
 901:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
 902:../../../mod/valve/valve.c **** 
 903:../../../mod/valve/valve.c **** #ifdef VALVE_CONTROLLER
 904:../../../mod/valve/valve.c **** /*******************************************************************************
 905:../../../mod/valve/valve.c **** *                                                                              *
 906:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 907:../../../mod/valve/valve.c **** * 		lox_channelA_ISR                                                       *
 908:../../../mod/valve/valve.c **** *                                                                              *
 909:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 910:../../../mod/valve/valve.c **** *       LOX Main Valve Encoder Channel A Interrupt                             *
 911:../../../mod/valve/valve.c **** *                                                                              *
 912:../../../mod/valve/valve.c **** *******************************************************************************/
 913:../../../mod/valve/valve.c **** void lox_channelA_ISR
 914:../../../mod/valve/valve.c **** 	(
 915:../../../mod/valve/valve.c **** 	void
 916:../../../mod/valve/valve.c **** 	)
 917:../../../mod/valve/valve.c **** {
 918:../../../mod/valve/valve.c **** /* Low to High Transition */
 919:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( LOX_ENC_GPIO_PORT, LOX_ENC_A_PIN ) )
 920:../../../mod/valve/valve.c **** 	{
 921:../../../mod/valve/valve.c **** 	lox_channelA_state = ENCODER_HIGH;
 922:../../../mod/valve/valve.c **** 	if ( !lox_channelB_state )
 923:../../../mod/valve/valve.c **** 		{
 924:../../../mod/valve/valve.c **** 		//lox_valve_pos -= 1;
 925:../../../mod/valve/valve.c **** 		dec_lox_encoder();
 926:../../../mod/valve/valve.c **** 
 927:../../../mod/valve/valve.c **** 		/* Detect valve closed position */
 928:../../../mod/valve/valve.c **** 		if ( ox_valve_closing && ( lox_valve_pos == VALVE_CLOSED_POS ) )
 929:../../../mod/valve/valve.c **** 			{
 930:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 931:../../../mod/valve/valve.c **** 			ox_valve_closing = false;
 932:../../../mod/valve/valve.c **** 			}
 933:../../../mod/valve/valve.c **** 		/*
 934:../../../mod/valve/valve.c **** 		if ( ox_valve_closing && ( valve_get_ox_valve_state() == VALVE_CLOSED ) )
 935:../../../mod/valve/valve.c **** 			{
 936:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 937:../../../mod/valve/valve.c **** 			ox_valve_closing = false;
 938:../../../mod/valve/valve.c **** 			lox_valve_pos = 0;
 939:../../../mod/valve/valve.c **** 			}
 940:../../../mod/valve/valve.c **** 		*/
 941:../../../mod/valve/valve.c **** 		}
 942:../../../mod/valve/valve.c **** 	}
 943:../../../mod/valve/valve.c **** /* High to Low Transition */
 944:../../../mod/valve/valve.c **** else
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 18


 945:../../../mod/valve/valve.c **** 	{
 946:../../../mod/valve/valve.c **** 	lox_channelA_state = ENCODER_LOW;
 947:../../../mod/valve/valve.c **** 	}
 948:../../../mod/valve/valve.c **** } /* lox_channelA_ISR */
 949:../../../mod/valve/valve.c **** 
 950:../../../mod/valve/valve.c **** 
 951:../../../mod/valve/valve.c **** /*******************************************************************************
 952:../../../mod/valve/valve.c **** *                                                                              *
 953:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
 954:../../../mod/valve/valve.c **** * 		lox_channelB_ISR                                                       *
 955:../../../mod/valve/valve.c **** *                                                                              *
 956:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
 957:../../../mod/valve/valve.c **** *       LOX Main Valve Encoder Channel B Interrupt                             *
 958:../../../mod/valve/valve.c **** *                                                                              *
 959:../../../mod/valve/valve.c **** *******************************************************************************/
 960:../../../mod/valve/valve.c **** void lox_channelB_ISR
 961:../../../mod/valve/valve.c **** 	(
 962:../../../mod/valve/valve.c **** 	void
 963:../../../mod/valve/valve.c **** 	)
 964:../../../mod/valve/valve.c **** {
 965:../../../mod/valve/valve.c **** /* Low to High Transition */
 966:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( LOX_ENC_GPIO_PORT, LOX_ENC_B_PIN ) )
 967:../../../mod/valve/valve.c **** 	{
 968:../../../mod/valve/valve.c **** 	lox_channelB_state = ENCODER_HIGH;
 969:../../../mod/valve/valve.c **** 	if ( !lox_channelA_state )
 970:../../../mod/valve/valve.c **** 		{
 971:../../../mod/valve/valve.c **** 		//lox_valve_pos += 1;
 972:../../../mod/valve/valve.c **** 		inc_lox_encoder();
 973:../../../mod/valve/valve.c **** 
 974:../../../mod/valve/valve.c **** 		/* Detect valve open */
 975:../../../mod/valve/valve.c **** 		if ( ox_valve_opening && ( lox_valve_pos == VALVE_OPEN_POS ) )
 976:../../../mod/valve/valve.c **** 			{
 977:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 978:../../../mod/valve/valve.c **** 			ox_valve_opening = false;
 979:../../../mod/valve/valve.c **** 			}
 980:../../../mod/valve/valve.c **** 		/* Detect valve cracked */
 981:../../../mod/valve/valve.c **** 		else if ( ox_valve_cracking && ( lox_valve_pos == VALVE_CRACKED_POS ) )
 982:../../../mod/valve/valve.c **** 			{
 983:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL  );
 984:../../../mod/valve/valve.c **** 			ox_valve_cracking = false;
 985:../../../mod/valve/valve.c **** 			}
 986:../../../mod/valve/valve.c **** 		}
 987:../../../mod/valve/valve.c **** 	}
 988:../../../mod/valve/valve.c **** /* High to Low Transition */
 989:../../../mod/valve/valve.c **** else
 990:../../../mod/valve/valve.c **** 	{
 991:../../../mod/valve/valve.c **** 	lox_channelB_state = ENCODER_LOW;
 992:../../../mod/valve/valve.c **** 	}
 993:../../../mod/valve/valve.c **** 
 994:../../../mod/valve/valve.c **** } /* lox_channelB_ISR */
 995:../../../mod/valve/valve.c **** 
 996:../../../mod/valve/valve.c **** 
 997:../../../mod/valve/valve.c **** /*******************************************************************************
 998:../../../mod/valve/valve.c **** *                                                                              *
 999:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1000:../../../mod/valve/valve.c **** * 		fuel_channelA_ISR                                                      *
1001:../../../mod/valve/valve.c **** *                                                                              *
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 19


1002:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1003:../../../mod/valve/valve.c **** *       Fuel Main Valve Encoder Channel A Interrupt                            *
1004:../../../mod/valve/valve.c **** *                                                                              *
1005:../../../mod/valve/valve.c **** *******************************************************************************/
1006:../../../mod/valve/valve.c **** void fuel_channelA_ISR
1007:../../../mod/valve/valve.c **** 	(
1008:../../../mod/valve/valve.c **** 	void
1009:../../../mod/valve/valve.c **** 	)
1010:../../../mod/valve/valve.c **** {
1011:../../../mod/valve/valve.c **** /* Low to High Transition */
1012:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( KER_ENC_GPIO_PORT, KER_ENC_A_PIN ) )
1013:../../../mod/valve/valve.c **** 	{
1014:../../../mod/valve/valve.c **** 	fuel_channelA_state = ENCODER_HIGH;
1015:../../../mod/valve/valve.c **** 	if ( !fuel_channelB_state )
1016:../../../mod/valve/valve.c **** 		{
1017:../../../mod/valve/valve.c **** 		//fuel_valve_pos -= 1;
1018:../../../mod/valve/valve.c **** 		dec_fuel_encoder();
1019:../../../mod/valve/valve.c **** 
1020:../../../mod/valve/valve.c **** 		/* Detect valve closed */
1021:../../../mod/valve/valve.c **** 		if ( fuel_valve_closing && ( fuel_valve_pos == VALVE_CLOSED_POS ) )
1022:../../../mod/valve/valve.c **** 			{
1023:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
1024:../../../mod/valve/valve.c **** 			fuel_valve_closing = false;
1025:../../../mod/valve/valve.c **** 			}
1026:../../../mod/valve/valve.c **** 		}
1027:../../../mod/valve/valve.c **** 	}
1028:../../../mod/valve/valve.c **** /* High to Low Transition */
1029:../../../mod/valve/valve.c **** else
1030:../../../mod/valve/valve.c **** 	{
1031:../../../mod/valve/valve.c **** 	fuel_channelA_state = ENCODER_LOW;
1032:../../../mod/valve/valve.c **** 	}
1033:../../../mod/valve/valve.c **** } /* fuel_channelA_ISR */
1034:../../../mod/valve/valve.c **** 
1035:../../../mod/valve/valve.c **** 
1036:../../../mod/valve/valve.c **** /*******************************************************************************
1037:../../../mod/valve/valve.c **** *                                                                              *
1038:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1039:../../../mod/valve/valve.c **** * 		fuel_channelB_ISR                                                      *
1040:../../../mod/valve/valve.c **** *                                                                              *
1041:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1042:../../../mod/valve/valve.c **** *       Fuel Main Valve Encoder Channel B Interrupt                            *
1043:../../../mod/valve/valve.c **** *                                                                              *
1044:../../../mod/valve/valve.c **** *******************************************************************************/
1045:../../../mod/valve/valve.c **** void fuel_channelB_ISR
1046:../../../mod/valve/valve.c **** 	(
1047:../../../mod/valve/valve.c **** 	void
1048:../../../mod/valve/valve.c **** 	)
1049:../../../mod/valve/valve.c **** {
1050:../../../mod/valve/valve.c **** /* Low to High Transition */
1051:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( KER_ENC_GPIO_PORT, KER_ENC_B_PIN ) )
1052:../../../mod/valve/valve.c **** 	{
1053:../../../mod/valve/valve.c **** 	fuel_channelB_state = ENCODER_HIGH;
1054:../../../mod/valve/valve.c **** 	if ( !fuel_channelA_state )
1055:../../../mod/valve/valve.c **** 		{
1056:../../../mod/valve/valve.c **** 		//fuel_valve_pos += 1;
1057:../../../mod/valve/valve.c **** 		inc_fuel_encoder();
1058:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 20


1059:../../../mod/valve/valve.c **** 		/* Detect valve open */
1060:../../../mod/valve/valve.c **** 		if      ( fuel_valve_opening && ( fuel_valve_pos == VALVE_OPEN_POS ) )
1061:../../../mod/valve/valve.c **** 			{
1062:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
1063:../../../mod/valve/valve.c **** 			fuel_valve_opening = false;
1064:../../../mod/valve/valve.c **** 			}
1065:../../../mod/valve/valve.c **** 		/* Detect valve crakced */
1066:../../../mod/valve/valve.c **** 		else if ( fuel_valve_cracking && ( fuel_valve_pos == VALVE_CRACKED_POS ) )
1067:../../../mod/valve/valve.c **** 			{
1068:../../../mod/valve/valve.c **** 			HAL_TIM_PWM_Stop( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
1069:../../../mod/valve/valve.c **** 			fuel_valve_cracking = false;
1070:../../../mod/valve/valve.c **** 			}
1071:../../../mod/valve/valve.c **** 		}
1072:../../../mod/valve/valve.c **** 	}
1073:../../../mod/valve/valve.c **** /* High to Low Transition */
1074:../../../mod/valve/valve.c **** else
1075:../../../mod/valve/valve.c **** 	{
1076:../../../mod/valve/valve.c **** 	fuel_channelB_state = ENCODER_LOW;
1077:../../../mod/valve/valve.c **** 	}
1078:../../../mod/valve/valve.c **** 
1079:../../../mod/valve/valve.c **** } /* fuel_channelB_ISR */
1080:../../../mod/valve/valve.c **** 
1081:../../../mod/valve/valve.c **** 
1082:../../../mod/valve/valve.c **** /*******************************************************************************
1083:../../../mod/valve/valve.c **** *                                                                              *
1084:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1085:../../../mod/valve/valve.c **** * 		lox_driver_enable                                                      *
1086:../../../mod/valve/valve.c **** *                                                                              *
1087:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1088:../../../mod/valve/valve.c **** *       Enable the lox stepper motor driver                                    *
1089:../../../mod/valve/valve.c **** *                                                                              *
1090:../../../mod/valve/valve.c **** *******************************************************************************/
1091:../../../mod/valve/valve.c **** static void lox_driver_enable
1092:../../../mod/valve/valve.c **** 	(
1093:../../../mod/valve/valve.c **** 	void
1094:../../../mod/valve/valve.c **** 	)
1095:../../../mod/valve/valve.c **** {
1096:../../../mod/valve/valve.c **** /* Set GPIO State      */
1097:../../../mod/valve/valve.c **** HAL_GPIO_WritePin( LOX_EN_GPIO_PORT, LOX_EN_PIN, GPIO_PIN_SET );
1098:../../../mod/valve/valve.c **** 
1099:../../../mod/valve/valve.c **** /* Update global state */
1100:../../../mod/valve/valve.c **** lox_driver_state.enable = STEPPER_DRIVER_ENABLED;
1101:../../../mod/valve/valve.c **** 
1102:../../../mod/valve/valve.c **** } /* lox_driver_enable */
1103:../../../mod/valve/valve.c **** 
1104:../../../mod/valve/valve.c **** 
1105:../../../mod/valve/valve.c **** /*******************************************************************************
1106:../../../mod/valve/valve.c **** *                                                                              *
1107:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1108:../../../mod/valve/valve.c **** * 		fuel_driver_enable                                                     *
1109:../../../mod/valve/valve.c **** *                                                                              *
1110:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1111:../../../mod/valve/valve.c **** *       Enable the fuel stepper motor driver                                   *
1112:../../../mod/valve/valve.c **** *                                                                              *
1113:../../../mod/valve/valve.c **** *******************************************************************************/
1114:../../../mod/valve/valve.c **** static void fuel_driver_enable
1115:../../../mod/valve/valve.c **** 	(
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 21


1116:../../../mod/valve/valve.c **** 	void
1117:../../../mod/valve/valve.c **** 	)
1118:../../../mod/valve/valve.c **** {
1119:../../../mod/valve/valve.c **** /* Set GPIO level           */
1120:../../../mod/valve/valve.c **** HAL_GPIO_WritePin( KER_EN_GPIO_PORT, KER_EN_PIN, GPIO_PIN_RESET );
1121:../../../mod/valve/valve.c **** 
1122:../../../mod/valve/valve.c **** /* Update the globale state */
1123:../../../mod/valve/valve.c **** fuel_driver_state.enable = STEPPER_DRIVER_ENABLED;
1124:../../../mod/valve/valve.c **** 
1125:../../../mod/valve/valve.c **** } /* fuel_driver_enable */
1126:../../../mod/valve/valve.c **** 
1127:../../../mod/valve/valve.c **** 
1128:../../../mod/valve/valve.c **** /*******************************************************************************
1129:../../../mod/valve/valve.c **** *                                                                              *
1130:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1131:../../../mod/valve/valve.c **** * 		lox_driver_disable                                                     *
1132:../../../mod/valve/valve.c **** *                                                                              *
1133:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1134:../../../mod/valve/valve.c **** *       Disable the lox stepper motor driver                                   *
1135:../../../mod/valve/valve.c **** *                                                                              *
1136:../../../mod/valve/valve.c **** *******************************************************************************/
1137:../../../mod/valve/valve.c **** static void lox_driver_disable
1138:../../../mod/valve/valve.c **** 	(
1139:../../../mod/valve/valve.c **** 	void
1140:../../../mod/valve/valve.c **** 	)
1141:../../../mod/valve/valve.c **** {
1142:../../../mod/valve/valve.c **** /* Set GPIO Level          */
1143:../../../mod/valve/valve.c **** HAL_GPIO_WritePin( LOX_EN_GPIO_PORT, LOX_EN_PIN, GPIO_PIN_SET );
1144:../../../mod/valve/valve.c **** 
1145:../../../mod/valve/valve.c **** /* Update the global state */
1146:../../../mod/valve/valve.c **** lox_driver_state.enable = STEPPER_DRIVER_DISABLED;
1147:../../../mod/valve/valve.c **** 
1148:../../../mod/valve/valve.c **** } /* lox_driver_disable */
1149:../../../mod/valve/valve.c **** 
1150:../../../mod/valve/valve.c **** 
1151:../../../mod/valve/valve.c **** /*******************************************************************************
1152:../../../mod/valve/valve.c **** *                                                                              *
1153:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1154:../../../mod/valve/valve.c **** * 		fuel_driver_disable                                                    *
1155:../../../mod/valve/valve.c **** *                                                                              *
1156:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1157:../../../mod/valve/valve.c **** *       Disable the fuel stepper motor driver                                  *
1158:../../../mod/valve/valve.c **** *                                                                              *
1159:../../../mod/valve/valve.c **** *******************************************************************************/
1160:../../../mod/valve/valve.c **** static void fuel_driver_disable
1161:../../../mod/valve/valve.c **** 	(
1162:../../../mod/valve/valve.c **** 	void
1163:../../../mod/valve/valve.c **** 	)
1164:../../../mod/valve/valve.c **** {
1165:../../../mod/valve/valve.c **** /* Set GPIO level          */
1166:../../../mod/valve/valve.c **** HAL_GPIO_WritePin( KER_EN_GPIO_PORT, KER_EN_PIN, GPIO_PIN_SET );
1167:../../../mod/valve/valve.c **** 
1168:../../../mod/valve/valve.c **** /* Update the global state */
1169:../../../mod/valve/valve.c **** fuel_driver_state.enable = STEPPER_DRIVER_DISABLED;
1170:../../../mod/valve/valve.c **** 
1171:../../../mod/valve/valve.c **** } /* fuel_driver_disable */
1172:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 22


1173:../../../mod/valve/valve.c **** 
1174:../../../mod/valve/valve.c **** /*******************************************************************************
1175:../../../mod/valve/valve.c **** *                                                                              *
1176:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1177:../../../mod/valve/valve.c **** * 		lox_driver_set_direction                                               *
1178:../../../mod/valve/valve.c **** *                                                                              *
1179:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1180:../../../mod/valve/valve.c **** *       Set the lox stepper motor direction                                    *
1181:../../../mod/valve/valve.c **** *                                                                              *
1182:../../../mod/valve/valve.c **** *******************************************************************************/
1183:../../../mod/valve/valve.c **** static VALVE_STATUS lox_driver_set_direction
1184:../../../mod/valve/valve.c **** 	(
1185:../../../mod/valve/valve.c **** 	STEPPER_DRIVER_DIR_STATE direction
1186:../../../mod/valve/valve.c **** 	)
1187:../../../mod/valve/valve.c **** {
1188:../../../mod/valve/valve.c **** /* Set the GPIO level      */
1189:../../../mod/valve/valve.c **** if      ( direction == STEPPER_DRIVER_CW  )
1190:../../../mod/valve/valve.c **** 	{
1191:../../../mod/valve/valve.c **** 	HAL_GPIO_WritePin( LOX_DIR_GPIO_PORT, LOX_DIR_PIN, GPIO_PIN_RESET );
1192:../../../mod/valve/valve.c **** 	}
1193:../../../mod/valve/valve.c **** else if ( direction == STEPPER_DRIVER_CCW )
1194:../../../mod/valve/valve.c **** 	{
1195:../../../mod/valve/valve.c **** 	HAL_GPIO_WritePin( LOX_DIR_GPIO_PORT, LOX_DIR_PIN, GPIO_PIN_SET );
1196:../../../mod/valve/valve.c **** 	}
1197:../../../mod/valve/valve.c **** else
1198:../../../mod/valve/valve.c **** 	{
1199:../../../mod/valve/valve.c **** 	/* Invalid direction */
1200:../../../mod/valve/valve.c **** 	return VALVE_INVALID_DIR;
1201:../../../mod/valve/valve.c **** 	}
1202:../../../mod/valve/valve.c **** 
1203:../../../mod/valve/valve.c **** /* Update the global state */
1204:../../../mod/valve/valve.c **** lox_driver_state.direction = direction;
1205:../../../mod/valve/valve.c **** return VALVE_OK;
1206:../../../mod/valve/valve.c **** } /* lox_driver_set_direction */
1207:../../../mod/valve/valve.c **** 
1208:../../../mod/valve/valve.c **** 
1209:../../../mod/valve/valve.c **** /*******************************************************************************
1210:../../../mod/valve/valve.c **** *                                                                              *
1211:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1212:../../../mod/valve/valve.c **** * 		fuel_driver_set_direction                                              *
1213:../../../mod/valve/valve.c **** *                                                                              *
1214:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1215:../../../mod/valve/valve.c **** *       Set the fuel stepper motor direction                                   *
1216:../../../mod/valve/valve.c **** *                                                                              *
1217:../../../mod/valve/valve.c **** *******************************************************************************/
1218:../../../mod/valve/valve.c **** static VALVE_STATUS fuel_driver_set_direction
1219:../../../mod/valve/valve.c **** 	(
1220:../../../mod/valve/valve.c **** 	STEPPER_DRIVER_DIR_STATE direction
1221:../../../mod/valve/valve.c **** 	)
1222:../../../mod/valve/valve.c **** {
1223:../../../mod/valve/valve.c **** /* Set the GPIO level      */
1224:../../../mod/valve/valve.c **** if      ( direction == STEPPER_DRIVER_CW  )
1225:../../../mod/valve/valve.c **** 	{
1226:../../../mod/valve/valve.c **** 	HAL_GPIO_WritePin( KER_DIR_GPIO_PORT, KER_DIR_PIN, GPIO_PIN_RESET );
1227:../../../mod/valve/valve.c **** 	}
1228:../../../mod/valve/valve.c **** else if ( direction == STEPPER_DRIVER_CCW )
1229:../../../mod/valve/valve.c **** 	{
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 23


1230:../../../mod/valve/valve.c **** 	HAL_GPIO_WritePin( KER_DIR_GPIO_PORT, KER_DIR_PIN, GPIO_PIN_SET );
1231:../../../mod/valve/valve.c **** 	}
1232:../../../mod/valve/valve.c **** else
1233:../../../mod/valve/valve.c **** 	{
1234:../../../mod/valve/valve.c **** 	return VALVE_INVALID_DIR;
1235:../../../mod/valve/valve.c **** 	}
1236:../../../mod/valve/valve.c **** 
1237:../../../mod/valve/valve.c **** /* Update the global state */
1238:../../../mod/valve/valve.c **** fuel_driver_state.direction = direction;
1239:../../../mod/valve/valve.c **** return VALVE_OK;
1240:../../../mod/valve/valve.c **** } /* fuel_driver_set_direction */
1241:../../../mod/valve/valve.c **** 
1242:../../../mod/valve/valve.c **** 
1243:../../../mod/valve/valve.c **** /*******************************************************************************
1244:../../../mod/valve/valve.c **** *                                                                              *
1245:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1246:../../../mod/valve/valve.c **** * 		valve_get_valve_states                                                 *
1247:../../../mod/valve/valve.c **** *                                                                              *
1248:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1249:../../../mod/valve/valve.c **** *       Get the state of both main valves                                      *
1250:../../../mod/valve/valve.c **** *                                                                              *
1251:../../../mod/valve/valve.c **** *******************************************************************************/
1252:../../../mod/valve/valve.c **** MAIN_VALVE_STATES valve_get_valve_states
1253:../../../mod/valve/valve.c **** 	(
1254:../../../mod/valve/valve.c **** 	void
1255:../../../mod/valve/valve.c **** 	)
1256:../../../mod/valve/valve.c **** {
1257:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
1258:../../../mod/valve/valve.c ****  Local Variables
1259:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
1260:../../../mod/valve/valve.c **** MAIN_VALVE_STATES main_valve_states; /* Return valve        */
1261:../../../mod/valve/valve.c **** 
1262:../../../mod/valve/valve.c **** 
1263:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
1264:../../../mod/valve/valve.c ****  Initializations 
1265:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
1266:../../../mod/valve/valve.c **** main_valve_states = 0;
1267:../../../mod/valve/valve.c **** 
1268:../../../mod/valve/valve.c **** 
1269:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
1270:../../../mod/valve/valve.c ****  Implementation 
1271:../../../mod/valve/valve.c **** ------------------------------------------------------------------------------*/
1272:../../../mod/valve/valve.c **** 
1273:../../../mod/valve/valve.c **** /* Check the LOX valve  */
1274:../../../mod/valve/valve.c **** if ( valve_get_ox_valve_state() == VALVE_OPEN )
1275:../../../mod/valve/valve.c **** 	{
1276:../../../mod/valve/valve.c **** 	main_valve_states |= ( 1 << 7 );
1277:../../../mod/valve/valve.c **** 	}
1278:../../../mod/valve/valve.c **** 
1279:../../../mod/valve/valve.c **** /* Check the fuel valve */
1280:../../../mod/valve/valve.c **** if ( valve_get_fuel_valve_state() == VALVE_OPEN )
1281:../../../mod/valve/valve.c **** 	{
1282:../../../mod/valve/valve.c **** 	main_valve_states |= ( 1 << 6 );
1283:../../../mod/valve/valve.c **** 	}
1284:../../../mod/valve/valve.c **** 
1285:../../../mod/valve/valve.c **** return main_valve_states;
1286:../../../mod/valve/valve.c **** } /* valve_get_valve_states */
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 24


1287:../../../mod/valve/valve.c **** 
1288:../../../mod/valve/valve.c **** 
1289:../../../mod/valve/valve.c **** /*******************************************************************************
1290:../../../mod/valve/valve.c **** *                                                                              *
1291:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1292:../../../mod/valve/valve.c **** * 		inc_lox_encoder                                                        *
1293:../../../mod/valve/valve.c **** *                                                                              *
1294:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1295:../../../mod/valve/valve.c **** *       Increase the lox encoder count by one                                  *
1296:../../../mod/valve/valve.c **** *                                                                              *
1297:../../../mod/valve/valve.c **** *******************************************************************************/
1298:../../../mod/valve/valve.c **** static void inc_lox_encoder
1299:../../../mod/valve/valve.c **** 	(
1300:../../../mod/valve/valve.c **** 	void
1301:../../../mod/valve/valve.c **** 	)
1302:../../../mod/valve/valve.c **** {
  27              		.loc 1 1302 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
1303:../../../mod/valve/valve.c **** if ( lox_valve_pos == 999 )
  32              		.loc 1 1303 1 view .LVU1
  33              		.loc 1 1303 20 is_stmt 0 view .LVU2
  34 0000 074B     		ldr	r3, .L5
  35 0002 1A68     		ldr	r2, [r3]
  36              		.loc 1 1303 4 view .LVU3
  37 0004 40F2E733 		movw	r3, #999
  38 0008 9A42     		cmp	r2, r3
  39 000a 04D0     		beq	.L4
1304:../../../mod/valve/valve.c **** 	{
1305:../../../mod/valve/valve.c **** 	lox_valve_pos = 0;
1306:../../../mod/valve/valve.c **** 	}
1307:../../../mod/valve/valve.c **** else
1308:../../../mod/valve/valve.c **** 	{
1309:../../../mod/valve/valve.c **** 	lox_valve_pos += 1;
  40              		.loc 1 1309 2 is_stmt 1 view .LVU4
  41              		.loc 1 1309 16 is_stmt 0 view .LVU5
  42 000c 044A     		ldr	r2, .L5
  43 000e 1368     		ldr	r3, [r2]
  44 0010 0133     		adds	r3, r3, #1
  45 0012 1360     		str	r3, [r2]
1310:../../../mod/valve/valve.c **** 	}
1311:../../../mod/valve/valve.c **** } /* inc_lox_encoder */
  46              		.loc 1 1311 1 view .LVU6
  47 0014 7047     		bx	lr
  48              	.L4:
1305:../../../mod/valve/valve.c **** 	}
  49              		.loc 1 1305 2 is_stmt 1 view .LVU7
1305:../../../mod/valve/valve.c **** 	}
  50              		.loc 1 1305 16 is_stmt 0 view .LVU8
  51 0016 024B     		ldr	r3, .L5
  52 0018 0022     		movs	r2, #0
  53 001a 1A60     		str	r2, [r3]
  54 001c 7047     		bx	lr
  55              	.L6:
  56 001e 00BF     		.align	2
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 25


  57              	.L5:
  58 0020 00000000 		.word	lox_valve_pos
  59              		.cfi_endproc
  60              	.LFE171:
  62              		.section	.text.inc_fuel_encoder,"ax",%progbits
  63              		.align	1
  64              		.syntax unified
  65              		.thumb
  66              		.thumb_func
  68              	inc_fuel_encoder:
  69              	.LFB172:
1312:../../../mod/valve/valve.c **** 
1313:../../../mod/valve/valve.c **** 
1314:../../../mod/valve/valve.c **** /*******************************************************************************
1315:../../../mod/valve/valve.c **** *                                                                              *
1316:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1317:../../../mod/valve/valve.c **** * 		inc_fuel_encoder                                                       *
1318:../../../mod/valve/valve.c **** *                                                                              *
1319:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1320:../../../mod/valve/valve.c **** *       Increase the fuel encoder count by one                                 *
1321:../../../mod/valve/valve.c **** *                                                                              *
1322:../../../mod/valve/valve.c **** *******************************************************************************/
1323:../../../mod/valve/valve.c **** static void inc_fuel_encoder
1324:../../../mod/valve/valve.c **** 	(
1325:../../../mod/valve/valve.c **** 	void
1326:../../../mod/valve/valve.c **** 	)
1327:../../../mod/valve/valve.c **** {
  70              		.loc 1 1327 1 is_stmt 1 view -0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 0
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74              		@ link register save eliminated.
1328:../../../mod/valve/valve.c **** if ( fuel_valve_pos == 999 )
  75              		.loc 1 1328 1 view .LVU10
  76              		.loc 1 1328 21 is_stmt 0 view .LVU11
  77 0000 074B     		ldr	r3, .L11
  78 0002 1A68     		ldr	r2, [r3]
  79              		.loc 1 1328 4 view .LVU12
  80 0004 40F2E733 		movw	r3, #999
  81 0008 9A42     		cmp	r2, r3
  82 000a 04D0     		beq	.L10
1329:../../../mod/valve/valve.c **** 	{
1330:../../../mod/valve/valve.c **** 	fuel_valve_pos = 0;
1331:../../../mod/valve/valve.c **** 	}
1332:../../../mod/valve/valve.c **** else
1333:../../../mod/valve/valve.c **** 	{
1334:../../../mod/valve/valve.c **** 	fuel_valve_pos += 1;
  83              		.loc 1 1334 2 is_stmt 1 view .LVU13
  84              		.loc 1 1334 17 is_stmt 0 view .LVU14
  85 000c 044A     		ldr	r2, .L11
  86 000e 1368     		ldr	r3, [r2]
  87 0010 0133     		adds	r3, r3, #1
  88 0012 1360     		str	r3, [r2]
1335:../../../mod/valve/valve.c **** 	}
1336:../../../mod/valve/valve.c **** 
1337:../../../mod/valve/valve.c **** } /* inc_fuel_encoder */
  89              		.loc 1 1337 1 view .LVU15
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 26


  90 0014 7047     		bx	lr
  91              	.L10:
1330:../../../mod/valve/valve.c **** 	}
  92              		.loc 1 1330 2 is_stmt 1 view .LVU16
1330:../../../mod/valve/valve.c **** 	}
  93              		.loc 1 1330 17 is_stmt 0 view .LVU17
  94 0016 024B     		ldr	r3, .L11
  95 0018 0022     		movs	r2, #0
  96 001a 1A60     		str	r2, [r3]
  97 001c 7047     		bx	lr
  98              	.L12:
  99 001e 00BF     		.align	2
 100              	.L11:
 101 0020 00000000 		.word	fuel_valve_pos
 102              		.cfi_endproc
 103              	.LFE172:
 105              		.section	.text.dec_lox_encoder,"ax",%progbits
 106              		.align	1
 107              		.syntax unified
 108              		.thumb
 109              		.thumb_func
 111              	dec_lox_encoder:
 112              	.LFB173:
1338:../../../mod/valve/valve.c **** 
1339:../../../mod/valve/valve.c **** 
1340:../../../mod/valve/valve.c **** /*******************************************************************************
1341:../../../mod/valve/valve.c **** *                                                                              *
1342:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1343:../../../mod/valve/valve.c **** * 		dec_lox_encoder                                                        *
1344:../../../mod/valve/valve.c **** *                                                                              *
1345:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1346:../../../mod/valve/valve.c **** *       Decrease the lox encoder count by one                                  *
1347:../../../mod/valve/valve.c **** *                                                                              *
1348:../../../mod/valve/valve.c **** *******************************************************************************/
1349:../../../mod/valve/valve.c **** static void dec_lox_encoder
1350:../../../mod/valve/valve.c **** 	(
1351:../../../mod/valve/valve.c **** 	void
1352:../../../mod/valve/valve.c **** 	)
1353:../../../mod/valve/valve.c **** {
 113              		.loc 1 1353 1 is_stmt 1 view -0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 0
 116              		@ frame_needed = 0, uses_anonymous_args = 0
 117              		@ link register save eliminated.
1354:../../../mod/valve/valve.c **** if ( lox_valve_pos == 0 )
 118              		.loc 1 1354 1 view .LVU19
 119              		.loc 1 1354 20 is_stmt 0 view .LVU20
 120 0000 064B     		ldr	r3, .L16
 121 0002 1B68     		ldr	r3, [r3]
 122              		.loc 1 1354 4 view .LVU21
 123 0004 23B9     		cbnz	r3, .L14
1355:../../../mod/valve/valve.c **** 	{
1356:../../../mod/valve/valve.c **** 	lox_valve_pos = 999;
 124              		.loc 1 1356 2 is_stmt 1 view .LVU22
 125              		.loc 1 1356 16 is_stmt 0 view .LVU23
 126 0006 054B     		ldr	r3, .L16
 127 0008 40F2E732 		movw	r2, #999
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 27


 128 000c 1A60     		str	r2, [r3]
 129 000e 7047     		bx	lr
 130              	.L14:
1357:../../../mod/valve/valve.c **** 	}
1358:../../../mod/valve/valve.c **** else
1359:../../../mod/valve/valve.c **** 	{
1360:../../../mod/valve/valve.c **** 	lox_valve_pos -= 1;
 131              		.loc 1 1360 2 is_stmt 1 view .LVU24
 132              		.loc 1 1360 16 is_stmt 0 view .LVU25
 133 0010 024A     		ldr	r2, .L16
 134 0012 1368     		ldr	r3, [r2]
 135 0014 013B     		subs	r3, r3, #1
 136 0016 1360     		str	r3, [r2]
1361:../../../mod/valve/valve.c **** 	}
1362:../../../mod/valve/valve.c **** 
1363:../../../mod/valve/valve.c **** } /* dec_lox_encoder */
 137              		.loc 1 1363 1 view .LVU26
 138 0018 7047     		bx	lr
 139              	.L17:
 140 001a 00BF     		.align	2
 141              	.L16:
 142 001c 00000000 		.word	lox_valve_pos
 143              		.cfi_endproc
 144              	.LFE173:
 146              		.section	.text.dec_fuel_encoder,"ax",%progbits
 147              		.align	1
 148              		.syntax unified
 149              		.thumb
 150              		.thumb_func
 152              	dec_fuel_encoder:
 153              	.LFB174:
1364:../../../mod/valve/valve.c **** 
1365:../../../mod/valve/valve.c **** 
1366:../../../mod/valve/valve.c **** /*******************************************************************************
1367:../../../mod/valve/valve.c **** *                                                                              *
1368:../../../mod/valve/valve.c **** * PROCEDURE:                                                                   *
1369:../../../mod/valve/valve.c **** * 		dec_fuel_encoder                                                       *
1370:../../../mod/valve/valve.c **** *                                                                              *
1371:../../../mod/valve/valve.c **** * DESCRIPTION:                                                                 *
1372:../../../mod/valve/valve.c **** *       Decrease the fuel encoder count by one                                 *
1373:../../../mod/valve/valve.c **** *                                                                              *
1374:../../../mod/valve/valve.c **** *******************************************************************************/
1375:../../../mod/valve/valve.c **** static void dec_fuel_encoder
1376:../../../mod/valve/valve.c **** 	(
1377:../../../mod/valve/valve.c **** 	void
1378:../../../mod/valve/valve.c **** 	)
1379:../../../mod/valve/valve.c **** {
 154              		.loc 1 1379 1 is_stmt 1 view -0
 155              		.cfi_startproc
 156              		@ args = 0, pretend = 0, frame = 0
 157              		@ frame_needed = 0, uses_anonymous_args = 0
 158              		@ link register save eliminated.
1380:../../../mod/valve/valve.c **** if ( fuel_valve_pos == 0 )
 159              		.loc 1 1380 1 view .LVU28
 160              		.loc 1 1380 21 is_stmt 0 view .LVU29
 161 0000 064B     		ldr	r3, .L21
 162 0002 1B68     		ldr	r3, [r3]
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 28


 163              		.loc 1 1380 4 view .LVU30
 164 0004 23B9     		cbnz	r3, .L19
1381:../../../mod/valve/valve.c **** 	{
1382:../../../mod/valve/valve.c **** 	fuel_valve_pos = 999;
 165              		.loc 1 1382 2 is_stmt 1 view .LVU31
 166              		.loc 1 1382 17 is_stmt 0 view .LVU32
 167 0006 054B     		ldr	r3, .L21
 168 0008 40F2E732 		movw	r2, #999
 169 000c 1A60     		str	r2, [r3]
 170 000e 7047     		bx	lr
 171              	.L19:
1383:../../../mod/valve/valve.c **** 	}
1384:../../../mod/valve/valve.c **** else
1385:../../../mod/valve/valve.c **** 	{
1386:../../../mod/valve/valve.c **** 	fuel_valve_pos -= 1;
 172              		.loc 1 1386 2 is_stmt 1 view .LVU33
 173              		.loc 1 1386 17 is_stmt 0 view .LVU34
 174 0010 024A     		ldr	r2, .L21
 175 0012 1368     		ldr	r3, [r2]
 176 0014 013B     		subs	r3, r3, #1
 177 0016 1360     		str	r3, [r2]
1387:../../../mod/valve/valve.c **** 	}
1388:../../../mod/valve/valve.c **** 
1389:../../../mod/valve/valve.c **** } /* dec_fuel_encoder */
 178              		.loc 1 1389 1 view .LVU35
 179 0018 7047     		bx	lr
 180              	.L22:
 181 001a 00BF     		.align	2
 182              	.L21:
 183 001c 00000000 		.word	fuel_valve_pos
 184              		.cfi_endproc
 185              	.LFE174:
 187              		.section	.text.lox_driver_enable,"ax",%progbits
 188              		.align	1
 189              		.syntax unified
 190              		.thumb
 191              		.thumb_func
 193              	lox_driver_enable:
 194              	.LFB164:
1095:../../../mod/valve/valve.c **** /* Set GPIO State      */
 195              		.loc 1 1095 1 is_stmt 1 view -0
 196              		.cfi_startproc
 197              		@ args = 0, pretend = 0, frame = 0
 198              		@ frame_needed = 0, uses_anonymous_args = 0
 199 0000 08B5     		push	{r3, lr}
 200              	.LCFI0:
 201              		.cfi_def_cfa_offset 8
 202              		.cfi_offset 3, -8
 203              		.cfi_offset 14, -4
1097:../../../mod/valve/valve.c **** 
 204              		.loc 1 1097 1 view .LVU37
 205 0002 0122     		movs	r2, #1
 206 0004 4FF48071 		mov	r1, #256
 207 0008 0348     		ldr	r0, .L25
 208 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 209              	.LVL0:
1100:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 29


 210              		.loc 1 1100 1 view .LVU38
1100:../../../mod/valve/valve.c **** 
 211              		.loc 1 1100 25 is_stmt 0 view .LVU39
 212 000e 034B     		ldr	r3, .L25+4
 213 0010 0022     		movs	r2, #0
 214 0012 1A70     		strb	r2, [r3]
1102:../../../mod/valve/valve.c **** 
 215              		.loc 1 1102 1 view .LVU40
 216 0014 08BD     		pop	{r3, pc}
 217              	.L26:
 218 0016 00BF     		.align	2
 219              	.L25:
 220 0018 00000258 		.word	1476526080
 221 001c 00000000 		.word	lox_driver_state
 222              		.cfi_endproc
 223              	.LFE164:
 225              		.section	.text.fuel_driver_enable,"ax",%progbits
 226              		.align	1
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 231              	fuel_driver_enable:
 232              	.LFB165:
1118:../../../mod/valve/valve.c **** /* Set GPIO level           */
 233              		.loc 1 1118 1 is_stmt 1 view -0
 234              		.cfi_startproc
 235              		@ args = 0, pretend = 0, frame = 0
 236              		@ frame_needed = 0, uses_anonymous_args = 0
 237 0000 08B5     		push	{r3, lr}
 238              	.LCFI1:
 239              		.cfi_def_cfa_offset 8
 240              		.cfi_offset 3, -8
 241              		.cfi_offset 14, -4
1120:../../../mod/valve/valve.c **** 
 242              		.loc 1 1120 1 view .LVU42
 243 0002 0022     		movs	r2, #0
 244 0004 4FF40061 		mov	r1, #2048
 245 0008 0348     		ldr	r0, .L29
 246 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 247              	.LVL1:
1123:../../../mod/valve/valve.c **** 
 248              		.loc 1 1123 1 view .LVU43
1123:../../../mod/valve/valve.c **** 
 249              		.loc 1 1123 26 is_stmt 0 view .LVU44
 250 000e 034B     		ldr	r3, .L29+4
 251 0010 0022     		movs	r2, #0
 252 0012 1A70     		strb	r2, [r3]
1125:../../../mod/valve/valve.c **** 
 253              		.loc 1 1125 1 view .LVU45
 254 0014 08BD     		pop	{r3, pc}
 255              	.L30:
 256 0016 00BF     		.align	2
 257              	.L29:
 258 0018 00000258 		.word	1476526080
 259 001c 00000000 		.word	fuel_driver_state
 260              		.cfi_endproc
 261              	.LFE165:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 30


 263              		.section	.text.lox_driver_disable,"ax",%progbits
 264              		.align	1
 265              		.syntax unified
 266              		.thumb
 267              		.thumb_func
 269              	lox_driver_disable:
 270              	.LFB166:
1141:../../../mod/valve/valve.c **** /* Set GPIO Level          */
 271              		.loc 1 1141 1 is_stmt 1 view -0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275 0000 08B5     		push	{r3, lr}
 276              	.LCFI2:
 277              		.cfi_def_cfa_offset 8
 278              		.cfi_offset 3, -8
 279              		.cfi_offset 14, -4
1143:../../../mod/valve/valve.c **** 
 280              		.loc 1 1143 1 view .LVU47
 281 0002 0122     		movs	r2, #1
 282 0004 4FF48071 		mov	r1, #256
 283 0008 0348     		ldr	r0, .L33
 284 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 285              	.LVL2:
1146:../../../mod/valve/valve.c **** 
 286              		.loc 1 1146 1 view .LVU48
1146:../../../mod/valve/valve.c **** 
 287              		.loc 1 1146 25 is_stmt 0 view .LVU49
 288 000e 034B     		ldr	r3, .L33+4
 289 0010 0122     		movs	r2, #1
 290 0012 1A70     		strb	r2, [r3]
1148:../../../mod/valve/valve.c **** 
 291              		.loc 1 1148 1 view .LVU50
 292 0014 08BD     		pop	{r3, pc}
 293              	.L34:
 294 0016 00BF     		.align	2
 295              	.L33:
 296 0018 00000258 		.word	1476526080
 297 001c 00000000 		.word	lox_driver_state
 298              		.cfi_endproc
 299              	.LFE166:
 301              		.section	.text.fuel_driver_disable,"ax",%progbits
 302              		.align	1
 303              		.syntax unified
 304              		.thumb
 305              		.thumb_func
 307              	fuel_driver_disable:
 308              	.LFB167:
1164:../../../mod/valve/valve.c **** /* Set GPIO level          */
 309              		.loc 1 1164 1 is_stmt 1 view -0
 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 0
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 313 0000 08B5     		push	{r3, lr}
 314              	.LCFI3:
 315              		.cfi_def_cfa_offset 8
 316              		.cfi_offset 3, -8
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 31


 317              		.cfi_offset 14, -4
1166:../../../mod/valve/valve.c **** 
 318              		.loc 1 1166 1 view .LVU52
 319 0002 0122     		movs	r2, #1
 320 0004 4FF40061 		mov	r1, #2048
 321 0008 0348     		ldr	r0, .L37
 322 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 323              	.LVL3:
1169:../../../mod/valve/valve.c **** 
 324              		.loc 1 1169 1 view .LVU53
1169:../../../mod/valve/valve.c **** 
 325              		.loc 1 1169 26 is_stmt 0 view .LVU54
 326 000e 034B     		ldr	r3, .L37+4
 327 0010 0122     		movs	r2, #1
 328 0012 1A70     		strb	r2, [r3]
1171:../../../mod/valve/valve.c **** 
 329              		.loc 1 1171 1 view .LVU55
 330 0014 08BD     		pop	{r3, pc}
 331              	.L38:
 332 0016 00BF     		.align	2
 333              	.L37:
 334 0018 00000258 		.word	1476526080
 335 001c 00000000 		.word	fuel_driver_state
 336              		.cfi_endproc
 337              	.LFE167:
 339              		.section	.text.lox_driver_set_direction,"ax",%progbits
 340              		.align	1
 341              		.syntax unified
 342              		.thumb
 343              		.thumb_func
 345              	lox_driver_set_direction:
 346              	.LVL4:
 347              	.LFB168:
1187:../../../mod/valve/valve.c **** /* Set the GPIO level      */
 348              		.loc 1 1187 1 is_stmt 1 view -0
 349              		.cfi_startproc
 350              		@ args = 0, pretend = 0, frame = 0
 351              		@ frame_needed = 0, uses_anonymous_args = 0
1187:../../../mod/valve/valve.c **** /* Set the GPIO level      */
 352              		.loc 1 1187 1 is_stmt 0 view .LVU57
 353 0000 10B5     		push	{r4, lr}
 354              	.LCFI4:
 355              		.cfi_def_cfa_offset 8
 356              		.cfi_offset 4, -8
 357              		.cfi_offset 14, -4
 358 0002 0446     		mov	r4, r0
1189:../../../mod/valve/valve.c **** 	{
 359              		.loc 1 1189 1 is_stmt 1 view .LVU58
1189:../../../mod/valve/valve.c **** 	{
 360              		.loc 1 1189 9 is_stmt 0 view .LVU59
 361 0004 0128     		cmp	r0, #1
 362 0006 02D0     		beq	.L45
1193:../../../mod/valve/valve.c **** 	{
 363              		.loc 1 1193 6 is_stmt 1 view .LVU60
1193:../../../mod/valve/valve.c **** 	{
 364              		.loc 1 1193 9 is_stmt 0 view .LVU61
 365 0008 40B1     		cbz	r0, .L46
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 32


1200:../../../mod/valve/valve.c **** 	}
 366              		.loc 1 1200 9 view .LVU62
 367 000a 0120     		movs	r0, #1
 368              	.LVL5:
1200:../../../mod/valve/valve.c **** 	}
 369              		.loc 1 1200 9 view .LVU63
 370 000c 0FE0     		b	.L42
 371              	.LVL6:
 372              	.L45:
1191:../../../mod/valve/valve.c **** 	}
 373              		.loc 1 1191 2 is_stmt 1 view .LVU64
 374 000e 0022     		movs	r2, #0
 375 0010 4FF48051 		mov	r1, #4096
 376 0014 0648     		ldr	r0, .L47
 377              	.LVL7:
1191:../../../mod/valve/valve.c **** 	}
 378              		.loc 1 1191 2 is_stmt 0 view .LVU65
 379 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
 380              	.LVL8:
 381 001a 05E0     		b	.L41
 382              	.LVL9:
 383              	.L46:
1195:../../../mod/valve/valve.c **** 	}
 384              		.loc 1 1195 2 is_stmt 1 view .LVU66
 385 001c 0122     		movs	r2, #1
 386 001e 4FF48051 		mov	r1, #4096
 387 0022 0348     		ldr	r0, .L47
 388              	.LVL10:
1195:../../../mod/valve/valve.c **** 	}
 389              		.loc 1 1195 2 is_stmt 0 view .LVU67
 390 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 391              	.LVL11:
 392              	.L41:
1204:../../../mod/valve/valve.c **** return VALVE_OK;
 393              		.loc 1 1204 1 is_stmt 1 view .LVU68
1204:../../../mod/valve/valve.c **** return VALVE_OK;
 394              		.loc 1 1204 28 is_stmt 0 view .LVU69
 395 0028 024B     		ldr	r3, .L47+4
 396 002a 5C70     		strb	r4, [r3, #1]
1205:../../../mod/valve/valve.c **** } /* lox_driver_set_direction */
 397              		.loc 1 1205 1 is_stmt 1 view .LVU70
1205:../../../mod/valve/valve.c **** } /* lox_driver_set_direction */
 398              		.loc 1 1205 8 is_stmt 0 view .LVU71
 399 002c 0020     		movs	r0, #0
 400              	.L42:
1206:../../../mod/valve/valve.c **** 
 401              		.loc 1 1206 1 view .LVU72
 402 002e 10BD     		pop	{r4, pc}
 403              	.LVL12:
 404              	.L48:
1206:../../../mod/valve/valve.c **** 
 405              		.loc 1 1206 1 view .LVU73
 406              		.align	2
 407              	.L47:
 408 0030 00000258 		.word	1476526080
 409 0034 00000000 		.word	lox_driver_state
 410              		.cfi_endproc
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 33


 411              	.LFE168:
 413              		.section	.text.fuel_driver_set_direction,"ax",%progbits
 414              		.align	1
 415              		.syntax unified
 416              		.thumb
 417              		.thumb_func
 419              	fuel_driver_set_direction:
 420              	.LVL13:
 421              	.LFB169:
1222:../../../mod/valve/valve.c **** /* Set the GPIO level      */
 422              		.loc 1 1222 1 is_stmt 1 view -0
 423              		.cfi_startproc
 424              		@ args = 0, pretend = 0, frame = 0
 425              		@ frame_needed = 0, uses_anonymous_args = 0
1222:../../../mod/valve/valve.c **** /* Set the GPIO level      */
 426              		.loc 1 1222 1 is_stmt 0 view .LVU75
 427 0000 10B5     		push	{r4, lr}
 428              	.LCFI5:
 429              		.cfi_def_cfa_offset 8
 430              		.cfi_offset 4, -8
 431              		.cfi_offset 14, -4
 432 0002 0446     		mov	r4, r0
1224:../../../mod/valve/valve.c **** 	{
 433              		.loc 1 1224 1 is_stmt 1 view .LVU76
1224:../../../mod/valve/valve.c **** 	{
 434              		.loc 1 1224 9 is_stmt 0 view .LVU77
 435 0004 0128     		cmp	r0, #1
 436 0006 02D0     		beq	.L55
1228:../../../mod/valve/valve.c **** 	{
 437              		.loc 1 1228 6 is_stmt 1 view .LVU78
1228:../../../mod/valve/valve.c **** 	{
 438              		.loc 1 1228 9 is_stmt 0 view .LVU79
 439 0008 38B1     		cbz	r0, .L56
1234:../../../mod/valve/valve.c **** 	}
 440              		.loc 1 1234 9 view .LVU80
 441 000a 0120     		movs	r0, #1
 442              	.LVL14:
1234:../../../mod/valve/valve.c **** 	}
 443              		.loc 1 1234 9 view .LVU81
 444 000c 0DE0     		b	.L52
 445              	.LVL15:
 446              	.L55:
1226:../../../mod/valve/valve.c **** 	}
 447              		.loc 1 1226 2 is_stmt 1 view .LVU82
 448 000e 0022     		movs	r2, #0
 449 0010 8021     		movs	r1, #128
 450 0012 0648     		ldr	r0, .L57
 451              	.LVL16:
1226:../../../mod/valve/valve.c **** 	}
 452              		.loc 1 1226 2 is_stmt 0 view .LVU83
 453 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 454              	.LVL17:
 455 0018 04E0     		b	.L51
 456              	.LVL18:
 457              	.L56:
1230:../../../mod/valve/valve.c **** 	}
 458              		.loc 1 1230 2 is_stmt 1 view .LVU84
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 34


 459 001a 0122     		movs	r2, #1
 460 001c 8021     		movs	r1, #128
 461 001e 0348     		ldr	r0, .L57
 462              	.LVL19:
1230:../../../mod/valve/valve.c **** 	}
 463              		.loc 1 1230 2 is_stmt 0 view .LVU85
 464 0020 FFF7FEFF 		bl	HAL_GPIO_WritePin
 465              	.LVL20:
 466              	.L51:
1238:../../../mod/valve/valve.c **** return VALVE_OK;
 467              		.loc 1 1238 1 is_stmt 1 view .LVU86
1238:../../../mod/valve/valve.c **** return VALVE_OK;
 468              		.loc 1 1238 29 is_stmt 0 view .LVU87
 469 0024 024B     		ldr	r3, .L57+4
 470 0026 5C70     		strb	r4, [r3, #1]
1239:../../../mod/valve/valve.c **** } /* fuel_driver_set_direction */
 471              		.loc 1 1239 1 is_stmt 1 view .LVU88
1239:../../../mod/valve/valve.c **** } /* fuel_driver_set_direction */
 472              		.loc 1 1239 8 is_stmt 0 view .LVU89
 473 0028 0020     		movs	r0, #0
 474              	.L52:
1240:../../../mod/valve/valve.c **** 
 475              		.loc 1 1240 1 view .LVU90
 476 002a 10BD     		pop	{r4, pc}
 477              	.LVL21:
 478              	.L58:
1240:../../../mod/valve/valve.c **** 
 479              		.loc 1 1240 1 view .LVU91
 480              		.align	2
 481              	.L57:
 482 002c 00080258 		.word	1476528128
 483 0030 00000000 		.word	fuel_driver_state
 484              		.cfi_endproc
 485              	.LFE169:
 487              		.section	.text.valve_transmit,"ax",%progbits
 488              		.align	1
 489              		.global	valve_transmit
 490              		.syntax unified
 491              		.thumb
 492              		.thumb_func
 494              	valve_transmit:
 495              	.LVL22:
 496              	.LFB145:
 325:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 497              		.loc 1 325 1 is_stmt 1 view -0
 498              		.cfi_startproc
 499              		@ args = 0, pretend = 0, frame = 0
 500              		@ frame_needed = 0, uses_anonymous_args = 0
 325:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 501              		.loc 1 325 1 is_stmt 0 view .LVU93
 502 0000 08B5     		push	{r3, lr}
 503              	.LCFI6:
 504              		.cfi_def_cfa_offset 8
 505              		.cfi_offset 3, -8
 506              		.cfi_offset 14, -4
 507 0002 1346     		mov	r3, r2
 329:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 35


 508              		.loc 1 329 1 is_stmt 1 view .LVU94
 335:../../../mod/valve/valve.c **** 
 509              		.loc 1 335 1 view .LVU95
 510              	.LVL23:
 343:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 511              		.loc 1 343 1 view .LVU96
 343:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 512              		.loc 1 343 14 is_stmt 0 view .LVU97
 513 0004 8AB2     		uxth	r2, r1
 514              	.LVL24:
 343:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 515              		.loc 1 343 14 view .LVU98
 516 0006 0146     		mov	r1, r0
 517              	.LVL25:
 343:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 518              		.loc 1 343 14 view .LVU99
 519 0008 0548     		ldr	r0, .L63
 520              	.LVL26:
 343:../../../mod/valve/valve.c ****                                 tx_data_ptr     , 
 521              		.loc 1 343 14 view .LVU100
 522 000a FFF7FEFF 		bl	HAL_UART_Transmit
 523              	.LVL27:
 349:../../../mod/valve/valve.c **** 	{
 524              		.loc 1 349 1 is_stmt 1 view .LVU101
 525 000e 0346     		mov	r3, r0
 526 0010 10B1     		cbz	r0, .L60
 527 0012 0328     		cmp	r0, #3
 528 0014 02D1     		bne	.L61
 529 0016 0423     		movs	r3, #4
 530              	.L60:
 365:../../../mod/valve/valve.c **** 
 531              		.loc 1 365 1 is_stmt 0 view .LVU102
 532 0018 1846     		mov	r0, r3
 533              	.LVL28:
 365:../../../mod/valve/valve.c **** 
 534              		.loc 1 365 1 view .LVU103
 535 001a 08BD     		pop	{r3, pc}
 536              	.LVL29:
 537              	.L61:
 361:../../../mod/valve/valve.c **** 		}
 538              		.loc 1 361 10 view .LVU104
 539 001c 0323     		movs	r3, #3
 540 001e FBE7     		b	.L60
 541              	.L64:
 542              		.align	2
 543              	.L63:
 544 0020 00000000 		.word	huart3
 545              		.cfi_endproc
 546              	.LFE145:
 548              		.section	.text.valve_receive,"ax",%progbits
 549              		.align	1
 550              		.global	valve_receive
 551              		.syntax unified
 552              		.thumb
 553              		.thumb_func
 555              	valve_receive:
 556              	.LVL30:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 36


 557              	.LFB146:
 383:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 558              		.loc 1 383 1 is_stmt 1 view -0
 559              		.cfi_startproc
 560              		@ args = 0, pretend = 0, frame = 0
 561              		@ frame_needed = 0, uses_anonymous_args = 0
 383:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 562              		.loc 1 383 1 is_stmt 0 view .LVU106
 563 0000 08B5     		push	{r3, lr}
 564              	.LCFI7:
 565              		.cfi_def_cfa_offset 8
 566              		.cfi_offset 3, -8
 567              		.cfi_offset 14, -4
 568 0002 1346     		mov	r3, r2
 387:../../../mod/valve/valve.c **** 
 569              		.loc 1 387 1 is_stmt 1 view .LVU107
 393:../../../mod/valve/valve.c **** 
 570              		.loc 1 393 1 view .LVU108
 571              	.LVL31:
 401:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 572              		.loc 1 401 1 view .LVU109
 401:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 573              		.loc 1 401 14 is_stmt 0 view .LVU110
 574 0004 8AB2     		uxth	r2, r1
 575              	.LVL32:
 401:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 576              		.loc 1 401 14 view .LVU111
 577 0006 0146     		mov	r1, r0
 578              	.LVL33:
 401:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 579              		.loc 1 401 14 view .LVU112
 580 0008 0548     		ldr	r0, .L69
 581              	.LVL34:
 401:../../../mod/valve/valve.c ****                                rx_data_ptr     , 
 582              		.loc 1 401 14 view .LVU113
 583 000a FFF7FEFF 		bl	HAL_UART_Receive
 584              	.LVL35:
 407:../../../mod/valve/valve.c **** 	{
 585              		.loc 1 407 1 is_stmt 1 view .LVU114
 586 000e 0346     		mov	r3, r0
 587 0010 10B1     		cbz	r0, .L66
 588 0012 0328     		cmp	r0, #3
 589 0014 02D1     		bne	.L67
 590 0016 0423     		movs	r3, #4
 591              	.L66:
 423:../../../mod/valve/valve.c **** 
 592              		.loc 1 423 1 is_stmt 0 view .LVU115
 593 0018 1846     		mov	r0, r3
 594              	.LVL36:
 423:../../../mod/valve/valve.c **** 
 595              		.loc 1 423 1 view .LVU116
 596 001a 08BD     		pop	{r3, pc}
 597              	.LVL37:
 598              	.L67:
 419:../../../mod/valve/valve.c **** 		}
 599              		.loc 1 419 10 view .LVU117
 600 001c 0323     		movs	r3, #3
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 37


 601 001e FBE7     		b	.L66
 602              	.L70:
 603              		.align	2
 604              	.L69:
 605 0020 00000000 		.word	huart3
 606              		.cfi_endproc
 607              	.LFE146:
 609              		.section	.text.valve_enable_valves,"ax",%progbits
 610              		.align	1
 611              		.global	valve_enable_valves
 612              		.syntax unified
 613              		.thumb
 614              		.thumb_func
 616              	valve_enable_valves:
 617              	.LFB147:
 439:../../../mod/valve/valve.c **** /* Enable the oxidizer valve */
 618              		.loc 1 439 1 is_stmt 1 view -0
 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622 0000 08B5     		push	{r3, lr}
 623              	.LCFI8:
 624              		.cfi_def_cfa_offset 8
 625              		.cfi_offset 3, -8
 626              		.cfi_offset 14, -4
 441:../../../mod/valve/valve.c **** 
 627              		.loc 1 441 1 view .LVU119
 628 0002 FFF7FEFF 		bl	lox_driver_enable
 629              	.LVL38:
 444:../../../mod/valve/valve.c **** 
 630              		.loc 1 444 1 view .LVU120
 631 0006 FFF7FEFF 		bl	fuel_driver_enable
 632              	.LVL39:
 446:../../../mod/valve/valve.c **** 
 633              		.loc 1 446 1 is_stmt 0 view .LVU121
 634 000a 08BD     		pop	{r3, pc}
 635              		.cfi_endproc
 636              	.LFE147:
 638              		.section	.text.valve_disable_valves,"ax",%progbits
 639              		.align	1
 640              		.global	valve_disable_valves
 641              		.syntax unified
 642              		.thumb
 643              		.thumb_func
 645              	valve_disable_valves:
 646              	.LFB148:
 462:../../../mod/valve/valve.c **** /* Disable the oxidizer valve */
 647              		.loc 1 462 1 is_stmt 1 view -0
 648              		.cfi_startproc
 649              		@ args = 0, pretend = 0, frame = 0
 650              		@ frame_needed = 0, uses_anonymous_args = 0
 651 0000 08B5     		push	{r3, lr}
 652              	.LCFI9:
 653              		.cfi_def_cfa_offset 8
 654              		.cfi_offset 3, -8
 655              		.cfi_offset 14, -4
 464:../../../mod/valve/valve.c **** 
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 38


 656              		.loc 1 464 1 view .LVU123
 657 0002 FFF7FEFF 		bl	lox_driver_disable
 658              	.LVL40:
 467:../../../mod/valve/valve.c **** 
 659              		.loc 1 467 1 view .LVU124
 660 0006 FFF7FEFF 		bl	fuel_driver_disable
 661              	.LVL41:
 469:../../../mod/valve/valve.c **** 
 662              		.loc 1 469 1 is_stmt 0 view .LVU125
 663 000a 08BD     		pop	{r3, pc}
 664              		.cfi_endproc
 665              	.LFE148:
 667              		.section	.text.valve_open_ox_valve,"ax",%progbits
 668              		.align	1
 669              		.global	valve_open_ox_valve
 670              		.syntax unified
 671              		.thumb
 672              		.thumb_func
 674              	valve_open_ox_valve:
 675              	.LFB149:
 485:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 676              		.loc 1 485 1 is_stmt 1 view -0
 677              		.cfi_startproc
 678              		@ args = 0, pretend = 0, frame = 0
 679              		@ frame_needed = 0, uses_anonymous_args = 0
 680 0000 10B5     		push	{r4, lr}
 681              	.LCFI10:
 682              		.cfi_def_cfa_offset 8
 683              		.cfi_offset 4, -8
 684              		.cfi_offset 14, -4
 489:../../../mod/valve/valve.c **** 
 685              		.loc 1 489 1 view .LVU127
 495:../../../mod/valve/valve.c **** 
 686              		.loc 1 495 1 view .LVU128
 687              	.LVL42:
 503:../../../mod/valve/valve.c **** 	{
 688              		.loc 1 503 1 view .LVU129
 503:../../../mod/valve/valve.c **** 	{
 689              		.loc 1 503 20 is_stmt 0 view .LVU130
 690 0002 0A4B     		ldr	r3, .L79
 691 0004 1B68     		ldr	r3, [r3]
 503:../../../mod/valve/valve.c **** 	{
 692              		.loc 1 503 4 view .LVU131
 693 0006 FA2B     		cmp	r3, #250
 694 0008 0CD0     		beq	.L77
 509:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 695              		.loc 1 509 1 is_stmt 1 view .LVU132
 509:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 696              		.loc 1 509 16 is_stmt 0 view .LVU133
 697 000a 0120     		movs	r0, #1
 698 000c FFF7FEFF 		bl	lox_driver_set_direction
 699              	.LVL43:
 510:../../../mod/valve/valve.c **** 	{
 700              		.loc 1 510 1 is_stmt 1 view .LVU134
 510:../../../mod/valve/valve.c **** 	{
 701              		.loc 1 510 4 is_stmt 0 view .LVU135
 702 0010 0446     		mov	r4, r0
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 39


 703 0012 40B9     		cbnz	r0, .L76
 516:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 704              		.loc 1 516 1 is_stmt 1 view .LVU136
 516:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 705              		.loc 1 516 18 is_stmt 0 view .LVU137
 706 0014 064B     		ldr	r3, .L79+4
 707 0016 0122     		movs	r2, #1
 708 0018 1A70     		strb	r2, [r3]
 517:../../../mod/valve/valve.c **** return VALVE_OK;
 709              		.loc 1 517 1 is_stmt 1 view .LVU138
 710 001a 0021     		movs	r1, #0
 711 001c 0548     		ldr	r0, .L79+8
 712              	.LVL44:
 517:../../../mod/valve/valve.c **** return VALVE_OK;
 713              		.loc 1 517 1 is_stmt 0 view .LVU139
 714 001e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 715              	.LVL45:
 518:../../../mod/valve/valve.c **** } /* valve_open_ox_valve */
 716              		.loc 1 518 1 is_stmt 1 view .LVU140
 518:../../../mod/valve/valve.c **** } /* valve_open_ox_valve */
 717              		.loc 1 518 8 is_stmt 0 view .LVU141
 718 0022 00E0     		b	.L76
 719              	.LVL46:
 720              	.L77:
 505:../../../mod/valve/valve.c **** 	}
 721              		.loc 1 505 9 view .LVU142
 722 0024 0024     		movs	r4, #0
 723              	.LVL47:
 724              	.L76:
 519:../../../mod/valve/valve.c **** 
 725              		.loc 1 519 1 view .LVU143
 726 0026 2046     		mov	r0, r4
 727 0028 10BD     		pop	{r4, pc}
 728              	.L80:
 729 002a 00BF     		.align	2
 730              	.L79:
 731 002c 00000000 		.word	lox_valve_pos
 732 0030 00000000 		.word	ox_valve_opening
 733 0034 00000000 		.word	htim15
 734              		.cfi_endproc
 735              	.LFE149:
 737              		.section	.text.valve_open_fuel_valve,"ax",%progbits
 738              		.align	1
 739              		.global	valve_open_fuel_valve
 740              		.syntax unified
 741              		.thumb
 742              		.thumb_func
 744              	valve_open_fuel_valve:
 745              	.LFB150:
 535:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 746              		.loc 1 535 1 is_stmt 1 view -0
 747              		.cfi_startproc
 748              		@ args = 0, pretend = 0, frame = 0
 749              		@ frame_needed = 0, uses_anonymous_args = 0
 750 0000 10B5     		push	{r4, lr}
 751              	.LCFI11:
 752              		.cfi_def_cfa_offset 8
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 40


 753              		.cfi_offset 4, -8
 754              		.cfi_offset 14, -4
 539:../../../mod/valve/valve.c **** 
 755              		.loc 1 539 1 view .LVU145
 545:../../../mod/valve/valve.c **** 
 756              		.loc 1 545 1 view .LVU146
 757              	.LVL48:
 553:../../../mod/valve/valve.c **** 	{
 758              		.loc 1 553 1 view .LVU147
 553:../../../mod/valve/valve.c **** 	{
 759              		.loc 1 553 21 is_stmt 0 view .LVU148
 760 0002 0A4B     		ldr	r3, .L85
 761 0004 1B68     		ldr	r3, [r3]
 553:../../../mod/valve/valve.c **** 	{
 762              		.loc 1 553 4 view .LVU149
 763 0006 FA2B     		cmp	r3, #250
 764 0008 0CD0     		beq	.L83
 559:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 765              		.loc 1 559 1 is_stmt 1 view .LVU150
 559:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 766              		.loc 1 559 16 is_stmt 0 view .LVU151
 767 000a 0120     		movs	r0, #1
 768 000c FFF7FEFF 		bl	fuel_driver_set_direction
 769              	.LVL49:
 560:../../../mod/valve/valve.c **** 	{
 770              		.loc 1 560 1 is_stmt 1 view .LVU152
 560:../../../mod/valve/valve.c **** 	{
 771              		.loc 1 560 4 is_stmt 0 view .LVU153
 772 0010 0446     		mov	r4, r0
 773 0012 40B9     		cbnz	r0, .L82
 566:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 774              		.loc 1 566 1 is_stmt 1 view .LVU154
 566:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 775              		.loc 1 566 20 is_stmt 0 view .LVU155
 776 0014 064B     		ldr	r3, .L85+4
 777 0016 0122     		movs	r2, #1
 778 0018 1A70     		strb	r2, [r3]
 567:../../../mod/valve/valve.c **** return VALVE_OK;
 779              		.loc 1 567 1 is_stmt 1 view .LVU156
 780 001a 0C21     		movs	r1, #12
 781 001c 0548     		ldr	r0, .L85+8
 782              	.LVL50:
 567:../../../mod/valve/valve.c **** return VALVE_OK;
 783              		.loc 1 567 1 is_stmt 0 view .LVU157
 784 001e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 785              	.LVL51:
 568:../../../mod/valve/valve.c **** } /* valve_open_fuel_valve */
 786              		.loc 1 568 1 is_stmt 1 view .LVU158
 568:../../../mod/valve/valve.c **** } /* valve_open_fuel_valve */
 787              		.loc 1 568 8 is_stmt 0 view .LVU159
 788 0022 00E0     		b	.L82
 789              	.LVL52:
 790              	.L83:
 555:../../../mod/valve/valve.c **** 	}
 791              		.loc 1 555 9 view .LVU160
 792 0024 0024     		movs	r4, #0
 793              	.LVL53:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 41


 794              	.L82:
 569:../../../mod/valve/valve.c **** 
 795              		.loc 1 569 1 view .LVU161
 796 0026 2046     		mov	r0, r4
 797 0028 10BD     		pop	{r4, pc}
 798              	.L86:
 799 002a 00BF     		.align	2
 800              	.L85:
 801 002c 00000000 		.word	fuel_valve_pos
 802 0030 00000000 		.word	fuel_valve_opening
 803 0034 00000000 		.word	htim2
 804              		.cfi_endproc
 805              	.LFE150:
 807              		.section	.text.valve_close_ox_valve,"ax",%progbits
 808              		.align	1
 809              		.global	valve_close_ox_valve
 810              		.syntax unified
 811              		.thumb
 812              		.thumb_func
 814              	valve_close_ox_valve:
 815              	.LFB151:
 585:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 816              		.loc 1 585 1 is_stmt 1 view -0
 817              		.cfi_startproc
 818              		@ args = 0, pretend = 0, frame = 0
 819              		@ frame_needed = 0, uses_anonymous_args = 0
 820 0000 10B5     		push	{r4, lr}
 821              	.LCFI12:
 822              		.cfi_def_cfa_offset 8
 823              		.cfi_offset 4, -8
 824              		.cfi_offset 14, -4
 589:../../../mod/valve/valve.c **** 
 825              		.loc 1 589 1 view .LVU163
 595:../../../mod/valve/valve.c **** 
 826              		.loc 1 595 1 view .LVU164
 827              	.LVL54:
 603:../../../mod/valve/valve.c **** 	{
 828              		.loc 1 603 1 view .LVU165
 603:../../../mod/valve/valve.c **** 	{
 829              		.loc 1 603 20 is_stmt 0 view .LVU166
 830 0002 0A4B     		ldr	r3, .L92
 831 0004 1B68     		ldr	r3, [r3]
 603:../../../mod/valve/valve.c **** 	{
 832              		.loc 1 603 4 view .LVU167
 833 0006 13B9     		cbnz	r3, .L91
 605:../../../mod/valve/valve.c **** 	}
 834              		.loc 1 605 9 view .LVU168
 835 0008 0024     		movs	r4, #0
 836              	.LVL55:
 837              	.L88:
 619:../../../mod/valve/valve.c **** 
 838              		.loc 1 619 1 view .LVU169
 839 000a 2046     		mov	r0, r4
 840 000c 10BD     		pop	{r4, pc}
 841              	.LVL56:
 842              	.L91:
 609:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 42


 843              		.loc 1 609 1 is_stmt 1 view .LVU170
 609:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 844              		.loc 1 609 16 is_stmt 0 view .LVU171
 845 000e 0020     		movs	r0, #0
 846 0010 FFF7FEFF 		bl	lox_driver_set_direction
 847              	.LVL57:
 610:../../../mod/valve/valve.c **** 	{
 848              		.loc 1 610 1 is_stmt 1 view .LVU172
 610:../../../mod/valve/valve.c **** 	{
 849              		.loc 1 610 4 is_stmt 0 view .LVU173
 850 0014 0446     		mov	r4, r0
 851 0016 0028     		cmp	r0, #0
 852 0018 F7D1     		bne	.L88
 616:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 853              		.loc 1 616 1 is_stmt 1 view .LVU174
 616:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 854              		.loc 1 616 18 is_stmt 0 view .LVU175
 855 001a 054B     		ldr	r3, .L92+4
 856 001c 0122     		movs	r2, #1
 857 001e 1A70     		strb	r2, [r3]
 617:../../../mod/valve/valve.c **** return VALVE_OK;
 858              		.loc 1 617 1 is_stmt 1 view .LVU176
 859 0020 0021     		movs	r1, #0
 860 0022 0448     		ldr	r0, .L92+8
 861              	.LVL58:
 617:../../../mod/valve/valve.c **** return VALVE_OK;
 862              		.loc 1 617 1 is_stmt 0 view .LVU177
 863 0024 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 864              	.LVL59:
 618:../../../mod/valve/valve.c **** } /* valve_close_ox_valve */
 865              		.loc 1 618 1 is_stmt 1 view .LVU178
 618:../../../mod/valve/valve.c **** } /* valve_close_ox_valve */
 866              		.loc 1 618 8 is_stmt 0 view .LVU179
 867 0028 EFE7     		b	.L88
 868              	.L93:
 869 002a 00BF     		.align	2
 870              	.L92:
 871 002c 00000000 		.word	lox_valve_pos
 872 0030 00000000 		.word	ox_valve_closing
 873 0034 00000000 		.word	htim15
 874              		.cfi_endproc
 875              	.LFE151:
 877              		.section	.text.valve_close_fuel_valve,"ax",%progbits
 878              		.align	1
 879              		.global	valve_close_fuel_valve
 880              		.syntax unified
 881              		.thumb
 882              		.thumb_func
 884              	valve_close_fuel_valve:
 885              	.LFB152:
 635:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 886              		.loc 1 635 1 is_stmt 1 view -0
 887              		.cfi_startproc
 888              		@ args = 0, pretend = 0, frame = 0
 889              		@ frame_needed = 0, uses_anonymous_args = 0
 890 0000 10B5     		push	{r4, lr}
 891              	.LCFI13:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 43


 892              		.cfi_def_cfa_offset 8
 893              		.cfi_offset 4, -8
 894              		.cfi_offset 14, -4
 639:../../../mod/valve/valve.c **** 
 895              		.loc 1 639 1 view .LVU181
 645:../../../mod/valve/valve.c **** 
 896              		.loc 1 645 1 view .LVU182
 897              	.LVL60:
 653:../../../mod/valve/valve.c **** 	{
 898              		.loc 1 653 1 view .LVU183
 653:../../../mod/valve/valve.c **** 	{
 899              		.loc 1 653 21 is_stmt 0 view .LVU184
 900 0002 0A4B     		ldr	r3, .L99
 901 0004 1B68     		ldr	r3, [r3]
 653:../../../mod/valve/valve.c **** 	{
 902              		.loc 1 653 4 view .LVU185
 903 0006 13B9     		cbnz	r3, .L98
 655:../../../mod/valve/valve.c **** 	}
 904              		.loc 1 655 9 view .LVU186
 905 0008 0024     		movs	r4, #0
 906              	.LVL61:
 907              	.L95:
 669:../../../mod/valve/valve.c **** 
 908              		.loc 1 669 1 view .LVU187
 909 000a 2046     		mov	r0, r4
 910 000c 10BD     		pop	{r4, pc}
 911              	.LVL62:
 912              	.L98:
 659:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 913              		.loc 1 659 1 is_stmt 1 view .LVU188
 659:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 914              		.loc 1 659 16 is_stmt 0 view .LVU189
 915 000e 0020     		movs	r0, #0
 916 0010 FFF7FEFF 		bl	fuel_driver_set_direction
 917              	.LVL63:
 660:../../../mod/valve/valve.c **** 	{
 918              		.loc 1 660 1 is_stmt 1 view .LVU190
 660:../../../mod/valve/valve.c **** 	{
 919              		.loc 1 660 4 is_stmt 0 view .LVU191
 920 0014 0446     		mov	r4, r0
 921 0016 0028     		cmp	r0, #0
 922 0018 F7D1     		bne	.L95
 666:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 923              		.loc 1 666 1 is_stmt 1 view .LVU192
 666:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 924              		.loc 1 666 20 is_stmt 0 view .LVU193
 925 001a 054B     		ldr	r3, .L99+4
 926 001c 0122     		movs	r2, #1
 927 001e 1A70     		strb	r2, [r3]
 667:../../../mod/valve/valve.c **** return VALVE_OK;
 928              		.loc 1 667 1 is_stmt 1 view .LVU194
 929 0020 0C21     		movs	r1, #12
 930 0022 0448     		ldr	r0, .L99+8
 931              	.LVL64:
 667:../../../mod/valve/valve.c **** return VALVE_OK;
 932              		.loc 1 667 1 is_stmt 0 view .LVU195
 933 0024 FFF7FEFF 		bl	HAL_TIM_PWM_Start
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 44


 934              	.LVL65:
 668:../../../mod/valve/valve.c **** } /* valve_close_fuel_valve */
 935              		.loc 1 668 1 is_stmt 1 view .LVU196
 668:../../../mod/valve/valve.c **** } /* valve_close_fuel_valve */
 936              		.loc 1 668 8 is_stmt 0 view .LVU197
 937 0028 EFE7     		b	.L95
 938              	.L100:
 939 002a 00BF     		.align	2
 940              	.L99:
 941 002c 00000000 		.word	fuel_valve_pos
 942 0030 00000000 		.word	fuel_valve_closing
 943 0034 00000000 		.word	htim2
 944              		.cfi_endproc
 945              	.LFE152:
 947              		.section	.text.valve_crack_ox_valve,"ax",%progbits
 948              		.align	1
 949              		.global	valve_crack_ox_valve
 950              		.syntax unified
 951              		.thumb
 952              		.thumb_func
 954              	valve_crack_ox_valve:
 955              	.LFB153:
 685:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 956              		.loc 1 685 1 is_stmt 1 view -0
 957              		.cfi_startproc
 958              		@ args = 0, pretend = 0, frame = 0
 959              		@ frame_needed = 0, uses_anonymous_args = 0
 960 0000 10B5     		push	{r4, lr}
 961              	.LCFI14:
 962              		.cfi_def_cfa_offset 8
 963              		.cfi_offset 4, -8
 964              		.cfi_offset 14, -4
 689:../../../mod/valve/valve.c **** 
 965              		.loc 1 689 1 view .LVU199
 695:../../../mod/valve/valve.c **** 
 966              		.loc 1 695 1 view .LVU200
 967              	.LVL66:
 703:../../../mod/valve/valve.c **** 	{
 968              		.loc 1 703 1 view .LVU201
 703:../../../mod/valve/valve.c **** 	{
 969              		.loc 1 703 20 is_stmt 0 view .LVU202
 970 0002 0A4B     		ldr	r3, .L105
 971 0004 1B68     		ldr	r3, [r3]
 703:../../../mod/valve/valve.c **** 	{
 972              		.loc 1 703 4 view .LVU203
 973 0006 FA2B     		cmp	r3, #250
 974 0008 0CD0     		beq	.L103
 709:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 975              		.loc 1 709 1 is_stmt 1 view .LVU204
 709:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 976              		.loc 1 709 16 is_stmt 0 view .LVU205
 977 000a 0120     		movs	r0, #1
 978 000c FFF7FEFF 		bl	lox_driver_set_direction
 979              	.LVL67:
 710:../../../mod/valve/valve.c **** 	{
 980              		.loc 1 710 1 is_stmt 1 view .LVU206
 710:../../../mod/valve/valve.c **** 	{
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 45


 981              		.loc 1 710 4 is_stmt 0 view .LVU207
 982 0010 0446     		mov	r4, r0
 983 0012 40B9     		cbnz	r0, .L102
 716:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 984              		.loc 1 716 1 is_stmt 1 view .LVU208
 716:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 985              		.loc 1 716 19 is_stmt 0 view .LVU209
 986 0014 064B     		ldr	r3, .L105+4
 987 0016 0122     		movs	r2, #1
 988 0018 1A70     		strb	r2, [r3]
 717:../../../mod/valve/valve.c **** return VALVE_OK;
 989              		.loc 1 717 1 is_stmt 1 view .LVU210
 990 001a 0021     		movs	r1, #0
 991 001c 0548     		ldr	r0, .L105+8
 992              	.LVL68:
 717:../../../mod/valve/valve.c **** return VALVE_OK;
 993              		.loc 1 717 1 is_stmt 0 view .LVU211
 994 001e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 995              	.LVL69:
 718:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 996              		.loc 1 718 1 is_stmt 1 view .LVU212
 718:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 997              		.loc 1 718 8 is_stmt 0 view .LVU213
 998 0022 00E0     		b	.L102
 999              	.LVL70:
 1000              	.L103:
 705:../../../mod/valve/valve.c **** 	}
 1001              		.loc 1 705 9 view .LVU214
 1002 0024 0024     		movs	r4, #0
 1003              	.LVL71:
 1004              	.L102:
 719:../../../mod/valve/valve.c **** 
 1005              		.loc 1 719 1 view .LVU215
 1006 0026 2046     		mov	r0, r4
 1007 0028 10BD     		pop	{r4, pc}
 1008              	.L106:
 1009 002a 00BF     		.align	2
 1010              	.L105:
 1011 002c 00000000 		.word	lox_valve_pos
 1012 0030 00000000 		.word	ox_valve_cracking
 1013 0034 00000000 		.word	htim15
 1014              		.cfi_endproc
 1015              	.LFE153:
 1017              		.section	.text.valve_crack_fuel_valve,"ax",%progbits
 1018              		.align	1
 1019              		.global	valve_crack_fuel_valve
 1020              		.syntax unified
 1021              		.thumb
 1022              		.thumb_func
 1024              	valve_crack_fuel_valve:
 1025              	.LFB154:
 735:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 1026              		.loc 1 735 1 is_stmt 1 view -0
 1027              		.cfi_startproc
 1028              		@ args = 0, pretend = 0, frame = 0
 1029              		@ frame_needed = 0, uses_anonymous_args = 0
 1030 0000 10B5     		push	{r4, lr}
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 46


 1031              	.LCFI15:
 1032              		.cfi_def_cfa_offset 8
 1033              		.cfi_offset 4, -8
 1034              		.cfi_offset 14, -4
 739:../../../mod/valve/valve.c **** 
 1035              		.loc 1 739 1 view .LVU217
 745:../../../mod/valve/valve.c **** 
 1036              		.loc 1 745 1 view .LVU218
 1037              	.LVL72:
 753:../../../mod/valve/valve.c **** 	{
 1038              		.loc 1 753 1 view .LVU219
 753:../../../mod/valve/valve.c **** 	{
 1039              		.loc 1 753 21 is_stmt 0 view .LVU220
 1040 0002 0A4B     		ldr	r3, .L111
 1041 0004 1B68     		ldr	r3, [r3]
 753:../../../mod/valve/valve.c **** 	{
 1042              		.loc 1 753 4 view .LVU221
 1043 0006 FA2B     		cmp	r3, #250
 1044 0008 0CD0     		beq	.L109
 759:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 1045              		.loc 1 759 1 is_stmt 1 view .LVU222
 759:../../../mod/valve/valve.c **** if ( valve_status != VALVE_OK )
 1046              		.loc 1 759 16 is_stmt 0 view .LVU223
 1047 000a 0120     		movs	r0, #1
 1048 000c FFF7FEFF 		bl	fuel_driver_set_direction
 1049              	.LVL73:
 760:../../../mod/valve/valve.c **** 	{
 1050              		.loc 1 760 1 is_stmt 1 view .LVU224
 760:../../../mod/valve/valve.c **** 	{
 1051              		.loc 1 760 4 is_stmt 0 view .LVU225
 1052 0010 0446     		mov	r4, r0
 1053 0012 40B9     		cbnz	r0, .L108
 766:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 1054              		.loc 1 766 1 is_stmt 1 view .LVU226
 766:../../../mod/valve/valve.c **** HAL_TIM_PWM_Start( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 1055              		.loc 1 766 21 is_stmt 0 view .LVU227
 1056 0014 064B     		ldr	r3, .L111+4
 1057 0016 0122     		movs	r2, #1
 1058 0018 1A70     		strb	r2, [r3]
 767:../../../mod/valve/valve.c **** return VALVE_OK;
 1059              		.loc 1 767 1 is_stmt 1 view .LVU228
 1060 001a 0C21     		movs	r1, #12
 1061 001c 0548     		ldr	r0, .L111+8
 1062              	.LVL74:
 767:../../../mod/valve/valve.c **** return VALVE_OK;
 1063              		.loc 1 767 1 is_stmt 0 view .LVU229
 1064 001e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1065              	.LVL75:
 768:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 1066              		.loc 1 768 1 is_stmt 1 view .LVU230
 768:../../../mod/valve/valve.c **** } /* valve_crack_ox_valve */
 1067              		.loc 1 768 8 is_stmt 0 view .LVU231
 1068 0022 00E0     		b	.L108
 1069              	.LVL76:
 1070              	.L109:
 755:../../../mod/valve/valve.c **** 	}
 1071              		.loc 1 755 9 view .LVU232
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 47


 1072 0024 0024     		movs	r4, #0
 1073              	.LVL77:
 1074              	.L108:
 769:../../../mod/valve/valve.c **** 
 1075              		.loc 1 769 1 view .LVU233
 1076 0026 2046     		mov	r0, r4
 1077 0028 10BD     		pop	{r4, pc}
 1078              	.L112:
 1079 002a 00BF     		.align	2
 1080              	.L111:
 1081 002c 00000000 		.word	fuel_valve_pos
 1082 0030 00000000 		.word	fuel_valve_cracking
 1083 0034 00000000 		.word	htim2
 1084              		.cfi_endproc
 1085              	.LFE154:
 1087              		.section	.text.valve_get_ox_valve_pos,"ax",%progbits
 1088              		.align	1
 1089              		.global	valve_get_ox_valve_pos
 1090              		.syntax unified
 1091              		.thumb
 1092              		.thumb_func
 1094              	valve_get_ox_valve_pos:
 1095              	.LFB155:
 785:../../../mod/valve/valve.c **** return lox_valve_pos*360/1000;
 1096              		.loc 1 785 1 is_stmt 1 view -0
 1097              		.cfi_startproc
 1098              		@ args = 0, pretend = 0, frame = 0
 1099              		@ frame_needed = 0, uses_anonymous_args = 0
 1100              		@ link register save eliminated.
 786:../../../mod/valve/valve.c **** } /* valve_get_ox_valve_pos */
 1101              		.loc 1 786 1 view .LVU235
 786:../../../mod/valve/valve.c **** } /* valve_get_ox_valve_pos */
 1102              		.loc 1 786 21 is_stmt 0 view .LVU236
 1103 0000 064B     		ldr	r3, .L114
 1104 0002 1B68     		ldr	r3, [r3]
 1105 0004 4FF4B472 		mov	r2, #360
 1106 0008 02FB03F3 		mul	r3, r2, r3
 786:../../../mod/valve/valve.c **** } /* valve_get_ox_valve_pos */
 1107              		.loc 1 786 25 view .LVU237
 1108 000c 0448     		ldr	r0, .L114+4
 1109 000e 80FB0320 		smull	r2, r0, r0, r3
 1110 0012 DB17     		asrs	r3, r3, #31
 787:../../../mod/valve/valve.c **** 
 1111              		.loc 1 787 1 view .LVU238
 1112 0014 C3EBA010 		rsb	r0, r3, r0, asr #6
 1113 0018 7047     		bx	lr
 1114              	.L115:
 1115 001a 00BF     		.align	2
 1116              	.L114:
 1117 001c 00000000 		.word	lox_valve_pos
 1118 0020 D34D6210 		.word	274877907
 1119              		.cfi_endproc
 1120              	.LFE155:
 1122              		.section	.text.valve_get_fuel_valve_pos,"ax",%progbits
 1123              		.align	1
 1124              		.global	valve_get_fuel_valve_pos
 1125              		.syntax unified
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 48


 1126              		.thumb
 1127              		.thumb_func
 1129              	valve_get_fuel_valve_pos:
 1130              	.LFB156:
 803:../../../mod/valve/valve.c **** return fuel_valve_pos*360/1000;
 1131              		.loc 1 803 1 is_stmt 1 view -0
 1132              		.cfi_startproc
 1133              		@ args = 0, pretend = 0, frame = 0
 1134              		@ frame_needed = 0, uses_anonymous_args = 0
 1135              		@ link register save eliminated.
 804:../../../mod/valve/valve.c **** } /* valve_get_fuel_valve_pos */
 1136              		.loc 1 804 1 view .LVU240
 804:../../../mod/valve/valve.c **** } /* valve_get_fuel_valve_pos */
 1137              		.loc 1 804 22 is_stmt 0 view .LVU241
 1138 0000 064B     		ldr	r3, .L117
 1139 0002 1B68     		ldr	r3, [r3]
 1140 0004 4FF4B472 		mov	r2, #360
 1141 0008 02FB03F3 		mul	r3, r2, r3
 804:../../../mod/valve/valve.c **** } /* valve_get_fuel_valve_pos */
 1142              		.loc 1 804 26 view .LVU242
 1143 000c 0448     		ldr	r0, .L117+4
 1144 000e 80FB0320 		smull	r2, r0, r0, r3
 1145 0012 DB17     		asrs	r3, r3, #31
 805:../../../mod/valve/valve.c **** 
 1146              		.loc 1 805 1 view .LVU243
 1147 0014 C3EBA010 		rsb	r0, r3, r0, asr #6
 1148 0018 7047     		bx	lr
 1149              	.L118:
 1150 001a 00BF     		.align	2
 1151              	.L117:
 1152 001c 00000000 		.word	fuel_valve_pos
 1153 0020 D34D6210 		.word	274877907
 1154              		.cfi_endproc
 1155              	.LFE156:
 1157              		.section	.text.valve_get_ox_valve_state,"ax",%progbits
 1158              		.align	1
 1159              		.global	valve_get_ox_valve_state
 1160              		.syntax unified
 1161              		.thumb
 1162              		.thumb_func
 1164              	valve_get_ox_valve_state:
 1165              	.LFB157:
 821:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( PHOTOGATE_GPIO_PORT, LOX_PHOTOGATE_PIN ) == PHOTOGATE_STATE_LOW )
 1166              		.loc 1 821 1 is_stmt 1 view -0
 1167              		.cfi_startproc
 1168              		@ args = 0, pretend = 0, frame = 0
 1169              		@ frame_needed = 0, uses_anonymous_args = 0
 1170 0000 08B5     		push	{r3, lr}
 1171              	.LCFI16:
 1172              		.cfi_def_cfa_offset 8
 1173              		.cfi_offset 3, -8
 1174              		.cfi_offset 14, -4
 822:../../../mod/valve/valve.c **** 	{
 1175              		.loc 1 822 1 view .LVU245
 822:../../../mod/valve/valve.c **** 	{
 1176              		.loc 1 822 6 is_stmt 0 view .LVU246
 1177 0002 0221     		movs	r1, #2
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 49


 1178 0004 0248     		ldr	r0, .L123
 1179 0006 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1180              	.LVL78:
 822:../../../mod/valve/valve.c **** 	{
 1181              		.loc 1 822 4 discriminator 1 view .LVU247
 1182 000a 00B1     		cbz	r0, .L120
 828:../../../mod/valve/valve.c **** 	}
 1183              		.loc 1 828 9 view .LVU248
 1184 000c 0120     		movs	r0, #1
 1185              	.L120:
 830:../../../mod/valve/valve.c **** 
 1186              		.loc 1 830 1 view .LVU249
 1187 000e 08BD     		pop	{r3, pc}
 1188              	.L124:
 1189              		.align	2
 1190              	.L123:
 1191 0010 00080258 		.word	1476528128
 1192              		.cfi_endproc
 1193              	.LFE157:
 1195              		.section	.text.valve_get_fuel_valve_state,"ax",%progbits
 1196              		.align	1
 1197              		.global	valve_get_fuel_valve_state
 1198              		.syntax unified
 1199              		.thumb
 1200              		.thumb_func
 1202              	valve_get_fuel_valve_state:
 1203              	.LFB158:
 846:../../../mod/valve/valve.c **** if ( HAL_GPIO_ReadPin( PHOTOGATE_GPIO_PORT, FUEL_PHOTOGATE_PIN ) == PHOTOGATE_STATE_LOW )
 1204              		.loc 1 846 1 is_stmt 1 view -0
 1205              		.cfi_startproc
 1206              		@ args = 0, pretend = 0, frame = 0
 1207              		@ frame_needed = 0, uses_anonymous_args = 0
 1208 0000 08B5     		push	{r3, lr}
 1209              	.LCFI17:
 1210              		.cfi_def_cfa_offset 8
 1211              		.cfi_offset 3, -8
 1212              		.cfi_offset 14, -4
 847:../../../mod/valve/valve.c **** 	{
 1213              		.loc 1 847 1 view .LVU251
 847:../../../mod/valve/valve.c **** 	{
 1214              		.loc 1 847 6 is_stmt 0 view .LVU252
 1215 0002 0121     		movs	r1, #1
 1216 0004 0248     		ldr	r0, .L129
 1217 0006 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1218              	.LVL79:
 847:../../../mod/valve/valve.c **** 	{
 1219              		.loc 1 847 4 discriminator 1 view .LVU253
 1220 000a 00B1     		cbz	r0, .L126
 853:../../../mod/valve/valve.c **** 	}
 1221              		.loc 1 853 9 view .LVU254
 1222 000c 0120     		movs	r0, #1
 1223              	.L126:
 855:../../../mod/valve/valve.c **** 
 1224              		.loc 1 855 1 view .LVU255
 1225 000e 08BD     		pop	{r3, pc}
 1226              	.L130:
 1227              		.align	2
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 50


 1228              	.L129:
 1229 0010 00080258 		.word	1476528128
 1230              		.cfi_endproc
 1231              	.LFE158:
 1233              		.section	.text.valve_calibrate_valves,"ax",%progbits
 1234              		.align	1
 1235              		.global	valve_calibrate_valves
 1236              		.syntax unified
 1237              		.thumb
 1238              		.thumb_func
 1240              	valve_calibrate_valves:
 1241              	.LFB159:
 871:../../../mod/valve/valve.c **** /* Calibrate the oxidizer valve  */
 1242              		.loc 1 871 1 is_stmt 1 view -0
 1243              		.cfi_startproc
 1244              		@ args = 0, pretend = 0, frame = 0
 1245              		@ frame_needed = 0, uses_anonymous_args = 0
 1246 0000 10B5     		push	{r4, lr}
 1247              	.LCFI18:
 1248              		.cfi_def_cfa_offset 8
 1249              		.cfi_offset 4, -8
 1250              		.cfi_offset 14, -4
 873:../../../mod/valve/valve.c **** lox_driver_set_direction( STEPPER_DRIVER_CW );
 1251              		.loc 1 873 1 view .LVU257
 1252 0002 FFF7FEFF 		bl	lox_driver_enable
 1253              	.LVL80:
 874:../../../mod/valve/valve.c **** while ( valve_get_ox_valve_state() == VALVE_OPEN )
 1254              		.loc 1 874 1 view .LVU258
 1255 0006 0120     		movs	r0, #1
 1256 0008 FFF7FEFF 		bl	lox_driver_set_direction
 1257              	.LVL81:
 875:../../../mod/valve/valve.c **** 	{
 1258              		.loc 1 875 1 view .LVU259
 875:../../../mod/valve/valve.c **** 	{
 1259              		.loc 1 875 7 is_stmt 0 view .LVU260
 1260 000c 03E0     		b	.L132
 1261              	.L133:
 877:../../../mod/valve/valve.c **** 	}
 1262              		.loc 1 877 2 is_stmt 1 view .LVU261
 1263 000e 0021     		movs	r1, #0
 1264 0010 1448     		ldr	r0, .L137
 1265 0012 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1266              	.LVL82:
 1267              	.L132:
 875:../../../mod/valve/valve.c **** 	{
 1268              		.loc 1 875 36 view .LVU262
 875:../../../mod/valve/valve.c **** 	{
 1269              		.loc 1 875 9 is_stmt 0 view .LVU263
 1270 0016 FFF7FEFF 		bl	valve_get_ox_valve_state
 1271              	.LVL83:
 875:../../../mod/valve/valve.c **** 	{
 1272              		.loc 1 875 36 discriminator 1 view .LVU264
 1273 001a 0028     		cmp	r0, #0
 1274 001c F7D0     		beq	.L133
 880:../../../mod/valve/valve.c **** HAL_TIM_PWM_Stop( &( VALVE_LOX_TIM ), VALVE_LOX_TIM_CHANNEL );
 1275              		.loc 1 880 1 is_stmt 1 view .LVU265
 1276 001e 0520     		movs	r0, #5
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 51


 1277 0020 FFF7FEFF 		bl	HAL_Delay
 1278              	.LVL84:
 881:../../../mod/valve/valve.c **** lox_valve_pos = 0;
 1279              		.loc 1 881 1 view .LVU266
 1280 0024 0021     		movs	r1, #0
 1281 0026 0F48     		ldr	r0, .L137
 1282 0028 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1283              	.LVL85:
 882:../../../mod/valve/valve.c **** 
 1284              		.loc 1 882 1 view .LVU267
 882:../../../mod/valve/valve.c **** 
 1285              		.loc 1 882 15 is_stmt 0 view .LVU268
 1286 002c 0024     		movs	r4, #0
 1287 002e 0E4B     		ldr	r3, .L137+4
 1288 0030 1C60     		str	r4, [r3]
 885:../../../mod/valve/valve.c **** fuel_driver_set_direction( STEPPER_DRIVER_CCW );
 1289              		.loc 1 885 1 is_stmt 1 view .LVU269
 1290 0032 FFF7FEFF 		bl	fuel_driver_enable
 1291              	.LVL86:
 886:../../../mod/valve/valve.c **** while ( valve_get_fuel_valve_state() == VALVE_OPEN )
 1292              		.loc 1 886 1 view .LVU270
 1293 0036 2046     		mov	r0, r4
 1294 0038 FFF7FEFF 		bl	fuel_driver_set_direction
 1295              	.LVL87:
 887:../../../mod/valve/valve.c **** 	{
 1296              		.loc 1 887 1 view .LVU271
 887:../../../mod/valve/valve.c **** 	{
 1297              		.loc 1 887 7 is_stmt 0 view .LVU272
 1298 003c 03E0     		b	.L134
 1299              	.L135:
 889:../../../mod/valve/valve.c **** 	}
 1300              		.loc 1 889 2 is_stmt 1 view .LVU273
 1301 003e 0C21     		movs	r1, #12
 1302 0040 0A48     		ldr	r0, .L137+8
 1303 0042 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1304              	.LVL88:
 1305              	.L134:
 887:../../../mod/valve/valve.c **** 	{
 1306              		.loc 1 887 38 view .LVU274
 887:../../../mod/valve/valve.c **** 	{
 1307              		.loc 1 887 9 is_stmt 0 view .LVU275
 1308 0046 FFF7FEFF 		bl	valve_get_fuel_valve_state
 1309              	.LVL89:
 887:../../../mod/valve/valve.c **** 	{
 1310              		.loc 1 887 38 discriminator 1 view .LVU276
 1311 004a 0028     		cmp	r0, #0
 1312 004c F7D0     		beq	.L135
 891:../../../mod/valve/valve.c **** HAL_TIM_PWM_Stop( &( VALVE_FUEL_TIM ), VALVE_FUEL_TIM_CHANNEL );
 1313              		.loc 1 891 1 is_stmt 1 view .LVU277
 1314 004e 0520     		movs	r0, #5
 1315 0050 FFF7FEFF 		bl	HAL_Delay
 1316              	.LVL90:
 892:../../../mod/valve/valve.c **** fuel_valve_pos = 0;
 1317              		.loc 1 892 1 view .LVU278
 1318 0054 0C21     		movs	r1, #12
 1319 0056 0548     		ldr	r0, .L137+8
 1320 0058 FFF7FEFF 		bl	HAL_TIM_PWM_Stop
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 52


 1321              	.LVL91:
 893:../../../mod/valve/valve.c **** 
 1322              		.loc 1 893 1 view .LVU279
 893:../../../mod/valve/valve.c **** 
 1323              		.loc 1 893 16 is_stmt 0 view .LVU280
 1324 005c 0020     		movs	r0, #0
 1325 005e 044B     		ldr	r3, .L137+12
 1326 0060 1860     		str	r0, [r3]
 895:../../../mod/valve/valve.c **** } /* valve_calibrate_valves */
 1327              		.loc 1 895 1 is_stmt 1 view .LVU281
 896:../../../mod/valve/valve.c **** #endif /* #ifdef VALVE_CONTROLLER */
 1328              		.loc 1 896 1 is_stmt 0 view .LVU282
 1329 0062 10BD     		pop	{r4, pc}
 1330              	.L138:
 1331              		.align	2
 1332              	.L137:
 1333 0064 00000000 		.word	htim15
 1334 0068 00000000 		.word	lox_valve_pos
 1335 006c 00000000 		.word	htim2
 1336 0070 00000000 		.word	fuel_valve_pos
 1337              		.cfi_endproc
 1338              	.LFE159:
 1340              		.section	.text.lox_channelA_ISR,"ax",%progbits
 1341              		.align	1
 1342              		.global	lox_channelA_ISR
 1343              		.syntax unified
 1344              		.thumb
 1345              		.thumb_func
 1347              	lox_channelA_ISR:
 1348              	.LFB160:
 917:../../../mod/valve/valve.c **** /* Low to High Transition */
 1349              		.loc 1 917 1 is_stmt 1 view -0
 1350              		.cfi_startproc
 1351              		@ args = 0, pretend = 0, frame = 0
 1352              		@ frame_needed = 0, uses_anonymous_args = 0
 1353 0000 08B5     		push	{r3, lr}
 1354              	.LCFI19:
 1355              		.cfi_def_cfa_offset 8
 1356              		.cfi_offset 3, -8
 1357              		.cfi_offset 14, -4
 919:../../../mod/valve/valve.c **** 	{
 1358              		.loc 1 919 1 view .LVU284
 919:../../../mod/valve/valve.c **** 	{
 1359              		.loc 1 919 6 is_stmt 0 view .LVU285
 1360 0002 4FF48071 		mov	r1, #256
 1361 0006 0F48     		ldr	r0, .L143
 1362 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1363              	.LVL92:
 919:../../../mod/valve/valve.c **** 	{
 1364              		.loc 1 919 4 discriminator 1 view .LVU286
 1365 000c A8B1     		cbz	r0, .L140
 921:../../../mod/valve/valve.c **** 	if ( !lox_channelB_state )
 1366              		.loc 1 921 2 is_stmt 1 view .LVU287
 921:../../../mod/valve/valve.c **** 	if ( !lox_channelB_state )
 1367              		.loc 1 921 21 is_stmt 0 view .LVU288
 1368 000e 0E4B     		ldr	r3, .L143+4
 1369 0010 0122     		movs	r2, #1
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 53


 1370 0012 1A70     		strb	r2, [r3]
 922:../../../mod/valve/valve.c **** 		{
 1371              		.loc 1 922 2 is_stmt 1 view .LVU289
 922:../../../mod/valve/valve.c **** 		{
 1372              		.loc 1 922 7 is_stmt 0 view .LVU290
 1373 0014 0D4B     		ldr	r3, .L143+8
 1374 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 922:../../../mod/valve/valve.c **** 		{
 1375              		.loc 1 922 5 view .LVU291
 1376 0018 93B9     		cbnz	r3, .L139
 925:../../../mod/valve/valve.c **** 
 1377              		.loc 1 925 3 is_stmt 1 view .LVU292
 1378 001a FFF7FEFF 		bl	dec_lox_encoder
 1379              	.LVL93:
 928:../../../mod/valve/valve.c **** 			{
 1380              		.loc 1 928 3 view .LVU293
 928:../../../mod/valve/valve.c **** 			{
 1381              		.loc 1 928 8 is_stmt 0 view .LVU294
 1382 001e 0C4B     		ldr	r3, .L143+12
 1383 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 928:../../../mod/valve/valve.c **** 			{
 1384              		.loc 1 928 6 view .LVU295
 1385 0022 6BB1     		cbz	r3, .L139
 928:../../../mod/valve/valve.c **** 			{
 1386              		.loc 1 928 44 discriminator 1 view .LVU296
 1387 0024 0B4B     		ldr	r3, .L143+16
 1388 0026 1B68     		ldr	r3, [r3]
 928:../../../mod/valve/valve.c **** 			{
 1389              		.loc 1 928 25 discriminator 1 view .LVU297
 1390 0028 53B9     		cbnz	r3, .L139
 930:../../../mod/valve/valve.c **** 			ox_valve_closing = false;
 1391              		.loc 1 930 4 is_stmt 1 view .LVU298
 1392 002a 0021     		movs	r1, #0
 1393 002c 0A48     		ldr	r0, .L143+20
 1394 002e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1395              	.LVL94:
 931:../../../mod/valve/valve.c **** 			}
 1396              		.loc 1 931 4 view .LVU299
 931:../../../mod/valve/valve.c **** 			}
 1397              		.loc 1 931 21 is_stmt 0 view .LVU300
 1398 0032 074B     		ldr	r3, .L143+12
 1399 0034 0022     		movs	r2, #0
 1400 0036 1A70     		strb	r2, [r3]
 1401 0038 02E0     		b	.L139
 1402              	.L140:
 946:../../../mod/valve/valve.c **** 	}
 1403              		.loc 1 946 2 is_stmt 1 view .LVU301
 946:../../../mod/valve/valve.c **** 	}
 1404              		.loc 1 946 21 is_stmt 0 view .LVU302
 1405 003a 034B     		ldr	r3, .L143+4
 1406 003c 0022     		movs	r2, #0
 1407 003e 1A70     		strb	r2, [r3]
 1408              	.L139:
 948:../../../mod/valve/valve.c **** 
 1409              		.loc 1 948 1 view .LVU303
 1410 0040 08BD     		pop	{r3, pc}
 1411              	.L144:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 54


 1412 0042 00BF     		.align	2
 1413              	.L143:
 1414 0044 00080258 		.word	1476528128
 1415 0048 00000000 		.word	lox_channelA_state
 1416 004c 00000000 		.word	lox_channelB_state
 1417 0050 00000000 		.word	ox_valve_closing
 1418 0054 00000000 		.word	lox_valve_pos
 1419 0058 00000000 		.word	htim15
 1420              		.cfi_endproc
 1421              	.LFE160:
 1423              		.section	.text.lox_channelB_ISR,"ax",%progbits
 1424              		.align	1
 1425              		.global	lox_channelB_ISR
 1426              		.syntax unified
 1427              		.thumb
 1428              		.thumb_func
 1430              	lox_channelB_ISR:
 1431              	.LFB161:
 964:../../../mod/valve/valve.c **** /* Low to High Transition */
 1432              		.loc 1 964 1 is_stmt 1 view -0
 1433              		.cfi_startproc
 1434              		@ args = 0, pretend = 0, frame = 0
 1435              		@ frame_needed = 0, uses_anonymous_args = 0
 1436 0000 08B5     		push	{r3, lr}
 1437              	.LCFI20:
 1438              		.cfi_def_cfa_offset 8
 1439              		.cfi_offset 3, -8
 1440              		.cfi_offset 14, -4
 966:../../../mod/valve/valve.c **** 	{
 1441              		.loc 1 966 1 view .LVU305
 966:../../../mod/valve/valve.c **** 	{
 1442              		.loc 1 966 6 is_stmt 0 view .LVU306
 1443 0002 4FF40071 		mov	r1, #512
 1444 0006 1748     		ldr	r0, .L151
 1445 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1446              	.LVL95:
 966:../../../mod/valve/valve.c **** 	{
 1447              		.loc 1 966 4 discriminator 1 view .LVU307
 1448 000c 28B3     		cbz	r0, .L146
 968:../../../mod/valve/valve.c **** 	if ( !lox_channelA_state )
 1449              		.loc 1 968 2 is_stmt 1 view .LVU308
 968:../../../mod/valve/valve.c **** 	if ( !lox_channelA_state )
 1450              		.loc 1 968 21 is_stmt 0 view .LVU309
 1451 000e 164B     		ldr	r3, .L151+4
 1452 0010 0122     		movs	r2, #1
 1453 0012 1A70     		strb	r2, [r3]
 969:../../../mod/valve/valve.c **** 		{
 1454              		.loc 1 969 2 is_stmt 1 view .LVU310
 969:../../../mod/valve/valve.c **** 		{
 1455              		.loc 1 969 7 is_stmt 0 view .LVU311
 1456 0014 154B     		ldr	r3, .L151+8
 1457 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 969:../../../mod/valve/valve.c **** 		{
 1458              		.loc 1 969 5 view .LVU312
 1459 0018 13BB     		cbnz	r3, .L145
 972:../../../mod/valve/valve.c **** 
 1460              		.loc 1 972 3 is_stmt 1 view .LVU313
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 55


 1461 001a FFF7FEFF 		bl	inc_lox_encoder
 1462              	.LVL96:
 975:../../../mod/valve/valve.c **** 			{
 1463              		.loc 1 975 3 view .LVU314
 975:../../../mod/valve/valve.c **** 			{
 1464              		.loc 1 975 8 is_stmt 0 view .LVU315
 1465 001e 144B     		ldr	r3, .L151+12
 1466 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 975:../../../mod/valve/valve.c **** 			{
 1467              		.loc 1 975 6 view .LVU316
 1468 0022 1BB1     		cbz	r3, .L148
 975:../../../mod/valve/valve.c **** 			{
 1469              		.loc 1 975 44 discriminator 1 view .LVU317
 1470 0024 134B     		ldr	r3, .L151+16
 1471 0026 1B68     		ldr	r3, [r3]
 975:../../../mod/valve/valve.c **** 			{
 1472              		.loc 1 975 25 discriminator 1 view .LVU318
 1473 0028 FA2B     		cmp	r3, #250
 1474 002a 0ED0     		beq	.L150
 1475              	.L148:
 981:../../../mod/valve/valve.c **** 			{
 1476              		.loc 1 981 8 is_stmt 1 view .LVU319
 981:../../../mod/valve/valve.c **** 			{
 1477              		.loc 1 981 13 is_stmt 0 view .LVU320
 1478 002c 124B     		ldr	r3, .L151+20
 1479 002e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 981:../../../mod/valve/valve.c **** 			{
 1480              		.loc 1 981 11 view .LVU321
 1481 0030 B3B1     		cbz	r3, .L145
 981:../../../mod/valve/valve.c **** 			{
 1482              		.loc 1 981 50 discriminator 1 view .LVU322
 1483 0032 104B     		ldr	r3, .L151+16
 1484 0034 1B68     		ldr	r3, [r3]
 981:../../../mod/valve/valve.c **** 			{
 1485              		.loc 1 981 31 discriminator 1 view .LVU323
 1486 0036 472B     		cmp	r3, #71
 1487 0038 12D1     		bne	.L145
 983:../../../mod/valve/valve.c **** 			ox_valve_cracking = false;
 1488              		.loc 1 983 4 is_stmt 1 view .LVU324
 1489 003a 0021     		movs	r1, #0
 1490 003c 0F48     		ldr	r0, .L151+24
 1491 003e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1492              	.LVL97:
 984:../../../mod/valve/valve.c **** 			}
 1493              		.loc 1 984 4 view .LVU325
 984:../../../mod/valve/valve.c **** 			}
 1494              		.loc 1 984 22 is_stmt 0 view .LVU326
 1495 0042 0D4B     		ldr	r3, .L151+20
 1496 0044 0022     		movs	r2, #0
 1497 0046 1A70     		strb	r2, [r3]
 1498 0048 0AE0     		b	.L145
 1499              	.L150:
 977:../../../mod/valve/valve.c **** 			ox_valve_opening = false;
 1500              		.loc 1 977 4 is_stmt 1 view .LVU327
 1501 004a 0021     		movs	r1, #0
 1502 004c 0B48     		ldr	r0, .L151+24
 1503 004e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 56


 1504              	.LVL98:
 978:../../../mod/valve/valve.c **** 			}
 1505              		.loc 1 978 4 view .LVU328
 978:../../../mod/valve/valve.c **** 			}
 1506              		.loc 1 978 21 is_stmt 0 view .LVU329
 1507 0052 074B     		ldr	r3, .L151+12
 1508 0054 0022     		movs	r2, #0
 1509 0056 1A70     		strb	r2, [r3]
 1510 0058 02E0     		b	.L145
 1511              	.L146:
 991:../../../mod/valve/valve.c **** 	}
 1512              		.loc 1 991 2 is_stmt 1 view .LVU330
 991:../../../mod/valve/valve.c **** 	}
 1513              		.loc 1 991 21 is_stmt 0 view .LVU331
 1514 005a 034B     		ldr	r3, .L151+4
 1515 005c 0022     		movs	r2, #0
 1516 005e 1A70     		strb	r2, [r3]
 1517              	.L145:
 994:../../../mod/valve/valve.c **** 
 1518              		.loc 1 994 1 view .LVU332
 1519 0060 08BD     		pop	{r3, pc}
 1520              	.L152:
 1521 0062 00BF     		.align	2
 1522              	.L151:
 1523 0064 00080258 		.word	1476528128
 1524 0068 00000000 		.word	lox_channelB_state
 1525 006c 00000000 		.word	lox_channelA_state
 1526 0070 00000000 		.word	ox_valve_opening
 1527 0074 00000000 		.word	lox_valve_pos
 1528 0078 00000000 		.word	ox_valve_cracking
 1529 007c 00000000 		.word	htim15
 1530              		.cfi_endproc
 1531              	.LFE161:
 1533              		.section	.text.fuel_channelA_ISR,"ax",%progbits
 1534              		.align	1
 1535              		.global	fuel_channelA_ISR
 1536              		.syntax unified
 1537              		.thumb
 1538              		.thumb_func
 1540              	fuel_channelA_ISR:
 1541              	.LFB162:
1010:../../../mod/valve/valve.c **** /* Low to High Transition */
 1542              		.loc 1 1010 1 is_stmt 1 view -0
 1543              		.cfi_startproc
 1544              		@ args = 0, pretend = 0, frame = 0
 1545              		@ frame_needed = 0, uses_anonymous_args = 0
 1546 0000 08B5     		push	{r3, lr}
 1547              	.LCFI21:
 1548              		.cfi_def_cfa_offset 8
 1549              		.cfi_offset 3, -8
 1550              		.cfi_offset 14, -4
1012:../../../mod/valve/valve.c **** 	{
 1551              		.loc 1 1012 1 view .LVU334
1012:../../../mod/valve/valve.c **** 	{
 1552              		.loc 1 1012 6 is_stmt 0 view .LVU335
 1553 0002 4FF48041 		mov	r1, #16384
 1554 0006 0F48     		ldr	r0, .L157
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 57


 1555 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1556              	.LVL99:
1012:../../../mod/valve/valve.c **** 	{
 1557              		.loc 1 1012 4 discriminator 1 view .LVU336
 1558 000c A8B1     		cbz	r0, .L154
1014:../../../mod/valve/valve.c **** 	if ( !fuel_channelB_state )
 1559              		.loc 1 1014 2 is_stmt 1 view .LVU337
1014:../../../mod/valve/valve.c **** 	if ( !fuel_channelB_state )
 1560              		.loc 1 1014 22 is_stmt 0 view .LVU338
 1561 000e 0E4B     		ldr	r3, .L157+4
 1562 0010 0122     		movs	r2, #1
 1563 0012 1A70     		strb	r2, [r3]
1015:../../../mod/valve/valve.c **** 		{
 1564              		.loc 1 1015 2 is_stmt 1 view .LVU339
1015:../../../mod/valve/valve.c **** 		{
 1565              		.loc 1 1015 7 is_stmt 0 view .LVU340
 1566 0014 0D4B     		ldr	r3, .L157+8
 1567 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1015:../../../mod/valve/valve.c **** 		{
 1568              		.loc 1 1015 5 view .LVU341
 1569 0018 93B9     		cbnz	r3, .L153
1018:../../../mod/valve/valve.c **** 
 1570              		.loc 1 1018 3 is_stmt 1 view .LVU342
 1571 001a FFF7FEFF 		bl	dec_fuel_encoder
 1572              	.LVL100:
1021:../../../mod/valve/valve.c **** 			{
 1573              		.loc 1 1021 3 view .LVU343
1021:../../../mod/valve/valve.c **** 			{
 1574              		.loc 1 1021 8 is_stmt 0 view .LVU344
 1575 001e 0C4B     		ldr	r3, .L157+12
 1576 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1021:../../../mod/valve/valve.c **** 			{
 1577              		.loc 1 1021 6 view .LVU345
 1578 0022 6BB1     		cbz	r3, .L153
1021:../../../mod/valve/valve.c **** 			{
 1579              		.loc 1 1021 47 discriminator 1 view .LVU346
 1580 0024 0B4B     		ldr	r3, .L157+16
 1581 0026 1B68     		ldr	r3, [r3]
1021:../../../mod/valve/valve.c **** 			{
 1582              		.loc 1 1021 27 discriminator 1 view .LVU347
 1583 0028 53B9     		cbnz	r3, .L153
1023:../../../mod/valve/valve.c **** 			fuel_valve_closing = false;
 1584              		.loc 1 1023 4 is_stmt 1 view .LVU348
 1585 002a 0C21     		movs	r1, #12
 1586 002c 0A48     		ldr	r0, .L157+20
 1587 002e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1588              	.LVL101:
1024:../../../mod/valve/valve.c **** 			}
 1589              		.loc 1 1024 4 view .LVU349
1024:../../../mod/valve/valve.c **** 			}
 1590              		.loc 1 1024 23 is_stmt 0 view .LVU350
 1591 0032 074B     		ldr	r3, .L157+12
 1592 0034 0022     		movs	r2, #0
 1593 0036 1A70     		strb	r2, [r3]
 1594 0038 02E0     		b	.L153
 1595              	.L154:
1031:../../../mod/valve/valve.c **** 	}
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 58


 1596              		.loc 1 1031 2 is_stmt 1 view .LVU351
1031:../../../mod/valve/valve.c **** 	}
 1597              		.loc 1 1031 22 is_stmt 0 view .LVU352
 1598 003a 034B     		ldr	r3, .L157+4
 1599 003c 0022     		movs	r2, #0
 1600 003e 1A70     		strb	r2, [r3]
 1601              	.L153:
1033:../../../mod/valve/valve.c **** 
 1602              		.loc 1 1033 1 view .LVU353
 1603 0040 08BD     		pop	{r3, pc}
 1604              	.L158:
 1605 0042 00BF     		.align	2
 1606              	.L157:
 1607 0044 000C0258 		.word	1476529152
 1608 0048 00000000 		.word	fuel_channelA_state
 1609 004c 00000000 		.word	fuel_channelB_state
 1610 0050 00000000 		.word	fuel_valve_closing
 1611 0054 00000000 		.word	fuel_valve_pos
 1612 0058 00000000 		.word	htim2
 1613              		.cfi_endproc
 1614              	.LFE162:
 1616              		.section	.text.fuel_channelB_ISR,"ax",%progbits
 1617              		.align	1
 1618              		.global	fuel_channelB_ISR
 1619              		.syntax unified
 1620              		.thumb
 1621              		.thumb_func
 1623              	fuel_channelB_ISR:
 1624              	.LFB163:
1049:../../../mod/valve/valve.c **** /* Low to High Transition */
 1625              		.loc 1 1049 1 is_stmt 1 view -0
 1626              		.cfi_startproc
 1627              		@ args = 0, pretend = 0, frame = 0
 1628              		@ frame_needed = 0, uses_anonymous_args = 0
 1629 0000 08B5     		push	{r3, lr}
 1630              	.LCFI22:
 1631              		.cfi_def_cfa_offset 8
 1632              		.cfi_offset 3, -8
 1633              		.cfi_offset 14, -4
1051:../../../mod/valve/valve.c **** 	{
 1634              		.loc 1 1051 1 view .LVU355
1051:../../../mod/valve/valve.c **** 	{
 1635              		.loc 1 1051 6 is_stmt 0 view .LVU356
 1636 0002 4FF40041 		mov	r1, #32768
 1637 0006 1748     		ldr	r0, .L165
 1638 0008 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 1639              	.LVL102:
1051:../../../mod/valve/valve.c **** 	{
 1640              		.loc 1 1051 4 discriminator 1 view .LVU357
 1641 000c 28B3     		cbz	r0, .L160
1053:../../../mod/valve/valve.c **** 	if ( !fuel_channelA_state )
 1642              		.loc 1 1053 2 is_stmt 1 view .LVU358
1053:../../../mod/valve/valve.c **** 	if ( !fuel_channelA_state )
 1643              		.loc 1 1053 22 is_stmt 0 view .LVU359
 1644 000e 164B     		ldr	r3, .L165+4
 1645 0010 0122     		movs	r2, #1
 1646 0012 1A70     		strb	r2, [r3]
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 59


1054:../../../mod/valve/valve.c **** 		{
 1647              		.loc 1 1054 2 is_stmt 1 view .LVU360
1054:../../../mod/valve/valve.c **** 		{
 1648              		.loc 1 1054 7 is_stmt 0 view .LVU361
 1649 0014 154B     		ldr	r3, .L165+8
 1650 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1054:../../../mod/valve/valve.c **** 		{
 1651              		.loc 1 1054 5 view .LVU362
 1652 0018 13BB     		cbnz	r3, .L159
1057:../../../mod/valve/valve.c **** 
 1653              		.loc 1 1057 3 is_stmt 1 view .LVU363
 1654 001a FFF7FEFF 		bl	inc_fuel_encoder
 1655              	.LVL103:
1060:../../../mod/valve/valve.c **** 			{
 1656              		.loc 1 1060 3 view .LVU364
1060:../../../mod/valve/valve.c **** 			{
 1657              		.loc 1 1060 13 is_stmt 0 view .LVU365
 1658 001e 144B     		ldr	r3, .L165+12
 1659 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1060:../../../mod/valve/valve.c **** 			{
 1660              		.loc 1 1060 11 view .LVU366
 1661 0022 1BB1     		cbz	r3, .L162
1060:../../../mod/valve/valve.c **** 			{
 1662              		.loc 1 1060 52 discriminator 1 view .LVU367
 1663 0024 134B     		ldr	r3, .L165+16
 1664 0026 1B68     		ldr	r3, [r3]
1060:../../../mod/valve/valve.c **** 			{
 1665              		.loc 1 1060 32 discriminator 1 view .LVU368
 1666 0028 FA2B     		cmp	r3, #250
 1667 002a 0ED0     		beq	.L164
 1668              	.L162:
1066:../../../mod/valve/valve.c **** 			{
 1669              		.loc 1 1066 8 is_stmt 1 view .LVU369
1066:../../../mod/valve/valve.c **** 			{
 1670              		.loc 1 1066 13 is_stmt 0 view .LVU370
 1671 002c 124B     		ldr	r3, .L165+20
 1672 002e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1066:../../../mod/valve/valve.c **** 			{
 1673              		.loc 1 1066 11 view .LVU371
 1674 0030 B3B1     		cbz	r3, .L159
1066:../../../mod/valve/valve.c **** 			{
 1675              		.loc 1 1066 53 discriminator 1 view .LVU372
 1676 0032 104B     		ldr	r3, .L165+16
 1677 0034 1B68     		ldr	r3, [r3]
1066:../../../mod/valve/valve.c **** 			{
 1678              		.loc 1 1066 33 discriminator 1 view .LVU373
 1679 0036 472B     		cmp	r3, #71
 1680 0038 12D1     		bne	.L159
1068:../../../mod/valve/valve.c **** 			fuel_valve_cracking = false;
 1681              		.loc 1 1068 4 is_stmt 1 view .LVU374
 1682 003a 0C21     		movs	r1, #12
 1683 003c 0F48     		ldr	r0, .L165+24
 1684 003e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1685              	.LVL104:
1069:../../../mod/valve/valve.c **** 			}
 1686              		.loc 1 1069 4 view .LVU375
1069:../../../mod/valve/valve.c **** 			}
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 60


 1687              		.loc 1 1069 24 is_stmt 0 view .LVU376
 1688 0042 0D4B     		ldr	r3, .L165+20
 1689 0044 0022     		movs	r2, #0
 1690 0046 1A70     		strb	r2, [r3]
 1691 0048 0AE0     		b	.L159
 1692              	.L164:
1062:../../../mod/valve/valve.c **** 			fuel_valve_opening = false;
 1693              		.loc 1 1062 4 is_stmt 1 view .LVU377
 1694 004a 0C21     		movs	r1, #12
 1695 004c 0B48     		ldr	r0, .L165+24
 1696 004e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 1697              	.LVL105:
1063:../../../mod/valve/valve.c **** 			}
 1698              		.loc 1 1063 4 view .LVU378
1063:../../../mod/valve/valve.c **** 			}
 1699              		.loc 1 1063 23 is_stmt 0 view .LVU379
 1700 0052 074B     		ldr	r3, .L165+12
 1701 0054 0022     		movs	r2, #0
 1702 0056 1A70     		strb	r2, [r3]
 1703 0058 02E0     		b	.L159
 1704              	.L160:
1076:../../../mod/valve/valve.c **** 	}
 1705              		.loc 1 1076 2 is_stmt 1 view .LVU380
1076:../../../mod/valve/valve.c **** 	}
 1706              		.loc 1 1076 22 is_stmt 0 view .LVU381
 1707 005a 034B     		ldr	r3, .L165+4
 1708 005c 0022     		movs	r2, #0
 1709 005e 1A70     		strb	r2, [r3]
 1710              	.L159:
1079:../../../mod/valve/valve.c **** 
 1711              		.loc 1 1079 1 view .LVU382
 1712 0060 08BD     		pop	{r3, pc}
 1713              	.L166:
 1714 0062 00BF     		.align	2
 1715              	.L165:
 1716 0064 000C0258 		.word	1476529152
 1717 0068 00000000 		.word	fuel_channelB_state
 1718 006c 00000000 		.word	fuel_channelA_state
 1719 0070 00000000 		.word	fuel_valve_opening
 1720 0074 00000000 		.word	fuel_valve_pos
 1721 0078 00000000 		.word	fuel_valve_cracking
 1722 007c 00000000 		.word	htim2
 1723              		.cfi_endproc
 1724              	.LFE163:
 1726              		.section	.text.valve_get_valve_states,"ax",%progbits
 1727              		.align	1
 1728              		.global	valve_get_valve_states
 1729              		.syntax unified
 1730              		.thumb
 1731              		.thumb_func
 1733              	valve_get_valve_states:
 1734              	.LFB170:
1256:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 1735              		.loc 1 1256 1 is_stmt 1 view -0
 1736              		.cfi_startproc
 1737              		@ args = 0, pretend = 0, frame = 0
 1738              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 61


 1739 0000 10B5     		push	{r4, lr}
 1740              	.LCFI23:
 1741              		.cfi_def_cfa_offset 8
 1742              		.cfi_offset 4, -8
 1743              		.cfi_offset 14, -4
1260:../../../mod/valve/valve.c **** 
 1744              		.loc 1 1260 1 view .LVU384
1266:../../../mod/valve/valve.c **** 
 1745              		.loc 1 1266 1 view .LVU385
 1746              	.LVL106:
1274:../../../mod/valve/valve.c **** 	{
 1747              		.loc 1 1274 1 view .LVU386
1274:../../../mod/valve/valve.c **** 	{
 1748              		.loc 1 1274 6 is_stmt 0 view .LVU387
 1749 0002 FFF7FEFF 		bl	valve_get_ox_valve_state
 1750              	.LVL107:
1274:../../../mod/valve/valve.c **** 	{
 1751              		.loc 1 1274 4 discriminator 1 view .LVU388
 1752 0006 38B1     		cbz	r0, .L170
1266:../../../mod/valve/valve.c **** 
 1753              		.loc 1 1266 19 view .LVU389
 1754 0008 0024     		movs	r4, #0
 1755              	.L168:
 1756              	.LVL108:
1280:../../../mod/valve/valve.c **** 	{
 1757              		.loc 1 1280 1 is_stmt 1 view .LVU390
1280:../../../mod/valve/valve.c **** 	{
 1758              		.loc 1 1280 6 is_stmt 0 view .LVU391
 1759 000a FFF7FEFF 		bl	valve_get_fuel_valve_state
 1760              	.LVL109:
1280:../../../mod/valve/valve.c **** 	{
 1761              		.loc 1 1280 4 discriminator 1 view .LVU392
 1762 000e 08B9     		cbnz	r0, .L169
1282:../../../mod/valve/valve.c **** 	}
 1763              		.loc 1 1282 2 is_stmt 1 view .LVU393
1282:../../../mod/valve/valve.c **** 	}
 1764              		.loc 1 1282 20 is_stmt 0 view .LVU394
 1765 0010 44F04004 		orr	r4, r4, #64
 1766              	.LVL110:
 1767              	.L169:
1285:../../../mod/valve/valve.c **** } /* valve_get_valve_states */
 1768              		.loc 1 1285 1 is_stmt 1 view .LVU395
1286:../../../mod/valve/valve.c **** 
 1769              		.loc 1 1286 1 is_stmt 0 view .LVU396
 1770 0014 2046     		mov	r0, r4
 1771 0016 10BD     		pop	{r4, pc}
 1772              	.LVL111:
 1773              	.L170:
1276:../../../mod/valve/valve.c **** 	}
 1774              		.loc 1 1276 20 view .LVU397
 1775 0018 8024     		movs	r4, #128
 1776 001a F6E7     		b	.L168
 1777              		.cfi_endproc
 1778              	.LFE170:
 1780              		.section	.text.valve_cmd_execute,"ax",%progbits
 1781              		.align	1
 1782              		.global	valve_cmd_execute
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 62


 1783              		.syntax unified
 1784              		.thumb
 1785              		.thumb_func
 1787              	valve_cmd_execute:
 1788              	.LVL112:
 1789              	.LFB144:
 151:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 1790              		.loc 1 151 1 is_stmt 1 view -0
 1791              		.cfi_startproc
 1792              		@ args = 0, pretend = 0, frame = 8
 1793              		@ frame_needed = 0, uses_anonymous_args = 0
 151:../../../mod/valve/valve.c **** /*------------------------------------------------------------------------------
 1794              		.loc 1 151 1 is_stmt 0 view .LVU399
 1795 0000 30B5     		push	{r4, r5, lr}
 1796              	.LCFI24:
 1797              		.cfi_def_cfa_offset 12
 1798              		.cfi_offset 4, -12
 1799              		.cfi_offset 5, -8
 1800              		.cfi_offset 14, -4
 1801 0002 83B0     		sub	sp, sp, #12
 1802              	.LCFI25:
 1803              		.cfi_def_cfa_offset 24
 155:../../../mod/valve/valve.c **** VALVE_STATUS      valve_status[2];   /* Valve return codes                 */
 1804              		.loc 1 155 1 is_stmt 1 view .LVU400
 156:../../../mod/valve/valve.c **** MAIN_VALVE_STATES main_valve_states; /* Main valve open/close states       */
 1805              		.loc 1 156 1 view .LVU401
 157:../../../mod/valve/valve.c **** 
 1806              		.loc 1 157 1 view .LVU402
 163:../../../mod/valve/valve.c **** subcommand       -= valve_num;
 1807              		.loc 1 163 1 view .LVU403
 163:../../../mod/valve/valve.c **** subcommand       -= valve_num;
 1808              		.loc 1 163 19 is_stmt 0 view .LVU404
 1809 0004 00F00102 		and	r2, r0, #1
 1810              	.LVL113:
 164:../../../mod/valve/valve.c **** main_valve_states = 0;
 1811              		.loc 1 164 1 is_stmt 1 view .LVU405
 164:../../../mod/valve/valve.c **** main_valve_states = 0;
 1812              		.loc 1 164 18 is_stmt 0 view .LVU406
 1813 0008 00F0FE04 		and	r4, r0, #254
 1814              	.LVL114:
 165:../../../mod/valve/valve.c **** 
 1815              		.loc 1 165 1 is_stmt 1 view .LVU407
 165:../../../mod/valve/valve.c **** 
 1816              		.loc 1 165 19 is_stmt 0 view .LVU408
 1817 000c 0023     		movs	r3, #0
 1818 000e 8DF80330 		strb	r3, [sp, #3]
 171:../../../mod/valve/valve.c **** 	{
 1819              		.loc 1 171 1 is_stmt 1 view .LVU409
 1820 0012 142C     		cmp	r4, #20
 1821 0014 5AD8     		bhi	.L187
 1822 0016 DFE804F0 		tbb	[pc, r4]
 1823              	.L175:
 1824 001a 0B       		.byte	(.L183-.L175)/2
 1825 001b 59       		.byte	(.L187-.L175)/2
 1826 001c 0E       		.byte	(.L182-.L175)/2
 1827 001d 59       		.byte	(.L187-.L175)/2
 1828 001e 12       		.byte	(.L181-.L175)/2
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 63


 1829 001f 59       		.byte	(.L187-.L175)/2
 1830 0020 1B       		.byte	(.L180-.L175)/2
 1831 0021 59       		.byte	(.L187-.L175)/2
 1832 0022 24       		.byte	(.L179-.L175)/2
 1833 0023 59       		.byte	(.L187-.L175)/2
 1834 0024 28       		.byte	(.L178-.L175)/2
 1835 0025 59       		.byte	(.L187-.L175)/2
 1836 0026 59       		.byte	(.L187-.L175)/2
 1837 0027 59       		.byte	(.L187-.L175)/2
 1838 0028 59       		.byte	(.L187-.L175)/2
 1839 0029 59       		.byte	(.L187-.L175)/2
 1840 002a 31       		.byte	(.L177-.L175)/2
 1841 002b 59       		.byte	(.L187-.L175)/2
 1842 002c 3F       		.byte	(.L176-.L175)/2
 1843 002d 59       		.byte	(.L187-.L175)/2
 1844 002e 4D       		.byte	(.L174-.L175)/2
 1845 002f 00       		.p2align 1
 1846              	.L183:
 178:../../../mod/valve/valve.c **** 		return VALVE_OK;
 1847              		.loc 1 178 3 view .LVU410
 1848 0030 FFF7FEFF 		bl	valve_enable_valves
 1849              	.LVL115:
 179:../../../mod/valve/valve.c **** 		} /* VALVE_ENABLE_CODE*/
 1850              		.loc 1 179 3 view .LVU411
 179:../../../mod/valve/valve.c **** 		} /* VALVE_ENABLE_CODE*/
 1851              		.loc 1 179 10 is_stmt 0 view .LVU412
 1852 0034 4BE0     		b	.L173
 1853              	.LVL116:
 1854              	.L182:
 187:../../../mod/valve/valve.c **** 		return VALVE_OK;
 1855              		.loc 1 187 3 is_stmt 1 view .LVU413
 1856 0036 FFF7FEFF 		bl	valve_disable_valves
 1857              	.LVL117:
 188:../../../mod/valve/valve.c **** 		} /* VALVE_DISABLE_CODE */
 1858              		.loc 1 188 3 view .LVU414
 188:../../../mod/valve/valve.c **** 		} /* VALVE_DISABLE_CODE */
 1859              		.loc 1 188 10 is_stmt 0 view .LVU415
 1860 003a 0024     		movs	r4, #0
 1861              	.LVL118:
 188:../../../mod/valve/valve.c **** 		} /* VALVE_DISABLE_CODE */
 1862              		.loc 1 188 10 view .LVU416
 1863 003c 47E0     		b	.L173
 1864              	.LVL119:
 1865              	.L181:
 196:../../../mod/valve/valve.c **** 			{
 1866              		.loc 1 196 3 is_stmt 1 view .LVU417
 196:../../../mod/valve/valve.c **** 			{
 1867              		.loc 1 196 6 is_stmt 0 view .LVU418
 1868 003e 1AB1     		cbz	r2, .L184
 198:../../../mod/valve/valve.c **** 			}
 1869              		.loc 1 198 4 is_stmt 1 view .LVU419
 198:../../../mod/valve/valve.c **** 			}
 1870              		.loc 1 198 11 is_stmt 0 view .LVU420
 1871 0040 FFF7FEFF 		bl	valve_open_fuel_valve
 1872              	.LVL120:
 198:../../../mod/valve/valve.c **** 			}
 1873              		.loc 1 198 11 view .LVU421
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 64


 1874 0044 0446     		mov	r4, r0
 1875              	.LVL121:
 198:../../../mod/valve/valve.c **** 			}
 1876              		.loc 1 198 11 view .LVU422
 1877 0046 42E0     		b	.L173
 1878              	.LVL122:
 1879              	.L184:
 202:../../../mod/valve/valve.c **** 			}
 1880              		.loc 1 202 4 is_stmt 1 view .LVU423
 202:../../../mod/valve/valve.c **** 			}
 1881              		.loc 1 202 11 is_stmt 0 view .LVU424
 1882 0048 FFF7FEFF 		bl	valve_open_ox_valve
 1883              	.LVL123:
 202:../../../mod/valve/valve.c **** 			}
 1884              		.loc 1 202 11 view .LVU425
 1885 004c 0446     		mov	r4, r0
 1886              	.LVL124:
 202:../../../mod/valve/valve.c **** 			}
 1887              		.loc 1 202 11 view .LVU426
 1888 004e 3EE0     		b	.L173
 1889              	.LVL125:
 1890              	.L180:
 211:../../../mod/valve/valve.c **** 			{
 1891              		.loc 1 211 3 is_stmt 1 view .LVU427
 211:../../../mod/valve/valve.c **** 			{
 1892              		.loc 1 211 6 is_stmt 0 view .LVU428
 1893 0050 1AB1     		cbz	r2, .L185
 213:../../../mod/valve/valve.c **** 			}
 1894              		.loc 1 213 4 is_stmt 1 view .LVU429
 213:../../../mod/valve/valve.c **** 			}
 1895              		.loc 1 213 11 is_stmt 0 view .LVU430
 1896 0052 FFF7FEFF 		bl	valve_close_fuel_valve
 1897              	.LVL126:
 213:../../../mod/valve/valve.c **** 			}
 1898              		.loc 1 213 11 view .LVU431
 1899 0056 0446     		mov	r4, r0
 1900              	.LVL127:
 213:../../../mod/valve/valve.c **** 			}
 1901              		.loc 1 213 11 view .LVU432
 1902 0058 39E0     		b	.L173
 1903              	.LVL128:
 1904              	.L185:
 217:../../../mod/valve/valve.c **** 			}
 1905              		.loc 1 217 4 is_stmt 1 view .LVU433
 217:../../../mod/valve/valve.c **** 			}
 1906              		.loc 1 217 11 is_stmt 0 view .LVU434
 1907 005a FFF7FEFF 		bl	valve_close_ox_valve
 1908              	.LVL129:
 217:../../../mod/valve/valve.c **** 			}
 1909              		.loc 1 217 11 view .LVU435
 1910 005e 0446     		mov	r4, r0
 1911              	.LVL130:
 217:../../../mod/valve/valve.c **** 			}
 1912              		.loc 1 217 11 view .LVU436
 1913 0060 35E0     		b	.L173
 1914              	.LVL131:
 1915              	.L179:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 65


 226:../../../mod/valve/valve.c **** 		} /* VALVE_CALIBRATE_CODE */
 1916              		.loc 1 226 3 is_stmt 1 view .LVU437
 226:../../../mod/valve/valve.c **** 		} /* VALVE_CALIBRATE_CODE */
 1917              		.loc 1 226 10 is_stmt 0 view .LVU438
 1918 0062 FFF7FEFF 		bl	valve_calibrate_valves
 1919              	.LVL132:
 226:../../../mod/valve/valve.c **** 		} /* VALVE_CALIBRATE_CODE */
 1920              		.loc 1 226 10 view .LVU439
 1921 0066 0446     		mov	r4, r0
 1922              	.LVL133:
 226:../../../mod/valve/valve.c **** 		} /* VALVE_CALIBRATE_CODE */
 1923              		.loc 1 226 10 view .LVU440
 1924 0068 31E0     		b	.L173
 1925              	.LVL134:
 1926              	.L178:
 234:../../../mod/valve/valve.c **** 			{
 1927              		.loc 1 234 3 is_stmt 1 view .LVU441
 234:../../../mod/valve/valve.c **** 			{
 1928              		.loc 1 234 6 is_stmt 0 view .LVU442
 1929 006a 1AB1     		cbz	r2, .L186
 236:../../../mod/valve/valve.c **** 			}
 1930              		.loc 1 236 4 is_stmt 1 view .LVU443
 236:../../../mod/valve/valve.c **** 			}
 1931              		.loc 1 236 11 is_stmt 0 view .LVU444
 1932 006c FFF7FEFF 		bl	valve_crack_fuel_valve
 1933              	.LVL135:
 236:../../../mod/valve/valve.c **** 			}
 1934              		.loc 1 236 11 view .LVU445
 1935 0070 0446     		mov	r4, r0
 1936              	.LVL136:
 236:../../../mod/valve/valve.c **** 			}
 1937              		.loc 1 236 11 view .LVU446
 1938 0072 2CE0     		b	.L173
 1939              	.LVL137:
 1940              	.L186:
 240:../../../mod/valve/valve.c **** 			}
 1941              		.loc 1 240 4 is_stmt 1 view .LVU447
 240:../../../mod/valve/valve.c **** 			}
 1942              		.loc 1 240 11 is_stmt 0 view .LVU448
 1943 0074 FFF7FEFF 		bl	valve_crack_ox_valve
 1944              	.LVL138:
 240:../../../mod/valve/valve.c **** 			}
 1945              		.loc 1 240 11 view .LVU449
 1946 0078 0446     		mov	r4, r0
 1947              	.LVL139:
 240:../../../mod/valve/valve.c **** 			}
 1948              		.loc 1 240 11 view .LVU450
 1949 007a 28E0     		b	.L173
 1950              	.LVL140:
 1951              	.L177:
 249:../../../mod/valve/valve.c **** 		valve_status[1] = valve_close_fuel_valve();
 1952              		.loc 1 249 3 is_stmt 1 view .LVU451
 249:../../../mod/valve/valve.c **** 		valve_status[1] = valve_close_fuel_valve();
 1953              		.loc 1 249 21 is_stmt 0 view .LVU452
 1954 007c FFF7FEFF 		bl	valve_close_ox_valve
 1955              	.LVL141:
 249:../../../mod/valve/valve.c **** 		valve_status[1] = valve_close_fuel_valve();
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 66


 1956              		.loc 1 249 21 view .LVU453
 1957 0080 0546     		mov	r5, r0
 249:../../../mod/valve/valve.c **** 		valve_status[1] = valve_close_fuel_valve();
 1958              		.loc 1 249 19 discriminator 1 view .LVU454
 1959 0082 8DF80400 		strb	r0, [sp, #4]
 250:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1960              		.loc 1 250 3 is_stmt 1 view .LVU455
 250:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1961              		.loc 1 250 21 is_stmt 0 view .LVU456
 1962 0086 FFF7FEFF 		bl	valve_close_fuel_valve
 1963              	.LVL142:
 1964 008a 0446     		mov	r4, r0
 1965              	.LVL143:
 250:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1966              		.loc 1 250 19 discriminator 1 view .LVU457
 1967 008c 8DF80500 		strb	r0, [sp, #5]
 251:../../../mod/valve/valve.c **** 			{
 1968              		.loc 1 251 3 is_stmt 1 view .LVU458
 251:../../../mod/valve/valve.c **** 			{
 1969              		.loc 1 251 6 is_stmt 0 view .LVU459
 1970 0090 05BB     		cbnz	r5, .L188
 251:../../../mod/valve/valve.c **** 			{
 1971              		.loc 1 251 40 discriminator 1 view .LVU460
 1972 0092 E0B1     		cbz	r0, .L173
 253:../../../mod/valve/valve.c **** 			}
 1973              		.loc 1 253 11 view .LVU461
 1974 0094 0524     		movs	r4, #5
 1975 0096 1AE0     		b	.L173
 1976              	.LVL144:
 1977              	.L176:
 266:../../../mod/valve/valve.c **** 		valve_status[1] = valve_open_fuel_valve();
 1978              		.loc 1 266 3 is_stmt 1 view .LVU462
 266:../../../mod/valve/valve.c **** 		valve_status[1] = valve_open_fuel_valve();
 1979              		.loc 1 266 21 is_stmt 0 view .LVU463
 1980 0098 FFF7FEFF 		bl	valve_open_ox_valve
 1981              	.LVL145:
 266:../../../mod/valve/valve.c **** 		valve_status[1] = valve_open_fuel_valve();
 1982              		.loc 1 266 21 view .LVU464
 1983 009c 0546     		mov	r5, r0
 266:../../../mod/valve/valve.c **** 		valve_status[1] = valve_open_fuel_valve();
 1984              		.loc 1 266 19 discriminator 1 view .LVU465
 1985 009e 8DF80400 		strb	r0, [sp, #4]
 267:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1986              		.loc 1 267 3 is_stmt 1 view .LVU466
 267:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1987              		.loc 1 267 21 is_stmt 0 view .LVU467
 1988 00a2 FFF7FEFF 		bl	valve_open_fuel_valve
 1989              	.LVL146:
 1990 00a6 0446     		mov	r4, r0
 1991              	.LVL147:
 267:../../../mod/valve/valve.c **** 		if ( ( valve_status[0] != VALVE_OK ) || ( valve_status[1] != VALVE_OK ) )
 1992              		.loc 1 267 19 discriminator 1 view .LVU468
 1993 00a8 8DF80500 		strb	r0, [sp, #5]
 268:../../../mod/valve/valve.c **** 			{
 1994              		.loc 1 268 3 is_stmt 1 view .LVU469
 268:../../../mod/valve/valve.c **** 			{
 1995              		.loc 1 268 6 is_stmt 0 view .LVU470
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 67


 1996 00ac A5B9     		cbnz	r5, .L189
 268:../../../mod/valve/valve.c **** 			{
 1997              		.loc 1 268 40 discriminator 1 view .LVU471
 1998 00ae 70B1     		cbz	r0, .L173
 270:../../../mod/valve/valve.c **** 			}
 1999              		.loc 1 270 11 view .LVU472
 2000 00b0 0524     		movs	r4, #5
 2001 00b2 0CE0     		b	.L173
 2002              	.LVL148:
 2003              	.L174:
 283:../../../mod/valve/valve.c **** 		#if defined( HOTFIRE )
 2004              		.loc 1 283 3 is_stmt 1 view .LVU473
 283:../../../mod/valve/valve.c **** 		#if defined( HOTFIRE )
 2005              		.loc 1 283 23 is_stmt 0 view .LVU474
 2006 00b4 FFF7FEFF 		bl	valve_get_valve_states
 2007              	.LVL149:
 283:../../../mod/valve/valve.c **** 		#if defined( HOTFIRE )
 2008              		.loc 1 283 21 discriminator 1 view .LVU475
 2009 00b8 8DF80300 		strb	r0, [sp, #3]
 289:../../../mod/valve/valve.c **** 			              sizeof( main_valve_states ),
 2010              		.loc 1 289 4 is_stmt 1 view .LVU476
 2011 00bc 0122     		movs	r2, #1
 2012 00be 1146     		mov	r1, r2
 2013 00c0 0DF10300 		add	r0, sp, #3
 2014 00c4 FFF7FEFF 		bl	usb_transmit
 2015              	.LVL150:
 300:../../../mod/valve/valve.c **** 		}
 2016              		.loc 1 300 10 is_stmt 0 view .LVU477
 2017 00c8 0224     		movs	r4, #2
 2018              	.LVL151:
 300:../../../mod/valve/valve.c **** 		}
 2019              		.loc 1 300 10 view .LVU478
 2020 00ca 00E0     		b	.L173
 2021              	.LVL152:
 2022              	.L187:
 171:../../../mod/valve/valve.c **** 	{
 2023              		.loc 1 171 1 view .LVU479
 2024 00cc 0224     		movs	r4, #2
 2025              	.LVL153:
 2026              	.L173:
 305:../../../mod/valve/valve.c **** #endif
 2027              		.loc 1 305 1 view .LVU480
 2028 00ce 2046     		mov	r0, r4
 2029 00d0 03B0     		add	sp, sp, #12
 2030              	.LCFI26:
 2031              		.cfi_remember_state
 2032              		.cfi_def_cfa_offset 12
 2033              		@ sp needed
 2034 00d2 30BD     		pop	{r4, r5, pc}
 2035              	.L188:
 2036              	.LCFI27:
 2037              		.cfi_restore_state
 253:../../../mod/valve/valve.c **** 			}
 2038              		.loc 1 253 11 view .LVU481
 2039 00d4 0524     		movs	r4, #5
 2040 00d6 FAE7     		b	.L173
 2041              	.L189:
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 68


 270:../../../mod/valve/valve.c **** 			}
 2042              		.loc 1 270 11 view .LVU482
 2043 00d8 0524     		movs	r4, #5
 2044 00da F8E7     		b	.L173
 2045              		.cfi_endproc
 2046              	.LFE144:
 2048              		.section	.bss.fuel_valve_cracking,"aw",%nobits
 2051              	fuel_valve_cracking:
 2052 0000 00       		.space	1
 2053              		.section	.bss.ox_valve_cracking,"aw",%nobits
 2056              	ox_valve_cracking:
 2057 0000 00       		.space	1
 2058              		.section	.bss.fuel_valve_opening,"aw",%nobits
 2061              	fuel_valve_opening:
 2062 0000 00       		.space	1
 2063              		.section	.bss.fuel_valve_closing,"aw",%nobits
 2066              	fuel_valve_closing:
 2067 0000 00       		.space	1
 2068              		.section	.bss.ox_valve_opening,"aw",%nobits
 2071              	ox_valve_opening:
 2072 0000 00       		.space	1
 2073              		.section	.bss.ox_valve_closing,"aw",%nobits
 2076              	ox_valve_closing:
 2077 0000 00       		.space	1
 2078              		.section	.bss.fuel_driver_state,"aw",%nobits
 2079              		.align	2
 2082              	fuel_driver_state:
 2083 0000 0000     		.space	2
 2084              		.section	.bss.lox_driver_state,"aw",%nobits
 2085              		.align	2
 2088              	lox_driver_state:
 2089 0000 0000     		.space	2
 2090              		.section	.bss.fuel_channelB_state,"aw",%nobits
 2093              	fuel_channelB_state:
 2094 0000 00       		.space	1
 2095              		.section	.bss.fuel_channelA_state,"aw",%nobits
 2098              	fuel_channelA_state:
 2099 0000 00       		.space	1
 2100              		.section	.bss.fuel_valve_pos,"aw",%nobits
 2101              		.align	2
 2104              	fuel_valve_pos:
 2105 0000 00000000 		.space	4
 2106              		.section	.bss.lox_channelB_state,"aw",%nobits
 2109              	lox_channelB_state:
 2110 0000 00       		.space	1
 2111              		.section	.bss.lox_channelA_state,"aw",%nobits
 2114              	lox_channelA_state:
 2115 0000 00       		.space	1
 2116              		.section	.bss.lox_valve_pos,"aw",%nobits
 2117              		.align	2
 2120              	lox_valve_pos:
 2121 0000 00000000 		.space	4
 2122              		.text
 2123              	.Letext0:
 2124              		.file 2 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 2125              		.file 3 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 2126              		.file 4 "../../../lib/Drivers/CMSIS/Device/ST/STM32H7xx/Include/stm32h750xx.h"
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 69


 2127              		.file 5 "/Applications/ArmGNUToolchain/13.3.rel1/arm-none-eabi/lib/gcc/arm-none-eabi/13.3.1/includ
 2128              		.file 6 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 2129              		.file 7 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_gpio.h"
 2130              		.file 8 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_dma.h"
 2131              		.file 9 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_tim.h"
 2132              		.file 10 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_uart.h"
 2133              		.file 11 "../../../lib/sdr_pin_defines_L0005.h"
 2134              		.file 12 "../../../mod/valve/valve.h"
 2135              		.file 13 "../../../mod/usb/usb.h"
 2136              		.file 14 "../../../lib/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal.h"
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 70


DEFINED SYMBOLS
                            *ABS*:00000000 valve.c
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:20     .text.inc_lox_encoder:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:25     .text.inc_lox_encoder:00000000 inc_lox_encoder
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:58     .text.inc_lox_encoder:00000020 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2120   .bss.lox_valve_pos:00000000 lox_valve_pos
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:63     .text.inc_fuel_encoder:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:68     .text.inc_fuel_encoder:00000000 inc_fuel_encoder
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:101    .text.inc_fuel_encoder:00000020 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2104   .bss.fuel_valve_pos:00000000 fuel_valve_pos
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:106    .text.dec_lox_encoder:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:111    .text.dec_lox_encoder:00000000 dec_lox_encoder
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:142    .text.dec_lox_encoder:0000001c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:147    .text.dec_fuel_encoder:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:152    .text.dec_fuel_encoder:00000000 dec_fuel_encoder
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:183    .text.dec_fuel_encoder:0000001c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:188    .text.lox_driver_enable:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:193    .text.lox_driver_enable:00000000 lox_driver_enable
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:220    .text.lox_driver_enable:00000018 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2088   .bss.lox_driver_state:00000000 lox_driver_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:226    .text.fuel_driver_enable:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:231    .text.fuel_driver_enable:00000000 fuel_driver_enable
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:258    .text.fuel_driver_enable:00000018 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2082   .bss.fuel_driver_state:00000000 fuel_driver_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:264    .text.lox_driver_disable:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:269    .text.lox_driver_disable:00000000 lox_driver_disable
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:296    .text.lox_driver_disable:00000018 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:302    .text.fuel_driver_disable:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:307    .text.fuel_driver_disable:00000000 fuel_driver_disable
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:334    .text.fuel_driver_disable:00000018 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:340    .text.lox_driver_set_direction:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:345    .text.lox_driver_set_direction:00000000 lox_driver_set_direction
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:408    .text.lox_driver_set_direction:00000030 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:414    .text.fuel_driver_set_direction:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:419    .text.fuel_driver_set_direction:00000000 fuel_driver_set_direction
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:482    .text.fuel_driver_set_direction:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:488    .text.valve_transmit:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:494    .text.valve_transmit:00000000 valve_transmit
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:544    .text.valve_transmit:00000020 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:549    .text.valve_receive:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:555    .text.valve_receive:00000000 valve_receive
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:605    .text.valve_receive:00000020 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:610    .text.valve_enable_valves:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:616    .text.valve_enable_valves:00000000 valve_enable_valves
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:639    .text.valve_disable_valves:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:645    .text.valve_disable_valves:00000000 valve_disable_valves
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:668    .text.valve_open_ox_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:674    .text.valve_open_ox_valve:00000000 valve_open_ox_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:731    .text.valve_open_ox_valve:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2071   .bss.ox_valve_opening:00000000 ox_valve_opening
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:738    .text.valve_open_fuel_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:744    .text.valve_open_fuel_valve:00000000 valve_open_fuel_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:801    .text.valve_open_fuel_valve:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2061   .bss.fuel_valve_opening:00000000 fuel_valve_opening
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:808    .text.valve_close_ox_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:814    .text.valve_close_ox_valve:00000000 valve_close_ox_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:871    .text.valve_close_ox_valve:0000002c $d
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 71


/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2076   .bss.ox_valve_closing:00000000 ox_valve_closing
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:878    .text.valve_close_fuel_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:884    .text.valve_close_fuel_valve:00000000 valve_close_fuel_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:941    .text.valve_close_fuel_valve:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2066   .bss.fuel_valve_closing:00000000 fuel_valve_closing
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:948    .text.valve_crack_ox_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:954    .text.valve_crack_ox_valve:00000000 valve_crack_ox_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1011   .text.valve_crack_ox_valve:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2056   .bss.ox_valve_cracking:00000000 ox_valve_cracking
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1018   .text.valve_crack_fuel_valve:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1024   .text.valve_crack_fuel_valve:00000000 valve_crack_fuel_valve
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1081   .text.valve_crack_fuel_valve:0000002c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2051   .bss.fuel_valve_cracking:00000000 fuel_valve_cracking
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1088   .text.valve_get_ox_valve_pos:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1094   .text.valve_get_ox_valve_pos:00000000 valve_get_ox_valve_pos
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1117   .text.valve_get_ox_valve_pos:0000001c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1123   .text.valve_get_fuel_valve_pos:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1129   .text.valve_get_fuel_valve_pos:00000000 valve_get_fuel_valve_pos
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1152   .text.valve_get_fuel_valve_pos:0000001c $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1158   .text.valve_get_ox_valve_state:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1164   .text.valve_get_ox_valve_state:00000000 valve_get_ox_valve_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1191   .text.valve_get_ox_valve_state:00000010 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1196   .text.valve_get_fuel_valve_state:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1202   .text.valve_get_fuel_valve_state:00000000 valve_get_fuel_valve_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1229   .text.valve_get_fuel_valve_state:00000010 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1234   .text.valve_calibrate_valves:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1240   .text.valve_calibrate_valves:00000000 valve_calibrate_valves
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1333   .text.valve_calibrate_valves:00000064 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1341   .text.lox_channelA_ISR:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1347   .text.lox_channelA_ISR:00000000 lox_channelA_ISR
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1414   .text.lox_channelA_ISR:00000044 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2114   .bss.lox_channelA_state:00000000 lox_channelA_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2109   .bss.lox_channelB_state:00000000 lox_channelB_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1424   .text.lox_channelB_ISR:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1430   .text.lox_channelB_ISR:00000000 lox_channelB_ISR
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1523   .text.lox_channelB_ISR:00000064 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1534   .text.fuel_channelA_ISR:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1540   .text.fuel_channelA_ISR:00000000 fuel_channelA_ISR
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1607   .text.fuel_channelA_ISR:00000044 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2098   .bss.fuel_channelA_state:00000000 fuel_channelA_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2093   .bss.fuel_channelB_state:00000000 fuel_channelB_state
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1617   .text.fuel_channelB_ISR:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1623   .text.fuel_channelB_ISR:00000000 fuel_channelB_ISR
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1716   .text.fuel_channelB_ISR:00000064 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1727   .text.valve_get_valve_states:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1733   .text.valve_get_valve_states:00000000 valve_get_valve_states
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1781   .text.valve_cmd_execute:00000000 $t
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1787   .text.valve_cmd_execute:00000000 valve_cmd_execute
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1824   .text.valve_cmd_execute:0000001a $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2052   .bss.fuel_valve_cracking:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2057   .bss.ox_valve_cracking:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2062   .bss.fuel_valve_opening:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2067   .bss.fuel_valve_closing:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2072   .bss.ox_valve_opening:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2077   .bss.ox_valve_closing:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2079   .bss.fuel_driver_state:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2085   .bss.lox_driver_state:00000000 $d
ARM GAS  /var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s 			page 72


/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2094   .bss.fuel_channelB_state:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2099   .bss.fuel_channelA_state:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2101   .bss.fuel_valve_pos:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2110   .bss.lox_channelB_state:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2115   .bss.lox_channelA_state:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:2117   .bss.lox_valve_pos:00000000 $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1845   .text.valve_cmd_execute:0000002f $d
/var/folders/hx/vbfbwrz55n51djycrk6r15qm0000gn/T//ccg4zsPx.s:1845   .text.valve_cmd_execute:00000030 $t

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_UART_Transmit
huart3
HAL_UART_Receive
HAL_TIM_PWM_Start
htim15
htim2
HAL_GPIO_ReadPin
HAL_Delay
HAL_TIM_PWM_Stop
usb_transmit
